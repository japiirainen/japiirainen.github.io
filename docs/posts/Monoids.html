<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Composable and reusable code using monoids</title>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="Verified definition of monoids in agda and exploration of some cool monoids." />
    
    <meta name="author" content="Joona Piirainen" />
     
    <meta name="keywords" content="agda, monoids, algebra, functional-programming, dependent-types" />
    

    <meta property="og:site_name" content="japiirainen" />
    <meta property="og:title" content="Composable and reusable code using monoids" />
    <meta property="og:url" content="https://japiirainen.xyz/posts/Monoids.html" />
    <meta property="og:description" content="Verified definition of monoids in agda and exploration of some cool monoids." />
     
    <meta property="og:type" content="article" />
    

    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:site" content="japiirainen" />
    <meta property="twitter:title" content="Composable and reusable code using monoids" />
    <meta property="twitter:description" content="Verified definition of monoids in agda and exploration of some cool monoids." />
     

    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="canonical" href="https://japiirainen.xyz/posts/Monoids.html" />
    <link rel="stylesheet" href="../css/default.css?2023-08-05" />
    <link rel="stylesheet" href="../css/agda.css?2023-08-05" />
    <link rel="stylesheet" href="../css/code.css?2023-08-05" />
    <script
      type="text/javascript"
      src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"
    ></script>
  </head>
  <body>
    <main>
  <article>
    <header>
      <h2>
        <a href="/">&#8592</a>
      </h2>
      <h1>
        <a href="/posts/Monoids.html">Composable and reusable code using monoids</a>
      </h1>
      <div>
        <small>2023-08-05</small>
        
      </div>
    </header>
    <section><p>This time I’ll ramble about <code>monoids</code>! The reason I like <code>monoids</code> is that they they are
relatively simple mathemically, but immensly useful in programming. Every programmer has
used a number of <code>monoid</code> structures thruought their careers either knowingly or not. The goal
of this post is to show that using ideas from mathematics can be useful and even <strong><em>practical</em></strong>.</p>
<p>I will use the <code>Agda</code> programming language / proof assistant to keep us honest. Mathematical
structures like <code>monoid</code> usually come equipped with a set of <em>properties</em> or <em>laws</em> that they
should obey, and the proof assistant capabilities of <code>Agda</code> let us precisely encode these <em>properties</em>.</p>
<p>This document is a typechecked literal <code>Agda</code> document. In fact all the definitions used in this module
are hyperlinks to their definitions. You can for example click the sumbol <code>Data.Nat.Properties</code> in the code block below to
see the <em>standard-library</em> module <code>Data.Nat.Properties</code>. It is common for an <code>Agda</code> module to begin with a bunch of module headers and imports,
this one is no exception :-).</p>
<pre class="Agda"><a id="1363" class="Symbol">{-#</a> <a id="1367" class="Keyword">OPTIONS</a> <a id="1375" class="Pragma">--safe</a> <a id="1382" class="Pragma">--guardedness</a> <a id="1396" class="Pragma">--cubical-compatible</a> <a id="1417" class="Symbol">#-}</a>
<a id="1421" class="Keyword">module</a> <a id="1428" href="Monoids.html" class="Module">Monoids</a> <a id="1436" class="Keyword">where</a>

<a id="1443" class="Keyword">open</a> <a id="1448" class="Keyword">import</a> <a id="1455" href="Level.html" class="Module">Level</a> <a id="1461" class="Keyword">renaming</a> <a id="1470" class="Symbol">(</a><a id="1471" href="Agda.Primitive.html#774" class="Primitive">suc</a> <a id="1475" class="Symbol">to</a> <a id="1478" class="Primitive">lsuc</a><a id="1482" class="Symbol">)</a>
<a id="1484" class="Keyword">open</a> <a id="1489" class="Keyword">import</a> <a id="1496" href="Function.html" class="Module">Function</a> <a id="1505" class="Keyword">using</a> <a id="1511" class="Symbol">(</a><a id="1512" href="Function.Base.html#1115" class="Function Operator">_∘_</a><a id="1515" class="Symbol">;</a> <a id="1517" href="Function.Base.html#704" class="Function">id</a><a id="1519" class="Symbol">;</a> <a id="1521" href="Function.Base.html#1638" class="Function">flip</a><a id="1525" class="Symbol">;</a> <a id="1527" href="Function.Base.html#725" class="Function">const</a><a id="1532" class="Symbol">)</a>
<a id="1534" class="Keyword">open</a> <a id="1539" class="Keyword">import</a> <a id="1546" href="Data.Nat.html" class="Module">Data.Nat</a> <a id="1555" class="Keyword">using</a> <a id="1561" class="Symbol">(</a><a id="1562" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">_+_</a><a id="1565" class="Symbol">;</a> <a id="1567" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">_*_</a><a id="1570" class="Symbol">;</a> <a id="1572" href="Data.Nat.Base.html#1330" class="Function Operator">_≤ᵇ_</a><a id="1576" class="Symbol">;</a> <a id="1578" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a><a id="1579" class="Symbol">)</a>
<a id="1581" class="Keyword">open</a> <a id="1586" class="Keyword">import</a> <a id="1593" href="Data.Nat.Properties.html" class="Module">Data.Nat.Properties</a> <a id="1613" class="Keyword">using</a> <a id="1619" class="Symbol">(</a><a id="1620" href="Data.Nat.Properties.html#14455" class="Function">+-assoc</a><a id="1627" class="Symbol">;</a> <a id="1629" href="Data.Nat.Properties.html#14556" class="Function">+-identityˡ</a><a id="1640" class="Symbol">;</a> <a id="1642" href="Data.Nat.Properties.html#14611" class="Function">+-identityʳ</a><a id="1653" class="Symbol">;</a> <a id="1655" href="Data.Nat.Properties.html#22029" class="Function">*-assoc</a><a id="1662" class="Symbol">;</a> <a id="1664" href="Data.Nat.Properties.html#20929" class="Function">*-identityˡ</a><a id="1675" class="Symbol">;</a> <a id="1677" href="Data.Nat.Properties.html#20993" class="Function">*-identityʳ</a><a id="1688" class="Symbol">)</a>
<a id="1690" class="Keyword">open</a> <a id="1695" class="Keyword">import</a> <a id="1702" href="Data.Bool.html" class="Module">Data.Bool</a> <a id="1712" class="Keyword">using</a> <a id="1718" class="Symbol">(</a><a id="1719" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a><a id="1723" class="Symbol">;</a> <a id="1725" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a><a id="1729" class="Symbol">;</a> <a id="1731" href="Agda.Builtin.Bool.html#175" class="InductiveConstructor">false</a><a id="1736" class="Symbol">;</a> <a id="1738" href="Data.Bool.Base.html#995" class="Function Operator">_∧_</a><a id="1741" class="Symbol">;</a> <a id="1743" href="Data.Bool.Base.html#1053" class="Function Operator">_∨_</a><a id="1746" class="Symbol">)</a>
<a id="1748" class="Keyword">open</a> <a id="1753" class="Keyword">import</a> <a id="1760" href="Data.Bool.Properties.html" class="Module">Data.Bool.Properties</a> <a id="1781" class="Keyword">using</a> <a id="1787" class="Symbol">(</a><a id="1788" href="Data.Bool.Properties.html#8098" class="Function">∧-assoc</a><a id="1795" class="Symbol">;</a> <a id="1797" href="Data.Bool.Properties.html#5308" class="Function">∨-assoc</a><a id="1804" class="Symbol">;</a> <a id="1806" href="Data.Bool.Properties.html#8305" class="Function">∧-identityˡ</a><a id="1817" class="Symbol">;</a> <a id="1819" href="Data.Bool.Properties.html#8363" class="Function">∧-identityʳ</a><a id="1830" class="Symbol">;</a> <a id="1832" href="Data.Bool.Properties.html#5515" class="Function">∨-identityˡ</a><a id="1843" class="Symbol">;</a> <a id="1845" href="Data.Bool.Properties.html#5574" class="Function">∨-identityʳ</a><a id="1856" class="Symbol">)</a>
<a id="1858" class="Keyword">open</a> <a id="1863" class="Keyword">import</a> <a id="1870" href="Data.List.html" class="Module">Data.List</a> <a id="1880" class="Keyword">using</a> <a id="1886" class="Symbol">(</a><a id="1887" href="Agda.Builtin.List.html#130" class="Datatype">List</a><a id="1891" class="Symbol">;</a> <a id="1893" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">_∷_</a><a id="1896" class="Symbol">;</a> <a id="1898" href="Data.List.Base.html#7375" class="InductiveConstructor">[]</a><a id="1900" class="Symbol">;</a> <a id="1902" href="Data.List.Base.html#1620" class="Function">map</a><a id="1905" class="Symbol">;</a> <a id="1907" href="Data.List.Base.html#4426" class="Function">foldl</a><a id="1912" class="Symbol">;</a> <a id="1914" href="Data.List.Base.html#1943" class="Function Operator">_++_</a><a id="1918" class="Symbol">;</a> <a id="1920" href="Data.List.Base.html#3703" class="Function">zip</a><a id="1923" class="Symbol">)</a>
<a id="1925" class="Keyword">open</a> <a id="1930" class="Keyword">import</a> <a id="1937" href="Data.List.Properties.html" class="Module">Data.List.Properties</a> <a id="1958" class="Keyword">using</a> <a id="1964" class="Symbol">(</a><a id="1965" href="Data.List.Properties.html#5580" class="Function">++-assoc</a><a id="1973" class="Symbol">;</a> <a id="1975" href="Data.List.Properties.html#5704" class="Function">++-identityˡ</a><a id="1987" class="Symbol">;</a> <a id="1989" href="Data.List.Properties.html#5768" class="Function">++-identityʳ</a><a id="2001" class="Symbol">)</a>
<a id="2003" class="Keyword">open</a> <a id="2008" class="Keyword">import</a> <a id="2015" href="Data.Product.html" class="Module">Data.Product</a> <a id="2028" class="Keyword">using</a> <a id="2034" class="Symbol">(</a><a id="2035" href="Agda.Builtin.Sigma.html#148" class="Record">Σ</a><a id="2036" class="Symbol">;</a> <a id="2038" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="2043" class="Symbol">;</a> <a id="2045" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="2050" class="Symbol">;</a> <a id="2052" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">_,_</a><a id="2055" class="Symbol">;</a> <a id="2057" href="Data.Product.Base.html#1618" class="Function Operator">_×_</a><a id="2060" class="Symbol">)</a>
<a id="2062" class="Keyword">open</a> <a id="2067" class="Keyword">import</a> <a id="2074" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="2112" class="Keyword">using</a> <a id="2118" class="Symbol">(</a><a id="2119" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="2123" class="Symbol">;</a> <a id="2125" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">_≡_</a><a id="2128" class="Symbol">;</a> <a id="2130" href="Relation.Binary.PropositionalEquality.Core.html#1712" class="Function">sym</a><a id="2133" class="Symbol">)</a>
</pre>
<p>One neat feature of <code>Agda</code> is it’s <code>variable</code> blocks. They let you generalize over variables in types.
In practice a <code>variable</code> block let’s you omit a bunch of detail from definitions since you can directly
use the variables defined in the <code>variable</code> block. I think this will make since once you see it in action.</p>
<pre class="Agda"><a id="2463" class="Keyword">variable</a>
  <a id="2474" href="Monoids.html#2474" class="Generalizable">ℓ</a> <a id="2476" href="Monoids.html#2476" class="Generalizable">ℓ₂</a> <a id="2479" class="Symbol">:</a> <a id="2481" href="Agda.Primitive.html#591" class="Postulate">Level</a>
  <a id="2489" href="Monoids.html#2489" class="Generalizable">A</a> <a id="2491" class="Symbol">:</a> <a id="2493" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="2497" href="Monoids.html#2474" class="Generalizable">ℓ</a>
  <a id="2501" href="Monoids.html#2501" class="Generalizable">B</a> <a id="2503" class="Symbol">:</a> <a id="2505" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="2509" href="Monoids.html#2476" class="Generalizable">ℓ₂</a>
</pre>
<p>If we look at the definition of a <code>monoid</code>, we will find that a <code>monoid</code> is a
<code>semigroup</code> with an <em>identity element</em>. From this it is reasonable to conclude that
we should first define what is a <code>semigroup</code>. Luckily <code>semigroups</code> are a very simple
structure.</p>
<h3 id="semigroup-definition"><a href="#semigroup-definition" class="anchor fas fa-xs fa-link"></a>Semigroup definition</h3>
<p>A semigroup is a <em>set</em> <span class="math inline">\(S\)</span> together with a <em>binary operation</em> <span class="math inline">\(★\)</span> that satisfies the
<em>associative property</em>.</p>
<p><span class="math display">\[
∀ x y z ∈ S. (x ★ y) ★ z = x ★ (y ★ z)
\]</span></p>
<p>Lets encode this in <code>agda</code>. The beautiful thing about <code>agda</code> is that the encoding is pretty much <em>1:1</em> to the math above.</p>
<pre class="Agda"><a id="level-of"></a><a id="3089" href="Monoids.html#3089" class="Function">level-of</a> <a id="3098" class="Symbol">:</a> <a id="3100" class="Symbol">{</a><a id="3101" href="Monoids.html#3101" class="Bound">ℓ</a> <a id="3103" class="Symbol">:</a> <a id="3105" href="Agda.Primitive.html#591" class="Postulate">Level</a><a id="3110" class="Symbol">}</a> <a id="3112" class="Symbol">→</a> <a id="3114" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="3118" href="Monoids.html#3101" class="Bound">ℓ</a> <a id="3120" class="Symbol">→</a> <a id="3122" href="Agda.Primitive.html#591" class="Postulate">Level</a>
<a id="3128" href="Monoids.html#3089" class="Function">level-of</a> <a id="3137" class="Symbol">{</a><a id="3138" href="Monoids.html#3138" class="Bound">ℓ</a><a id="3139" class="Symbol">}</a> <a id="3141" class="Symbol">_</a> <a id="3143" class="Symbol">=</a> <a id="3145" href="Monoids.html#3138" class="Bound">ℓ</a>

<a id="3148" class="Keyword">record</a> <a id="is-semigroup"></a><a id="3155" href="Monoids.html#3155" class="Record">is-semigroup</a> <a id="3168" class="Symbol">(</a><a id="3169" href="Monoids.html#3169" class="Bound Operator">_★_</a> <a id="3173" class="Symbol">:</a> <a id="3175" href="Monoids.html#2489" class="Generalizable">A</a> <a id="3177" class="Symbol">→</a> <a id="3179" href="Monoids.html#2489" class="Generalizable">A</a> <a id="3181" class="Symbol">→</a> <a id="3183" href="Monoids.html#2489" class="Generalizable">A</a><a id="3184" class="Symbol">)</a> <a id="3186" class="Symbol">:</a> <a id="3188" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="3192" class="Symbol">(</a><a id="3193" href="Monoids.html#3089" class="Function">level-of</a> <a id="3202" href="Monoids.html#3175" class="Bound">A</a><a id="3203" class="Symbol">)</a> <a id="3205" class="Keyword">where</a>
  <a id="3213" class="Keyword">field</a>
    <a id="is-semigroup.assoc"></a><a id="3223" href="Monoids.html#3223" class="Field">assoc</a> <a id="3229" class="Symbol">:</a> <a id="3231" class="Symbol">∀</a> <a id="3233" href="Monoids.html#3233" class="Bound">x</a> <a id="3235" href="Monoids.html#3235" class="Bound">y</a> <a id="3237" href="Monoids.html#3237" class="Bound">z</a> <a id="3239" class="Symbol">→</a> <a id="3241" class="Symbol">(</a><a id="3242" href="Monoids.html#3233" class="Bound">x</a> <a id="3244" href="Monoids.html#3169" class="Bound Operator">★</a> <a id="3246" href="Monoids.html#3235" class="Bound">y</a><a id="3247" class="Symbol">)</a> <a id="3249" href="Monoids.html#3169" class="Bound Operator">★</a> <a id="3251" href="Monoids.html#3237" class="Bound">z</a> <a id="3253" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="3255" href="Monoids.html#3233" class="Bound">x</a> <a id="3257" href="Monoids.html#3169" class="Bound Operator">★</a> <a id="3259" class="Symbol">(</a><a id="3260" href="Monoids.html#3235" class="Bound">y</a> <a id="3262" href="Monoids.html#3169" class="Bound Operator">★</a> <a id="3264" href="Monoids.html#3237" class="Bound">z</a><a id="3265" class="Symbol">)</a>

<a id="3268" class="Keyword">record</a> <a id="Semigroup"></a><a id="3275" href="Monoids.html#3275" class="Record">Semigroup</a> <a id="3285" class="Symbol">(</a><a id="3286" href="Monoids.html#3286" class="Bound">A</a> <a id="3288" class="Symbol">:</a> <a id="3290" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="3294" href="Monoids.html#2474" class="Generalizable">ℓ</a><a id="3295" class="Symbol">)</a> <a id="3297" class="Symbol">:</a> <a id="3299" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="3303" href="Monoids.html#3294" class="Bound">ℓ</a> <a id="3305" class="Keyword">where</a>
  <a id="3313" class="Keyword">infixl</a> <a id="3320" class="Number">5</a> <a id="3322" href="Monoids.html#3338" class="Field Operator">_★_</a>
  <a id="3328" class="Keyword">field</a>
    <a id="Semigroup._★_"></a><a id="3338" href="Monoids.html#3338" class="Field Operator">_★_</a> <a id="3342" class="Symbol">:</a> <a id="3344" href="Monoids.html#3286" class="Bound">A</a> <a id="3346" class="Symbol">→</a> <a id="3348" href="Monoids.html#3286" class="Bound">A</a> <a id="3350" class="Symbol">→</a> <a id="3352" href="Monoids.html#3286" class="Bound">A</a>
    <a id="Semigroup.has-is-semigroup"></a><a id="3358" href="Monoids.html#3358" class="Field">has-is-semigroup</a> <a id="3375" class="Symbol">:</a> <a id="3377" href="Monoids.html#3155" class="Record">is-semigroup</a> <a id="3390" href="Monoids.html#3338" class="Field Operator">_★_</a>

  <a id="3397" class="Keyword">open</a> <a id="3402" href="Monoids.html#3155" class="Module">is-semigroup</a> <a id="3415" href="Monoids.html#3358" class="Field">has-is-semigroup</a> <a id="3432" class="Keyword">public</a>
</pre>
<p>A couple of familiar <code>semigroups</code> to programmers are the <code>∧</code> and <code>∨</code> operators
from <em>boolean algebra</em>. We can show that they conform to our definition of a <code>semigroup</code></p>
<pre class="Agda"><a id="∧-semigroup"></a><a id="3621" href="Monoids.html#3621" class="Function">∧-semigroup</a> <a id="3633" class="Symbol">:</a> <a id="3635" href="Monoids.html#3275" class="Record">Semigroup</a> <a id="3645" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
<a id="3650" href="Monoids.html#3621" class="Function">∧-semigroup</a> <a id="3662" class="Symbol">=</a> <a id="3664" class="Keyword">record</a> <a id="3671" class="Symbol">{</a> <a id="3673" href="Monoids.html#3338" class="Field Operator">_★_</a> <a id="3677" class="Symbol">=</a> <a id="3679" class="Symbol">λ</a> <a id="3681" href="Monoids.html#3681" class="Bound">x</a> <a id="3683" href="Monoids.html#3683" class="Bound">y</a> <a id="3685" class="Symbol">→</a> <a id="3687" href="Monoids.html#3681" class="Bound">x</a> <a id="3689" href="Data.Bool.Base.html#995" class="Function Operator">∧</a> <a id="3691" href="Monoids.html#3683" class="Bound">y</a> 
                     <a id="3715" class="Symbol">;</a> <a id="3717" href="Monoids.html#3358" class="Field">has-is-semigroup</a> <a id="3734" class="Symbol">=</a> <a id="3736" class="Keyword">record</a> <a id="3743" class="Symbol">{</a> <a id="3745" href="Monoids.html#3223" class="Field">assoc</a> <a id="3751" class="Symbol">=</a> <a id="3753" href="Data.Bool.Properties.html#8098" class="Function">∧-assoc</a> <a id="3761" class="Symbol">}</a> <a id="3763" class="Symbol">}</a>

<a id="∨-semigroup"></a><a id="3766" href="Monoids.html#3766" class="Function">∨-semigroup</a> <a id="3778" class="Symbol">:</a> <a id="3780" href="Monoids.html#3275" class="Record">Semigroup</a> <a id="3790" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
<a id="3795" href="Monoids.html#3766" class="Function">∨-semigroup</a> <a id="3807" class="Symbol">=</a> <a id="3809" class="Keyword">record</a> <a id="3816" class="Symbol">{</a> <a id="3818" href="Monoids.html#3338" class="Field Operator">_★_</a> <a id="3822" class="Symbol">=</a> <a id="3824" class="Symbol">λ</a> <a id="3826" href="Monoids.html#3826" class="Bound">x</a> <a id="3828" href="Monoids.html#3828" class="Bound">y</a> <a id="3830" class="Symbol">→</a> <a id="3832" href="Monoids.html#3826" class="Bound">x</a> <a id="3834" href="Data.Bool.Base.html#1053" class="Function Operator">∨</a> <a id="3836" href="Monoids.html#3828" class="Bound">y</a> 
                     <a id="3860" class="Symbol">;</a> <a id="3862" href="Monoids.html#3358" class="Field">has-is-semigroup</a> <a id="3879" class="Symbol">=</a> <a id="3881" class="Keyword">record</a> <a id="3888" class="Symbol">{</a> <a id="3890" href="Monoids.html#3223" class="Field">assoc</a> <a id="3896" class="Symbol">=</a> <a id="3898" href="Data.Bool.Properties.html#5308" class="Function">∨-assoc</a> <a id="3906" class="Symbol">}</a> <a id="3908" class="Symbol">}</a>
</pre>
<p>Now that we have defined what it means to be a <code>semigroup</code>, we can graduate to
<code>monoids</code>. Lets recall the definition first.</p>
<h3 id="monoid-definition"><a href="#monoid-definition" class="anchor fas fa-xs fa-link"></a>Monoid definition</h3>
<p>A monoid is a <em>set</em> <span class="math inline">\(S\)</span> together with a <em>binary operation</em> <span class="math inline">\(★\)</span> that satisfies the
following properties.</p>
<h4 id="associativity"><a href="#associativity" class="anchor fas fa-xs fa-link"></a>Associativity</h4>
<p><span class="math display">\[
∀ x y z ∈ S. (x ★ y) ★ z = x ★ (y ★ z)
\]</span></p>
<h4 id="identity-element"><a href="#identity-element" class="anchor fas fa-xs fa-link"></a>Identity element</h4>
<p><span class="math display">\[
∃ e ∈ S. ∀ x. e ★ a = a ★ e = a
\]</span></p>
<p>Again, it is straight forward to translate this to <code>agda</code>.</p>
<pre class="Agda"><a id="4365" class="Keyword">record</a> <a id="is-monoid"></a><a id="4372" href="Monoids.html#4372" class="Record">is-monoid</a> <a id="4382" class="Symbol">(</a><a id="4383" href="Monoids.html#4383" class="Bound Operator">_★_</a> <a id="4387" class="Symbol">:</a> <a id="4389" href="Monoids.html#2489" class="Generalizable">A</a> <a id="4391" class="Symbol">→</a> <a id="4393" href="Monoids.html#2489" class="Generalizable">A</a> <a id="4395" class="Symbol">→</a> <a id="4397" href="Monoids.html#2489" class="Generalizable">A</a><a id="4398" class="Symbol">)</a> <a id="4400" class="Symbol">(</a><a id="4401" href="Monoids.html#4401" class="Bound">ε</a> <a id="4403" class="Symbol">:</a> <a id="4405" href="Monoids.html#2489" class="Generalizable">A</a><a id="4406" class="Symbol">)</a> <a id="4408" class="Symbol">:</a> <a id="4410" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="4414" class="Symbol">(</a><a id="4415" href="Monoids.html#3089" class="Function">level-of</a> <a id="4424" href="Monoids.html#4389" class="Bound">A</a><a id="4425" class="Symbol">)</a> <a id="4427" class="Keyword">where</a>
  <a id="4435" class="Keyword">field</a>
    <a id="is-monoid.has-is-semigroup"></a><a id="4445" href="Monoids.html#4445" class="Field">has-is-semigroup</a> <a id="4462" class="Symbol">:</a> <a id="4464" href="Monoids.html#3155" class="Record">is-semigroup</a> <a id="4477" href="Monoids.html#4383" class="Bound Operator">_★_</a>

  <a id="4484" class="Keyword">open</a> <a id="4489" href="Monoids.html#3155" class="Module">is-semigroup</a> <a id="4502" href="Monoids.html#4445" class="Field">has-is-semigroup</a> <a id="4519" class="Keyword">public</a>

  <a id="4529" class="Keyword">field</a>
    <a id="is-monoid.identityˡ"></a><a id="4539" href="Monoids.html#4539" class="Field">identityˡ</a> <a id="4549" class="Symbol">:</a> <a id="4551" class="Symbol">∀</a> <a id="4553" href="Monoids.html#4553" class="Bound">x</a> <a id="4555" class="Symbol">→</a> <a id="4557" href="Monoids.html#4401" class="Bound">ε</a> <a id="4559" href="Monoids.html#4383" class="Bound Operator">★</a> <a id="4561" href="Monoids.html#4553" class="Bound">x</a> <a id="4563" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="4565" href="Monoids.html#4553" class="Bound">x</a>
    <a id="is-monoid.identityʳ"></a><a id="4571" href="Monoids.html#4571" class="Field">identityʳ</a> <a id="4581" class="Symbol">:</a> <a id="4583" class="Symbol">∀</a> <a id="4585" href="Monoids.html#4585" class="Bound">x</a> <a id="4587" class="Symbol">→</a> <a id="4589" href="Monoids.html#4585" class="Bound">x</a> <a id="4591" href="Monoids.html#4383" class="Bound Operator">★</a> <a id="4593" href="Monoids.html#4401" class="Bound">ε</a> <a id="4595" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="4597" href="Monoids.html#4585" class="Bound">x</a>

<a id="4600" class="Keyword">record</a> <a id="Monoid"></a><a id="4607" href="Monoids.html#4607" class="Record">Monoid</a> <a id="4614" class="Symbol">(</a><a id="4615" href="Monoids.html#4615" class="Bound">A</a> <a id="4617" class="Symbol">:</a> <a id="4619" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="4623" href="Monoids.html#2474" class="Generalizable">ℓ</a><a id="4624" class="Symbol">)</a> <a id="4626" class="Symbol">:</a> <a id="4628" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="4632" href="Monoids.html#4623" class="Bound">ℓ</a> <a id="4634" class="Keyword">where</a>
  <a id="4642" class="Keyword">infixl</a> <a id="4649" class="Number">5</a> <a id="4651" href="Monoids.html#4677" class="Function Operator">_★_</a>
  <a id="4657" class="Keyword">field</a>
    <a id="Monoid.ε"></a><a id="4667" href="Monoids.html#4667" class="Field">ε</a> <a id="4669" class="Symbol">:</a> <a id="4671" href="Monoids.html#4615" class="Bound">A</a>
    <a id="Monoid._★_"></a><a id="4677" href="Monoids.html#4677" class="Field Operator">_★_</a> <a id="4681" class="Symbol">:</a> <a id="4683" href="Monoids.html#4615" class="Bound">A</a> <a id="4685" class="Symbol">→</a> <a id="4687" href="Monoids.html#4615" class="Bound">A</a> <a id="4689" class="Symbol">→</a> <a id="4691" href="Monoids.html#4615" class="Bound">A</a>
    <a id="Monoid.has-is-monoid"></a><a id="4697" href="Monoids.html#4697" class="Field">has-is-monoid</a> <a id="4711" class="Symbol">:</a> <a id="4713" href="Monoids.html#4372" class="Record">is-monoid</a> <a id="4723" href="Monoids.html#4677" class="Field Operator">_★_</a> <a id="4727" href="Monoids.html#4667" class="Field">ε</a>

  <a id="4732" class="Keyword">open</a> <a id="4737" href="Monoids.html#4372" class="Module">is-monoid</a> <a id="4747" href="Monoids.html#4697" class="Field">has-is-monoid</a> <a id="4761" class="Keyword">public</a>
</pre>
<p>We can show that <code>∧</code> and <code>∨</code> are <code>monoids</code>!</p>
<pre class="Agda"><a id="∧-monoid"></a><a id="4826" href="Monoids.html#4826" class="Function">∧-monoid</a> <a id="4835" class="Symbol">:</a> <a id="4837" href="Monoids.html#4607" class="Record">Monoid</a> <a id="4844" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
<a id="4849" href="Monoids.html#4826" class="Function">∧-monoid</a> <a id="4858" class="Symbol">=</a> <a id="4860" class="Keyword">record</a> <a id="4867" class="Symbol">{</a> <a id="4869" href="Monoids.html#4667" class="Field">ε</a> <a id="4871" class="Symbol">=</a> <a id="4873" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a> 
                  <a id="4897" class="Symbol">;</a> <a id="4899" href="Monoids.html#4677" class="Field Operator">_★_</a> <a id="4903" class="Symbol">=</a> <a id="4905" href="Data.Bool.Base.html#995" class="Function Operator">_∧_</a> 
                  <a id="4928" class="Symbol">;</a> <a id="4930" href="Monoids.html#4697" class="Field">has-is-monoid</a> <a id="4944" class="Symbol">=</a> 
                    <a id="4967" class="Keyword">record</a> <a id="4974" class="Symbol">{</a> <a id="4976" href="Monoids.html#4445" class="Field">has-is-semigroup</a> <a id="4993" class="Symbol">=</a> <a id="4995" href="Monoids.html#3358" class="Field">Semigroup.has-is-semigroup</a> <a id="5022" href="Monoids.html#3621" class="Function">∧-semigroup</a>
                           <a id="5061" class="Symbol">;</a> <a id="5063" href="Monoids.html#4539" class="Field">identityˡ</a> <a id="5073" class="Symbol">=</a> <a id="5075" href="Data.Bool.Properties.html#8305" class="Function">∧-identityˡ</a>
                           <a id="5114" class="Symbol">;</a> <a id="5116" href="Monoids.html#4571" class="Field">identityʳ</a> <a id="5126" class="Symbol">=</a> <a id="5128" href="Data.Bool.Properties.html#8363" class="Function">∧-identityʳ</a> <a id="5140" class="Symbol">}</a> <a id="5142" class="Symbol">}</a>

<a id="∨-monoid"></a><a id="5145" href="Monoids.html#5145" class="Function">∨-monoid</a> <a id="5154" class="Symbol">:</a> <a id="5156" href="Monoids.html#4607" class="Record">Monoid</a> <a id="5163" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
<a id="5168" href="Monoids.html#4667" class="Field">Monoid.ε</a> <a id="5177" href="Monoids.html#5145" class="Function">∨-monoid</a> <a id="5186" class="Symbol">=</a> <a id="5188" href="Agda.Builtin.Bool.html#175" class="InductiveConstructor">false</a>
<a id="5194" href="Monoids.html#4677" class="Field Operator">Monoid._★_</a> <a id="5205" href="Monoids.html#5145" class="Function">∨-monoid</a> <a id="5214" class="Symbol">=</a> <a id="5216" href="Data.Bool.Base.html#1053" class="Function Operator">_∨_</a>
<a id="5220" href="Monoids.html#4445" class="Field">is-monoid.has-is-semigroup</a> <a id="5247" class="Symbol">(</a><a id="5248" href="Monoids.html#4697" class="Field">Monoid.has-is-monoid</a> <a id="5269" href="Monoids.html#5145" class="Function">∨-monoid</a><a id="5277" class="Symbol">)</a> <a id="5279" class="Symbol">=</a>
  <a id="5283" href="Monoids.html#3358" class="Field">Semigroup.has-is-semigroup</a> <a id="5310" href="Monoids.html#3766" class="Function">∨-semigroup</a>
<a id="5322" href="Monoids.html#4539" class="Field">is-monoid.identityˡ</a> <a id="5342" class="Symbol">(</a><a id="5343" href="Monoids.html#4697" class="Field">Monoid.has-is-monoid</a> <a id="5364" href="Monoids.html#5145" class="Function">∨-monoid</a><a id="5372" class="Symbol">)</a> <a id="5374" class="Symbol">=</a> <a id="5376" href="Data.Bool.Properties.html#5515" class="Function">∨-identityˡ</a>
<a id="5388" href="Monoids.html#4571" class="Field">is-monoid.identityʳ</a> <a id="5408" class="Symbol">(</a><a id="5409" href="Monoids.html#4697" class="Field">Monoid.has-is-monoid</a> <a id="5430" href="Monoids.html#5145" class="Function">∨-monoid</a><a id="5438" class="Symbol">)</a> <a id="5440" class="Symbol">=</a> <a id="5442" href="Data.Bool.Properties.html#5574" class="Function">∨-identityʳ</a>
</pre>
<p>I’m using proofs such as <code>∨-identityʳ</code> from the <code>standard-library</code> to keep the length of
this post reasonable. Note that you can construct <code>records</code> in agda in two ways, which
are presented above. <code>∧-monoid</code> is defined using the <code>record</code> constructor syntax. <code>∨-monoid</code>
uses something called <code>copatterns</code>, which let’s us define the fields of a record as separate
declarations in a similar way that we would give different cases for a function.</p>
<p>At this point you might not be convinced on the usefulness of all this. Let me try to change
that by showcasing a bunch of commonly used monoids and operations that can be built up from those.</p>
<p>A very common pattern when coding in a functional style is <code>mapping</code> followed by <code>folding</code>.
This pattern is also known as <code>MapReduce</code> in the distributed computing community. Let’s see an example.</p>
<pre class="Agda"><a id="numbers"></a><a id="6298" href="Monoids.html#6298" class="Function">numbers</a> <a id="6306" class="Symbol">:</a> <a id="6308" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="6313" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
<a id="6315" href="Monoids.html#6298" class="Function">numbers</a> <a id="6323" class="Symbol">=</a> <a id="6325" class="Number">1</a> <a id="6327" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="6329" class="Number">2</a> <a id="6331" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="6333" class="Number">3</a> <a id="6335" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="6337" class="Number">4</a> <a id="6339" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="6341" class="Number">5</a> <a id="6343" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="6345" class="Number">6</a> <a id="6347" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="6349" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a>

<a id="all≤5?"></a><a id="6353" href="Monoids.html#6353" class="Function">all≤5?</a> <a id="6360" class="Symbol">:</a> <a id="6362" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="6367" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="6369" class="Symbol">→</a> <a id="6371" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
<a id="6376" href="Monoids.html#6353" class="Function">all≤5?</a> <a id="6383" class="Symbol">=</a> <a id="6385" href="Data.List.Base.html#4426" class="Function">foldl</a> <a id="6391" href="Data.Bool.Base.html#995" class="Function Operator">_∧_</a> <a id="6395" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a> <a id="6400" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="6402" href="Data.List.Base.html#1620" class="Function">map</a> <a id="6406" class="Symbol">(</a><a id="6407" href="Data.Nat.Base.html#1330" class="Function Operator">_≤ᵇ</a> <a id="6411" class="Number">5</a><a id="6412" class="Symbol">)</a>

<a id="any&gt;10?"></a><a id="6415" href="Monoids.html#6415" class="Function">any&gt;10?</a> <a id="6423" class="Symbol">:</a> <a id="6425" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="6430" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="6432" class="Symbol">→</a> <a id="6434" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
<a id="6439" href="Monoids.html#6415" class="Function">any&gt;10?</a> <a id="6447" class="Symbol">=</a> <a id="6449" href="Data.List.Base.html#4426" class="Function">foldl</a> <a id="6455" href="Data.Bool.Base.html#1053" class="Function Operator">_∨_</a> <a id="6459" href="Agda.Builtin.Bool.html#175" class="InductiveConstructor">false</a> <a id="6465" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="6467" href="Data.List.Base.html#1620" class="Function">map</a> <a id="6471" class="Symbol">(</a><a id="6472" class="Number">11</a> <a id="6475" href="Data.Nat.Base.html#1330" class="Function Operator">≤ᵇ_</a><a id="6478" class="Symbol">)</a>

<a id="6481" href="Monoids.html#6481" class="Function">_</a> <a id="6483" class="Symbol">:</a> <a id="6485" href="Monoids.html#6353" class="Function">all≤5?</a> <a id="6492" href="Monoids.html#6298" class="Function">numbers</a> <a id="6500" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="6502" href="Agda.Builtin.Bool.html#175" class="InductiveConstructor">false</a>
<a id="6508" class="Symbol">_</a> <a id="6510" class="Symbol">=</a> <a id="6512" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>

<a id="6518" href="Monoids.html#6518" class="Function">_</a> <a id="6520" class="Symbol">:</a> <a id="6522" href="Monoids.html#6415" class="Function">any&gt;10?</a> <a id="6530" class="Symbol">(</a><a id="6531" class="Number">11</a> <a id="6534" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="6536" href="Monoids.html#6298" class="Function">numbers</a><a id="6543" class="Symbol">)</a> <a id="6545" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="6547" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a>
<a id="6552" class="Symbol">_</a> <a id="6554" class="Symbol">=</a> <a id="6556" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre>
<p>We can easily generalize this notion of <code>mapping</code> and then <code>folding</code> by a clever use
of the structure provided by a <code>monoid</code>.</p>
<pre class="Agda"><a id="foldMapList"></a><a id="6701" href="Monoids.html#6701" class="Function">foldMapList</a> <a id="6713" class="Symbol">:</a> <a id="6715" class="Symbol">⦃</a> <a id="6717" href="Monoids.html#4607" class="Record">Monoid</a> <a id="6724" href="Monoids.html#2501" class="Generalizable">B</a> <a id="6726" class="Symbol">⦄</a> <a id="6728" class="Symbol">→</a> <a id="6730" class="Symbol">(</a><a id="6731" href="Monoids.html#2489" class="Generalizable">A</a> <a id="6733" class="Symbol">→</a> <a id="6735" href="Monoids.html#2501" class="Generalizable">B</a><a id="6736" class="Symbol">)</a> <a id="6738" class="Symbol">→</a> <a id="6740" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="6745" href="Monoids.html#2489" class="Generalizable">A</a> <a id="6747" class="Symbol">→</a> <a id="6749" href="Monoids.html#2501" class="Generalizable">B</a>
<a id="6751" href="Monoids.html#6701" class="Function">foldMapList</a> <a id="6763" class="Symbol">⦃</a> <a id="6765" href="Monoids.html#6765" class="Bound">mon</a> <a id="6769" class="Symbol">⦄</a> <a id="6771" href="Monoids.html#6771" class="Bound">f</a> <a id="6773" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="6776" class="Symbol">=</a> <a id="6778" href="Monoids.html#4667" class="Function">ε</a>
  <a id="6782" class="Keyword">where</a> <a id="6788" class="Keyword">open</a> <a id="6793" href="Monoids.html#4607" class="Module">Monoid</a> <a id="6800" href="Monoids.html#6765" class="Bound">mon</a>
<a id="6804" href="Monoids.html#6701" class="Function">foldMapList</a> <a id="6816" class="Symbol">⦃</a> <a id="6818" href="Monoids.html#6818" class="Bound">mon</a> <a id="6822" class="Symbol">⦄</a> <a id="6824" href="Monoids.html#6824" class="Bound">f</a> <a id="6826" class="Symbol">(</a><a id="6827" href="Monoids.html#6827" class="Bound">x</a> <a id="6829" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="6831" href="Monoids.html#6831" class="Bound">xs</a><a id="6833" class="Symbol">)</a> <a id="6835" class="Symbol">=</a> <a id="6837" href="Monoids.html#6824" class="Bound">f</a> <a id="6839" href="Monoids.html#6827" class="Bound">x</a> <a id="6841" href="Monoids.html#4677" class="Function Operator">★</a> <a id="6843" href="Monoids.html#6701" class="Function">foldMapList</a> <a id="6855" href="Monoids.html#6824" class="Bound">f</a> <a id="6857" href="Monoids.html#6831" class="Bound">xs</a>
  <a id="6862" class="Keyword">where</a> <a id="6868" class="Keyword">open</a> <a id="6873" href="Monoids.html#4607" class="Module">Monoid</a> <a id="6880" href="Monoids.html#6818" class="Bound">mon</a>

<a id="6885" class="Keyword">module</a> <a id="6892" href="Monoids.html#6892" class="Module">_</a> <a id="6894" class="Keyword">where</a>
  <a id="6902" class="Keyword">instance</a> <a id="6911" href="Monoids.html#6911" class="Function">_</a> <a id="6913" class="Symbol">=</a> <a id="6915" href="Monoids.html#4826" class="Function">∧-monoid</a>

  <a id="6927" href="Monoids.html#6927" class="Function">all?</a> <a id="6932" class="Symbol">:</a> <a id="6934" class="Symbol">(</a><a id="6935" href="Monoids.html#2489" class="Generalizable">A</a> <a id="6937" class="Symbol">→</a> <a id="6939" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a><a id="6943" class="Symbol">)</a> <a id="6945" class="Symbol">→</a> <a id="6947" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="6952" href="Monoids.html#2489" class="Generalizable">A</a> <a id="6954" class="Symbol">→</a> <a id="6956" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
  <a id="6963" href="Monoids.html#6927" class="Function">all?</a> <a id="6968" class="Symbol">=</a> <a id="6970" href="Monoids.html#6701" class="Function">foldMapList</a>

<a id="6983" class="Keyword">module</a> <a id="6990" href="Monoids.html#6990" class="Module">_</a> <a id="6992" class="Keyword">where</a>
  <a id="7000" class="Keyword">instance</a> <a id="7009" href="Monoids.html#7009" class="Function">_</a> <a id="7011" class="Symbol">=</a> <a id="7013" href="Monoids.html#5145" class="Function">∨-monoid</a>

  <a id="7025" href="Monoids.html#7025" class="Function">any?</a> <a id="7030" class="Symbol">:</a> <a id="7032" class="Symbol">(</a><a id="7033" href="Monoids.html#2489" class="Generalizable">A</a> <a id="7035" class="Symbol">→</a> <a id="7037" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a><a id="7041" class="Symbol">)</a> <a id="7043" class="Symbol">→</a> <a id="7045" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="7050" href="Monoids.html#2489" class="Generalizable">A</a> <a id="7052" class="Symbol">→</a> <a id="7054" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
  <a id="7061" href="Monoids.html#7025" class="Function">any?</a> <a id="7066" class="Symbol">=</a> <a id="7068" href="Monoids.html#6701" class="Function">foldMapList</a>

<a id="7081" href="Monoids.html#7081" class="Function">_</a> <a id="7083" class="Symbol">:</a> <a id="7085" href="Monoids.html#6927" class="Function">all?</a> <a id="7090" class="Symbol">(</a><a id="7091" href="Data.Nat.Base.html#1330" class="Function Operator">_≤ᵇ</a> <a id="7095" class="Number">5</a><a id="7096" class="Symbol">)</a> <a id="7098" href="Monoids.html#6298" class="Function">numbers</a> <a id="7106" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="7108" href="Agda.Builtin.Bool.html#175" class="InductiveConstructor">false</a>
<a id="7114" class="Symbol">_</a> <a id="7116" class="Symbol">=</a> <a id="7118" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>

<a id="7124" href="Monoids.html#7124" class="Function">_</a> <a id="7126" class="Symbol">:</a> <a id="7128" href="Monoids.html#7025" class="Function">any?</a> <a id="7133" class="Symbol">(</a><a id="7134" class="Number">11</a> <a id="7137" href="Data.Nat.Base.html#1330" class="Function Operator">≤ᵇ_</a><a id="7140" class="Symbol">)</a> <a id="7142" class="Symbol">(</a><a id="7143" class="Number">11</a> <a id="7146" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7148" href="Monoids.html#6298" class="Function">numbers</a><a id="7155" class="Symbol">)</a> <a id="7157" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="7159" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a>
<a id="7164" class="Symbol">_</a> <a id="7166" class="Symbol">=</a> <a id="7168" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre>
<p>Pretty neat? I think so! We can do a bunch of other cool things too, we can for example
flatten nested lists.</p>
<pre class="Agda"><a id="[]-semigroup"></a><a id="7297" href="Monoids.html#7297" class="Function">[]-semigroup</a> <a id="7310" class="Symbol">:</a> <a id="7312" href="Monoids.html#3275" class="Record">Semigroup</a> <a id="7322" class="Symbol">(</a><a id="7323" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="7328" href="Monoids.html#2489" class="Generalizable">A</a><a id="7329" class="Symbol">)</a>
<a id="7331" href="Monoids.html#3338" class="Field Operator">Semigroup._★_</a> <a id="7345" href="Monoids.html#7297" class="Function">[]-semigroup</a> <a id="7358" class="Symbol">=</a> <a id="7360" href="Data.List.Base.html#1943" class="Function Operator">_++_</a>
<a id="7365" href="Monoids.html#3223" class="Field">is-semigroup.assoc</a> <a id="7384" class="Symbol">(</a><a id="7385" href="Monoids.html#3358" class="Field">Semigroup.has-is-semigroup</a> <a id="7412" href="Monoids.html#7297" class="Function">[]-semigroup</a><a id="7424" class="Symbol">)</a> <a id="7426" class="Symbol">=</a> <a id="7428" href="Data.List.Properties.html#5580" class="Function">++-assoc</a>

<a id="[]-monoid"></a><a id="7438" href="Monoids.html#7438" class="Function">[]-monoid</a> <a id="7448" class="Symbol">:</a> <a id="7450" href="Monoids.html#4607" class="Record">Monoid</a> <a id="7457" class="Symbol">(</a><a id="7458" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="7463" href="Monoids.html#2489" class="Generalizable">A</a><a id="7464" class="Symbol">)</a>
<a id="7466" href="Monoids.html#4667" class="Field">Monoid.ε</a> <a id="7475" href="Monoids.html#7438" class="Function">[]-monoid</a> <a id="7485" class="Symbol">=</a> <a id="7487" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a>
<a id="7490" href="Monoids.html#4677" class="Field Operator">Monoid._★_</a> <a id="7501" href="Monoids.html#7438" class="Function">[]-monoid</a> <a id="7511" class="Symbol">=</a> <a id="7513" href="Data.List.Base.html#1943" class="Function Operator">_++_</a>
<a id="7518" href="Monoids.html#4445" class="Field">is-monoid.has-is-semigroup</a> <a id="7545" class="Symbol">(</a><a id="7546" href="Monoids.html#4697" class="Field">Monoid.has-is-monoid</a> <a id="7567" href="Monoids.html#7438" class="Function">[]-monoid</a><a id="7576" class="Symbol">)</a> <a id="7578" class="Symbol">=</a>
  <a id="7582" href="Monoids.html#3358" class="Field">Semigroup.has-is-semigroup</a> <a id="7609" href="Monoids.html#7297" class="Function">[]-semigroup</a>
<a id="7622" href="Monoids.html#4539" class="Field">is-monoid.identityˡ</a> <a id="7642" class="Symbol">(</a><a id="7643" href="Monoids.html#4697" class="Field">Monoid.has-is-monoid</a> <a id="7664" href="Monoids.html#7438" class="Function">[]-monoid</a><a id="7673" class="Symbol">)</a> <a id="7675" class="Symbol">=</a> <a id="7677" href="Data.List.Properties.html#5704" class="Function">++-identityˡ</a>
<a id="7690" href="Monoids.html#4571" class="Field">is-monoid.identityʳ</a> <a id="7710" class="Symbol">(</a><a id="7711" href="Monoids.html#4697" class="Field">Monoid.has-is-monoid</a> <a id="7732" href="Monoids.html#7438" class="Function">[]-monoid</a><a id="7741" class="Symbol">)</a> <a id="7743" class="Symbol">=</a> <a id="7745" href="Data.List.Properties.html#5768" class="Function">++-identityʳ</a>

<a id="7759" class="Keyword">module</a> <a id="7766" href="Monoids.html#7766" class="Module">_</a> <a id="7768" class="Keyword">where</a>
  <a id="7776" class="Keyword">instance</a> <a id="7785" href="Monoids.html#7785" class="Function">_</a> <a id="7787" class="Symbol">=</a> <a id="7789" href="Monoids.html#7438" class="Function">[]-monoid</a>

  <a id="7802" href="Monoids.html#7802" class="Function">flatten</a> <a id="7810" class="Symbol">:</a> <a id="7812" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="7817" class="Symbol">(</a><a id="7818" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="7823" href="Monoids.html#2489" class="Generalizable">A</a><a id="7824" class="Symbol">)</a> <a id="7826" class="Symbol">→</a> <a id="7828" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="7833" href="Monoids.html#2489" class="Generalizable">A</a>
  <a id="7837" href="Monoids.html#7802" class="Function">flatten</a> <a id="7845" class="Symbol">=</a> <a id="7847" href="Monoids.html#6701" class="Function">foldMapList</a> <a id="7859" href="Function.Base.html#704" class="Function">id</a>

<a id="7863" href="Monoids.html#7863" class="Function">_</a> <a id="7865" class="Symbol">:</a> <a id="7867" href="Monoids.html#7802" class="Function">flatten</a> <a id="7875" class="Symbol">((</a><a id="7877" class="Number">1</a> <a id="7879" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7881" class="Number">2</a> <a id="7883" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7885" class="InductiveConstructor">[]</a><a id="7887" class="Symbol">)</a> <a id="7889" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7891" class="Symbol">(</a><a id="7892" class="Number">3</a> <a id="7894" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7896" class="Number">4</a> <a id="7898" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7900" class="InductiveConstructor">[]</a><a id="7902" class="Symbol">)</a> <a id="7904" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7906" class="InductiveConstructor">[]</a><a id="7908" class="Symbol">)</a> <a id="7910" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="7912" class="Number">1</a> <a id="7914" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7916" class="Number">2</a> <a id="7918" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7920" class="Number">3</a> <a id="7922" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7924" class="Number">4</a> <a id="7926" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7928" class="InductiveConstructor">[]</a>
<a id="7931" class="Symbol">_</a> <a id="7933" class="Symbol">=</a> <a id="7935" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre>
<p>Or take sums and products. Excuse the mostly boring <code>semigroup</code> and <code>monoid</code> instance declarations.</p>
<pre class="Agda"><a id="+-semi"></a><a id="8054" href="Monoids.html#8054" class="Function">+-semi</a> <a id="8061" class="Symbol">:</a> <a id="8063" href="Monoids.html#3275" class="Record">Semigroup</a> <a id="8073" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
<a id="8075" href="Monoids.html#3338" class="Field Operator">Semigroup._★_</a> <a id="8089" href="Monoids.html#8054" class="Function">+-semi</a> <a id="8096" class="Symbol">=</a> <a id="8098" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">_+_</a>
<a id="8102" href="Monoids.html#3223" class="Field">is-semigroup.assoc</a> <a id="8121" class="Symbol">(</a><a id="8122" href="Monoids.html#3358" class="Field">Semigroup.has-is-semigroup</a> <a id="8149" href="Monoids.html#8054" class="Function">+-semi</a><a id="8155" class="Symbol">)</a> <a id="8157" class="Symbol">=</a> <a id="8159" href="Data.Nat.Properties.html#14455" class="Function">+-assoc</a>

<a id="+-0"></a><a id="8168" href="Monoids.html#8168" class="Function">+-0</a> <a id="8172" class="Symbol">:</a> <a id="8174" href="Monoids.html#4607" class="Record">Monoid</a> <a id="8181" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
<a id="8183" href="Monoids.html#4667" class="Field">Monoid.ε</a> <a id="8192" href="Monoids.html#8168" class="Function">+-0</a> <a id="8196" class="Symbol">=</a> <a id="8198" class="Number">0</a>
<a id="8200" href="Monoids.html#4677" class="Field Operator">Monoid._★_</a> <a id="8211" href="Monoids.html#8168" class="Function">+-0</a> <a id="8215" class="Symbol">=</a> <a id="8217" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">_+_</a>
<a id="8221" href="Monoids.html#4445" class="Field">is-monoid.has-is-semigroup</a> <a id="8248" class="Symbol">(</a><a id="8249" href="Monoids.html#4697" class="Field">Monoid.has-is-monoid</a> <a id="8270" href="Monoids.html#8168" class="Function">+-0</a><a id="8273" class="Symbol">)</a> <a id="8275" class="Symbol">=</a> <a id="8277" href="Monoids.html#3358" class="Field">Semigroup.has-is-semigroup</a> <a id="8304" href="Monoids.html#8054" class="Function">+-semi</a>
<a id="8311" href="Monoids.html#4539" class="Field">is-monoid.identityˡ</a> <a id="8331" class="Symbol">(</a><a id="8332" href="Monoids.html#4697" class="Field">Monoid.has-is-monoid</a> <a id="8353" href="Monoids.html#8168" class="Function">+-0</a><a id="8356" class="Symbol">)</a> <a id="8358" class="Symbol">=</a> <a id="8360" href="Data.Nat.Properties.html#14556" class="Function">+-identityˡ</a>
<a id="8372" href="Monoids.html#4571" class="Field">is-monoid.identityʳ</a> <a id="8392" class="Symbol">(</a><a id="8393" href="Monoids.html#4697" class="Field">Monoid.has-is-monoid</a> <a id="8414" href="Monoids.html#8168" class="Function">+-0</a><a id="8417" class="Symbol">)</a> <a id="8419" class="Symbol">=</a> <a id="8421" href="Data.Nat.Properties.html#14611" class="Function">+-identityʳ</a>

<a id="*-semi"></a><a id="8434" href="Monoids.html#8434" class="Function">*-semi</a> <a id="8441" class="Symbol">:</a> <a id="8443" href="Monoids.html#3275" class="Record">Semigroup</a> <a id="8453" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
<a id="8455" href="Monoids.html#3338" class="Field Operator">Semigroup._★_</a> <a id="8469" href="Monoids.html#8434" class="Function">*-semi</a> <a id="8476" class="Symbol">=</a> <a id="8478" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">_*_</a>
<a id="8482" href="Monoids.html#3223" class="Field">is-semigroup.assoc</a> <a id="8501" class="Symbol">(</a><a id="8502" href="Monoids.html#3358" class="Field">Semigroup.has-is-semigroup</a> <a id="8529" href="Monoids.html#8434" class="Function">*-semi</a><a id="8535" class="Symbol">)</a> <a id="8537" class="Symbol">=</a> <a id="8539" href="Data.Nat.Properties.html#22029" class="Function">*-assoc</a>

<a id="*-1"></a><a id="8548" href="Monoids.html#8548" class="Function">*-1</a> <a id="8552" class="Symbol">:</a> <a id="8554" href="Monoids.html#4607" class="Record">Monoid</a> <a id="8561" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
<a id="8563" href="Monoids.html#4667" class="Field">Monoid.ε</a> <a id="8572" href="Monoids.html#8548" class="Function">*-1</a> <a id="8576" class="Symbol">=</a> <a id="8578" class="Number">1</a>
<a id="8580" href="Monoids.html#4677" class="Field Operator">Monoid._★_</a> <a id="8591" href="Monoids.html#8548" class="Function">*-1</a> <a id="8595" class="Symbol">=</a> <a id="8597" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">_*_</a>
<a id="8601" href="Monoids.html#4445" class="Field">is-monoid.has-is-semigroup</a> <a id="8628" class="Symbol">(</a><a id="8629" href="Monoids.html#4697" class="Field">Monoid.has-is-monoid</a> <a id="8650" href="Monoids.html#8548" class="Function">*-1</a><a id="8653" class="Symbol">)</a> <a id="8655" class="Symbol">=</a> <a id="8657" href="Monoids.html#3358" class="Field">Semigroup.has-is-semigroup</a> <a id="8684" href="Monoids.html#8434" class="Function">*-semi</a>
<a id="8691" href="Monoids.html#4539" class="Field">is-monoid.identityˡ</a> <a id="8711" class="Symbol">(</a><a id="8712" href="Monoids.html#4697" class="Field">Monoid.has-is-monoid</a> <a id="8733" href="Monoids.html#8548" class="Function">*-1</a><a id="8736" class="Symbol">)</a> <a id="8738" class="Symbol">=</a> <a id="8740" href="Data.Nat.Properties.html#20929" class="Function">*-identityˡ</a>
<a id="8752" href="Monoids.html#4571" class="Field">is-monoid.identityʳ</a> <a id="8772" class="Symbol">(</a><a id="8773" href="Monoids.html#4697" class="Field">Monoid.has-is-monoid</a> <a id="8794" href="Monoids.html#8548" class="Function">*-1</a><a id="8797" class="Symbol">)</a> <a id="8799" class="Symbol">=</a> <a id="8801" href="Data.Nat.Properties.html#20993" class="Function">*-identityʳ</a>

<a id="8814" class="Keyword">module</a> <a id="8821" href="Monoids.html#8821" class="Module">_</a> <a id="8823" class="Keyword">where</a>
  <a id="8831" class="Keyword">instance</a> <a id="8840" href="Monoids.html#8840" class="Function">_</a> <a id="8842" class="Symbol">=</a> <a id="8844" href="Monoids.html#8168" class="Function">+-0</a>

  <a id="8851" href="Monoids.html#8851" class="Function">sum</a> <a id="8855" class="Symbol">:</a> <a id="8857" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="8862" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="8864" class="Symbol">→</a> <a id="8866" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
  <a id="8870" href="Monoids.html#8851" class="Function">sum</a> <a id="8874" class="Symbol">=</a> <a id="8876" href="Monoids.html#6701" class="Function">foldMapList</a> <a id="8888" href="Function.Base.html#704" class="Function">id</a>

<a id="8892" href="Monoids.html#8892" class="Function">_</a> <a id="8894" class="Symbol">:</a> <a id="8896" href="Monoids.html#8851" class="Function">sum</a> <a id="8900" href="Monoids.html#6298" class="Function">numbers</a> <a id="8908" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="8910" class="Number">21</a>
<a id="8913" class="Symbol">_</a> <a id="8915" class="Symbol">=</a> <a id="8917" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>

<a id="8923" class="Keyword">module</a> <a id="8930" href="Monoids.html#8930" class="Module">_</a> <a id="8932" class="Keyword">where</a>
  <a id="8940" class="Keyword">instance</a> <a id="8949" href="Monoids.html#8949" class="Function">_</a> <a id="8951" class="Symbol">=</a> <a id="8953" href="Monoids.html#8548" class="Function">*-1</a>

  <a id="8960" href="Monoids.html#8960" class="Function">product</a> <a id="8968" class="Symbol">=</a> <a id="8970" href="Monoids.html#6701" class="Function">foldMapList</a> <a id="8982" href="Function.Base.html#704" class="Function">id</a>

<a id="8986" href="Monoids.html#8986" class="Function">_</a> <a id="8988" class="Symbol">:</a> <a id="8990" href="Monoids.html#8960" class="Function">product</a> <a id="8998" href="Monoids.html#6298" class="Function">numbers</a> <a id="9006" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="9008" class="Number">720</a>
<a id="9012" class="Symbol">_</a> <a id="9014" class="Symbol">=</a> <a id="9016" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre>
<p>An interesting <code>monoid</code> is the <code>dual</code> of some other <code>monoid</code>.</p>
<pre class="Agda"><a id="9097" class="Keyword">module</a> <a id="9104" href="Monoids.html#9104" class="Module">_</a> <a id="9106" class="Symbol">(</a><a id="9107" href="Monoids.html#9107" class="Bound">mon</a> <a id="9111" class="Symbol">:</a> <a id="9113" href="Monoids.html#4607" class="Record">Monoid</a> <a id="9120" href="Monoids.html#2489" class="Generalizable">A</a><a id="9121" class="Symbol">)</a> <a id="9123" class="Keyword">where</a>
  <a id="9131" class="Keyword">open</a> <a id="9136" href="Monoids.html#4607" class="Module">Monoid</a> <a id="9143" href="Monoids.html#9107" class="Bound">mon</a>

  <a id="9150" href="Monoids.html#9150" class="Function">dual</a> <a id="9155" class="Symbol">:</a> <a id="9157" href="Monoids.html#4607" class="Record">Monoid</a> <a id="9164" href="Monoids.html#9120" class="Bound">A</a>
  <a id="9168" href="Monoids.html#4667" class="Field">Monoid.ε</a> <a id="9177" href="Monoids.html#9150" class="Function">dual</a> <a id="9182" class="Symbol">=</a> <a id="9184" href="Monoids.html#4667" class="Field">ε</a>
  <a id="9188" href="Monoids.html#4677" class="Field Operator">Monoid._★_</a> <a id="9199" href="Monoids.html#9150" class="Function">dual</a> <a id="9204" class="Symbol">=</a> <a id="9206" href="Function.Base.html#1638" class="Function">flip</a> <a id="9211" href="Monoids.html#4677" class="Field Operator">_★_</a>
  <a id="9217" href="Monoids.html#3223" class="Field">is-semigroup.assoc</a> <a id="9236" class="Symbol">(</a><a id="9237" href="Monoids.html#4445" class="Field">is-monoid.has-is-semigroup</a> <a id="9264" class="Symbol">(</a><a id="9265" href="Monoids.html#4697" class="Field">Monoid.has-is-monoid</a> <a id="9286" href="Monoids.html#9150" class="Function">dual</a><a id="9290" class="Symbol">))</a>
    <a id="9297" href="Monoids.html#9297" class="Bound">x</a> <a id="9299" href="Monoids.html#9299" class="Bound">y</a> <a id="9301" href="Monoids.html#9301" class="Bound">z</a> <a id="9303" class="Symbol">=</a> <a id="9305" href="Relation.Binary.PropositionalEquality.Core.html#1712" class="Function">sym</a> <a id="9309" class="Symbol">(</a><a id="9310" href="Monoids.html#3223" class="Function">assoc</a> <a id="9316" href="Monoids.html#9301" class="Bound">z</a> <a id="9318" href="Monoids.html#9299" class="Bound">y</a> <a id="9320" href="Monoids.html#9297" class="Bound">x</a><a id="9321" class="Symbol">)</a>
  <a id="9325" href="Monoids.html#4539" class="Field">is-monoid.identityˡ</a> <a id="9345" class="Symbol">(</a><a id="9346" href="Monoids.html#4697" class="Field">Monoid.has-is-monoid</a> <a id="9367" href="Monoids.html#9150" class="Function">dual</a><a id="9371" class="Symbol">)</a> <a id="9373" class="Symbol">=</a> <a id="9375" href="Monoids.html#4571" class="Function">identityʳ</a>
  <a id="9387" href="Monoids.html#4571" class="Field">is-monoid.identityʳ</a> <a id="9407" class="Symbol">(</a><a id="9408" href="Monoids.html#4697" class="Field">Monoid.has-is-monoid</a> <a id="9429" href="Monoids.html#9150" class="Function">dual</a><a id="9433" class="Symbol">)</a> <a id="9435" class="Symbol">=</a> <a id="9437" href="Monoids.html#4539" class="Function">identityˡ</a>

<a id="reverse"></a><a id="9448" href="Monoids.html#9448" class="Function">reverse</a> <a id="9456" class="Symbol">:</a> <a id="9458" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="9463" href="Monoids.html#2489" class="Generalizable">A</a> <a id="9465" class="Symbol">→</a> <a id="9467" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="9472" href="Monoids.html#2489" class="Generalizable">A</a>
<a id="9474" href="Monoids.html#9448" class="Function">reverse</a> <a id="9482" class="Symbol">=</a> <a id="9484" href="Monoids.html#6701" class="Function">foldMapList</a> <a id="9496" class="Symbol">⦃</a> <a id="9498" href="Monoids.html#9150" class="Function">dual</a> <a id="9503" class="Symbol">(</a><a id="9504" href="Monoids.html#7438" class="Function">[]-monoid</a><a id="9513" class="Symbol">)</a> <a id="9515" class="Symbol">⦄</a> <a id="9517" class="Symbol">(</a><a id="9518" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">_∷</a> <a id="9521" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a><a id="9523" class="Symbol">)</a>

<a id="9526" href="Monoids.html#9526" class="Function">_</a> <a id="9528" class="Symbol">:</a> <a id="9530" href="Monoids.html#9448" class="Function">reverse</a> <a id="9538" href="Monoids.html#6298" class="Function">numbers</a> <a id="9546" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="9548" class="Symbol">(</a><a id="9549" class="Number">6</a> <a id="9551" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="9553" class="Number">5</a> <a id="9555" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="9557" class="Number">4</a> <a id="9559" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="9561" class="Number">3</a> <a id="9563" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="9565" class="Number">2</a> <a id="9567" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="9569" class="Number">1</a> <a id="9571" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="9573" class="InductiveConstructor">[]</a><a id="9575" class="Symbol">)</a>
<a id="9577" class="Symbol">_</a> <a id="9579" class="Symbol">=</a> <a id="9581" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre>
<p>Another example of a <code>monoid</code> built of other <code>monoids</code> is the <em>cartetesian product</em> or <code>_×_</code>.</p>
<pre class="Agda"><a id="9694" class="Keyword">module</a> <a id="9701" href="Monoids.html#9701" class="Module">_</a> <a id="9703" class="Symbol">(</a><a id="9704" href="Monoids.html#9704" class="Bound">ma</a> <a id="9707" class="Symbol">:</a> <a id="9709" href="Monoids.html#4607" class="Record">Monoid</a> <a id="9716" href="Monoids.html#2489" class="Generalizable">A</a><a id="9717" class="Symbol">)</a> <a id="9719" class="Symbol">(</a><a id="9720" href="Monoids.html#9720" class="Bound">mb</a> <a id="9723" class="Symbol">:</a> <a id="9725" href="Monoids.html#4607" class="Record">Monoid</a> <a id="9732" href="Monoids.html#2501" class="Generalizable">B</a><a id="9733" class="Symbol">)</a> <a id="9735" class="Keyword">where</a>

  <a id="9744" class="Keyword">open</a> <a id="9749" href="Monoids.html#4607" class="Module">Monoid</a> <a id="9756" class="Symbol">⦃</a> <a id="9758" class="Symbol">...</a> <a id="9762" class="Symbol">⦄</a>

  <a id="9767" class="Keyword">instance</a>
    <a id="9780" href="Monoids.html#9780" class="Function">_</a> <a id="9782" class="Symbol">=</a> <a id="9784" href="Monoids.html#9704" class="Bound">ma</a>
    <a id="9791" href="Monoids.html#9791" class="Function">_</a> <a id="9793" class="Symbol">=</a> <a id="9795" href="Monoids.html#9720" class="Bound">mb</a>

  <a id="9801" href="Monoids.html#9801" class="Function">×-semigroup</a> <a id="9813" class="Symbol">:</a> <a id="9815" href="Monoids.html#3275" class="Record">Semigroup</a> <a id="9825" class="Symbol">(</a><a id="9826" href="Monoids.html#9716" class="Bound">A</a> <a id="9828" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="9830" href="Monoids.html#9732" class="Bound">B</a><a id="9831" class="Symbol">)</a>
  <a id="9835" class="Symbol">(</a><a id="9836" href="Monoids.html#9801" class="Function">×-semigroup</a> <a id="9848" href="Monoids.html#3338" class="Field Operator">Semigroup.★</a> <a id="9860" class="Symbol">(</a><a id="9861" href="Monoids.html#9861" class="Bound">a</a> <a id="9863" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="9865" href="Monoids.html#9865" class="Bound">b</a><a id="9866" class="Symbol">))</a> <a id="9869" class="Symbol">(</a><a id="9870" href="Monoids.html#9870" class="Bound">a₁</a> <a id="9873" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="9875" href="Monoids.html#9875" class="Bound">b₁</a><a id="9877" class="Symbol">)</a> <a id="9879" class="Symbol">=</a> <a id="9881" href="Monoids.html#9861" class="Bound">a</a> <a id="9883" href="Monoids.html#4677" class="Field Operator">★</a> <a id="9885" href="Monoids.html#9870" class="Bound">a₁</a> <a id="9888" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="9890" href="Monoids.html#9865" class="Bound">b</a> <a id="9892" href="Monoids.html#4677" class="Field Operator">★</a> <a id="9894" href="Monoids.html#9875" class="Bound">b₁</a>
  <a id="9899" href="Monoids.html#3223" class="Field">is-semigroup.assoc</a> <a id="9918" class="Symbol">(</a><a id="9919" href="Monoids.html#3358" class="Field">Semigroup.has-is-semigroup</a> <a id="9946" href="Monoids.html#9801" class="Function">×-semigroup</a><a id="9957" class="Symbol">)</a> 
    <a id="9964" class="Symbol">(</a><a id="9965" href="Monoids.html#9965" class="Bound">a₁</a> <a id="9968" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="9970" href="Monoids.html#9970" class="Bound">b₁</a><a id="9972" class="Symbol">)</a> <a id="9974" class="Symbol">(</a><a id="9975" href="Monoids.html#9975" class="Bound">a₂</a> <a id="9978" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="9980" href="Monoids.html#9980" class="Bound">b₂</a><a id="9982" class="Symbol">)</a> <a id="9984" class="Symbol">(</a><a id="9985" href="Monoids.html#9985" class="Bound">a₃</a> <a id="9988" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="9990" href="Monoids.html#9990" class="Bound">b₃</a><a id="9992" class="Symbol">)</a> <a id="9994" class="Keyword">rewrite</a> <a id="10002" href="Monoids.html#3223" class="Function">assoc</a> <a id="10008" href="Monoids.html#9965" class="Bound">a₁</a> <a id="10011" href="Monoids.html#9975" class="Bound">a₂</a> <a id="10014" href="Monoids.html#9985" class="Bound">a₃</a> <a id="10017" class="Keyword">rewrite</a> <a id="10025" href="Monoids.html#3223" class="Function">assoc</a> <a id="10031" href="Monoids.html#9970" class="Bound">b₁</a> <a id="10034" href="Monoids.html#9980" class="Bound">b₂</a> <a id="10037" href="Monoids.html#9990" class="Bound">b₃</a> <a id="10040" class="Symbol">=</a> <a id="10042" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>

  <a id="10050" href="Monoids.html#10050" class="Function">×-monoid</a> <a id="10059" class="Symbol">:</a> <a id="10061" href="Monoids.html#4607" class="Record">Monoid</a> <a id="10068" class="Symbol">(</a><a id="10069" href="Monoids.html#9716" class="Bound">A</a> <a id="10071" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="10073" href="Monoids.html#9732" class="Bound">B</a><a id="10074" class="Symbol">)</a>
  <a id="10078" href="Monoids.html#4667" class="Field">Monoid.ε</a> <a id="10087" href="Monoids.html#10050" class="Function">×-monoid</a> <a id="10096" class="Symbol">=</a> <a id="10098" href="Monoids.html#4667" class="Field">ε</a> <a id="10100" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="10102" href="Monoids.html#4667" class="Field">ε</a>
  <a id="10106" class="Symbol">(</a><a id="10107" href="Monoids.html#10050" class="Function">×-monoid</a> <a id="10116" href="Monoids.html#4677" class="Field Operator">Monoid.★</a> <a id="10125" class="Symbol">(</a><a id="10126" href="Monoids.html#10126" class="Bound">a</a> <a id="10128" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="10130" href="Monoids.html#10130" class="Bound">b</a><a id="10131" class="Symbol">))</a> <a id="10134" class="Symbol">(</a><a id="10135" href="Monoids.html#10135" class="Bound">a₁</a> <a id="10138" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="10140" href="Monoids.html#10140" class="Bound">b₁</a><a id="10142" class="Symbol">)</a> <a id="10144" class="Symbol">=</a> <a id="10146" href="Monoids.html#10126" class="Bound">a</a> <a id="10148" href="Monoids.html#4677" class="Field Operator">★</a> <a id="10150" href="Monoids.html#10135" class="Bound">a₁</a> <a id="10153" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="10155" href="Monoids.html#10130" class="Bound">b</a> <a id="10157" href="Monoids.html#4677" class="Field Operator">★</a> <a id="10159" href="Monoids.html#10140" class="Bound">b₁</a>
  <a id="10164" href="Monoids.html#4445" class="Field">is-monoid.has-is-semigroup</a> <a id="10191" class="Symbol">(</a><a id="10192" href="Monoids.html#4697" class="Field">Monoid.has-is-monoid</a> <a id="10213" href="Monoids.html#10050" class="Function">×-monoid</a><a id="10221" class="Symbol">)</a> <a id="10223" class="Symbol">=</a>
    <a id="10229" href="Monoids.html#3358" class="Field">Semigroup.has-is-semigroup</a> <a id="10256" href="Monoids.html#9801" class="Function">×-semigroup</a>
  <a id="10270" href="Monoids.html#4539" class="Field">is-monoid.identityˡ</a> <a id="10290" class="Symbol">(</a><a id="10291" href="Monoids.html#4697" class="Field">Monoid.has-is-monoid</a> <a id="10312" href="Monoids.html#10050" class="Function">×-monoid</a><a id="10320" class="Symbol">)</a> <a id="10322" class="Symbol">(</a><a id="10323" href="Monoids.html#10323" class="Bound">a</a> <a id="10325" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="10327" href="Monoids.html#10327" class="Bound">b</a><a id="10328" class="Symbol">)</a> 
    <a id="10335" class="Keyword">rewrite</a> <a id="10343" href="Monoids.html#4539" class="Function">identityˡ</a> <a id="10353" href="Monoids.html#10323" class="Bound">a</a> <a id="10355" class="Keyword">rewrite</a> <a id="10363" href="Monoids.html#4539" class="Function">identityˡ</a> <a id="10373" href="Monoids.html#10327" class="Bound">b</a> <a id="10375" class="Symbol">=</a> <a id="10377" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
  <a id="10384" href="Monoids.html#4571" class="Field">is-monoid.identityʳ</a> <a id="10404" class="Symbol">(</a><a id="10405" href="Monoids.html#4697" class="Field">Monoid.has-is-monoid</a> <a id="10426" href="Monoids.html#10050" class="Function">×-monoid</a><a id="10434" class="Symbol">)</a> <a id="10436" class="Symbol">(</a><a id="10437" href="Monoids.html#10437" class="Bound">a</a> <a id="10439" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="10441" href="Monoids.html#10441" class="Bound">b</a><a id="10442" class="Symbol">)</a>
    <a id="10448" class="Keyword">rewrite</a> <a id="10456" href="Monoids.html#4571" class="Function">identityʳ</a> <a id="10466" href="Monoids.html#10437" class="Bound">a</a> <a id="10468" class="Keyword">rewrite</a> <a id="10476" href="Monoids.html#4571" class="Function">identityʳ</a> <a id="10486" href="Monoids.html#10441" class="Bound">b</a> <a id="10488" class="Symbol">=</a> <a id="10490" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>

<a id="10496" class="Keyword">module</a> <a id="10503" href="Monoids.html#10503" class="Module">_</a> <a id="10505" class="Keyword">where</a>
  <a id="10513" class="Keyword">instance</a> <a id="10522" href="Monoids.html#10522" class="Function">_</a> <a id="10524" class="Symbol">=</a> <a id="10526" href="Monoids.html#10050" class="Function">×-monoid</a> <a id="10535" href="Monoids.html#8168" class="Function">+-0</a> <a id="10539" href="Monoids.html#8548" class="Function">*-1</a>

  <a id="10546" href="Monoids.html#10546" class="Function">sum×prod</a> <a id="10555" class="Symbol">:</a> <a id="10557" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="10562" class="Symbol">(</a><a id="10563" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="10565" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="10567" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a><a id="10568" class="Symbol">)</a> <a id="10570" class="Symbol">→</a> <a id="10572" class="Symbol">(</a><a id="10573" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="10575" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="10577" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a><a id="10578" class="Symbol">)</a>
  <a id="10582" href="Monoids.html#10546" class="Function">sum×prod</a> <a id="10591" class="Symbol">=</a> <a id="10593" href="Monoids.html#6701" class="Function">foldMapList</a> <a id="10605" href="Function.Base.html#704" class="Function">id</a>

<a id="10609" href="Monoids.html#10609" class="Function">_</a> <a id="10611" class="Symbol">:</a> <a id="10613" href="Monoids.html#10546" class="Function">sum×prod</a> <a id="10622" class="Symbol">(</a><a id="10623" href="Data.List.Base.html#3703" class="Function">zip</a> <a id="10627" href="Monoids.html#6298" class="Function">numbers</a> <a id="10635" href="Monoids.html#6298" class="Function">numbers</a><a id="10642" class="Symbol">)</a> <a id="10644" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="10646" class="Symbol">(</a><a id="10647" class="Number">21</a> <a id="10650" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="10652" class="Number">720</a><a id="10655" class="Symbol">)</a>
<a id="10657" class="Symbol">_</a> <a id="10659" class="Symbol">=</a> <a id="10661" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre>
<p>Up until now we have only worked on the <code>List</code> type. This is getting a bit boring and
redundant… On top of it being boring it might make you second guess the generality of
this approach. Can we only work on lists? As you might guess this is not the case!
We can define a more general structure <code>Foldable</code> and generalize this notion to arbitrary
data structures.</p>
<pre class="Agda"><a id="Foldable"></a><a id="11044" href="Monoids.html#11044" class="Function">Foldable</a> <a id="11053" class="Symbol">:</a> <a id="11055" class="Symbol">{</a><a id="11056" href="Monoids.html#11056" class="Bound">ℓ₁</a> <a id="11059" href="Monoids.html#11059" class="Bound">ℓ₂</a> <a id="11062" class="Symbol">:</a> <a id="11064" href="Agda.Primitive.html#591" class="Postulate">Level</a><a id="11069" class="Symbol">}</a> <a id="11071" class="Symbol">→</a> <a id="11073" class="Symbol">(</a><a id="11074" href="Monoids.html#11074" class="Bound">ℓᶠ</a> <a id="11077" class="Symbol">:</a> <a id="11079" href="Agda.Primitive.html#591" class="Postulate">Level</a><a id="11084" class="Symbol">)</a> <a id="11086" class="Symbol">→</a> <a id="11088" class="Symbol">(</a><a id="11089" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="11093" href="Monoids.html#11056" class="Bound">ℓ₁</a> <a id="11096" class="Symbol">→</a> <a id="11098" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="11102" href="Monoids.html#11074" class="Bound">ℓᶠ</a><a id="11104" class="Symbol">)</a> <a id="11106" class="Symbol">→</a> <a id="11108" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="11112" class="Symbol">(</a><a id="11113" href="Monoids.html#1478" class="Primitive">lsuc</a> <a id="11118" href="Monoids.html#11056" class="Bound">ℓ₁</a> <a id="11121" href="Agda.Primitive.html#804" class="Primitive Operator">⊔</a> <a id="11123" href="Monoids.html#1478" class="Primitive">lsuc</a> <a id="11128" href="Monoids.html#11059" class="Bound">ℓ₂</a> <a id="11131" href="Agda.Primitive.html#804" class="Primitive Operator">⊔</a> <a id="11133" href="Monoids.html#11074" class="Bound">ℓᶠ</a><a id="11135" class="Symbol">)</a>
<a id="11137" href="Monoids.html#11044" class="Function">Foldable</a> <a id="11146" class="Symbol">{</a><a id="11147" class="Argument">ℓ₂</a> <a id="11150" class="Symbol">=</a> <a id="11152" href="Monoids.html#11152" class="Bound">ℓ₂</a><a id="11154" class="Symbol">}</a> <a id="11156" class="Symbol">_</a> <a id="11158" href="Monoids.html#11158" class="Bound">F</a> <a id="11160" class="Symbol">=</a> <a id="11162" class="Symbol">∀</a> <a id="11164" class="Symbol">{</a><a id="11165" href="Monoids.html#11165" class="Bound">A</a><a id="11166" class="Symbol">}</a> <a id="11168" class="Symbol">{</a><a id="11169" href="Monoids.html#11169" class="Bound">B</a> <a id="11171" class="Symbol">:</a> <a id="11173" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="11177" href="Monoids.html#11152" class="Bound">ℓ₂</a><a id="11179" class="Symbol">}</a> <a id="11181" class="Symbol">→</a> <a id="11183" class="Symbol">⦃</a> <a id="11185" href="Monoids.html#4607" class="Record">Monoid</a> <a id="11192" href="Monoids.html#11169" class="Bound">B</a> <a id="11194" class="Symbol">⦄</a> <a id="11196" class="Symbol">→</a> <a id="11198" class="Symbol">(</a><a id="11199" href="Monoids.html#11165" class="Bound">A</a> <a id="11201" class="Symbol">→</a> <a id="11203" href="Monoids.html#11169" class="Bound">B</a><a id="11204" class="Symbol">)</a> <a id="11206" class="Symbol">→</a> <a id="11208" href="Monoids.html#11158" class="Bound">F</a> <a id="11210" href="Monoids.html#11165" class="Bound">A</a> <a id="11212" class="Symbol">→</a> <a id="11214" href="Monoids.html#11169" class="Bound">B</a>


<a id="foldableList"></a><a id="11218" href="Monoids.html#11218" class="Function">foldableList</a> <a id="11231" class="Symbol">:</a> <a id="11233" href="Monoids.html#11044" class="Function">Foldable</a> <a id="11242" class="Symbol">{</a><a id="11243" href="Monoids.html#2474" class="Generalizable">ℓ</a><a id="11244" class="Symbol">}</a> <a id="11246" class="Symbol">{</a><a id="11247" href="Monoids.html#2476" class="Generalizable">ℓ₂</a><a id="11249" class="Symbol">}</a> <a id="11251" class="Symbol">_</a> <a id="11253" href="Agda.Builtin.List.html#130" class="Datatype">List</a>
<a id="11258" href="Monoids.html#11218" class="Function">foldableList</a> <a id="11271" class="Symbol">=</a> <a id="11273" href="Monoids.html#6701" class="Function">foldMapList</a>

<a id="11286" class="Keyword">module</a> <a id="11293" href="Monoids.html#11293" class="Module">_</a> <a id="11295" class="Keyword">where</a>
  <a id="11303" class="Keyword">instance</a> <a id="11312" href="Monoids.html#11312" class="Function">_</a> <a id="11314" class="Symbol">=</a> <a id="11316" href="Monoids.html#8168" class="Function">+-0</a>

  <a id="11323" href="Monoids.html#11323" class="Function">length</a> <a id="11330" class="Symbol">:</a> <a id="11332" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="11337" href="Monoids.html#2489" class="Generalizable">A</a> <a id="11339" class="Symbol">→</a> <a id="11341" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
  <a id="11345" href="Monoids.html#11323" class="Function">length</a> <a id="11352" class="Symbol">=</a> <a id="11354" href="Monoids.html#11218" class="Function">foldableList</a> <a id="11367" class="Symbol">(</a><a id="11368" href="Function.Base.html#725" class="Function">const</a> <a id="11374" class="Number">1</a><a id="11375" class="Symbol">)</a>

<a id="11378" href="Monoids.html#11378" class="Function">_</a> <a id="11380" class="Symbol">:</a> <a id="11382" href="Monoids.html#11323" class="Function">length</a> <a id="11389" href="Monoids.html#6298" class="Function">numbers</a> <a id="11397" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="11399" class="Number">6</a>
<a id="11401" class="Symbol">_</a> <a id="11403" class="Symbol">=</a> <a id="11405" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre>
<h3 id="foldable-binary-trees"><a href="#foldable-binary-trees" class="anchor fas fa-xs fa-link"></a>Foldable binary trees</h3>
<p>I claimed that we can <code>foldMap</code> over other structures than <code>List</code>. Let’s define
a simple <em>binary tree</em> data structure and show that we can use the same machinery
on <em>binary trees</em> as we have been using on <em>lists</em>.</p>
<pre class="Agda"><a id="11665" class="Keyword">data</a> <a id="BT"></a><a id="11670" href="Monoids.html#11670" class="Datatype">BT</a> <a id="11673" class="Symbol">(</a><a id="11674" href="Monoids.html#11674" class="Bound">A</a> <a id="11676" class="Symbol">:</a> <a id="11678" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="11682" href="Monoids.html#2474" class="Generalizable">ℓ</a><a id="11683" class="Symbol">)</a> <a id="11685" class="Symbol">:</a> <a id="11687" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="11691" href="Monoids.html#11682" class="Bound">ℓ</a> <a id="11693" class="Keyword">where</a>
  <a id="BT.empty"></a><a id="11701" href="Monoids.html#11701" class="InductiveConstructor">empty</a> <a id="11707" class="Symbol">:</a> <a id="11709" href="Monoids.html#11670" class="Datatype">BT</a> <a id="11712" href="Monoids.html#11674" class="Bound">A</a>
  <a id="BT.branch"></a><a id="11716" href="Monoids.html#11716" class="InductiveConstructor">branch</a> <a id="11723" class="Symbol">:</a> <a id="11725" href="Monoids.html#11670" class="Datatype">BT</a> <a id="11728" href="Monoids.html#11674" class="Bound">A</a> <a id="11730" class="Symbol">→</a> <a id="11732" href="Monoids.html#11674" class="Bound">A</a> <a id="11734" class="Symbol">→</a> <a id="11736" href="Monoids.html#11670" class="Datatype">BT</a> <a id="11739" href="Monoids.html#11674" class="Bound">A</a> <a id="11741" class="Symbol">→</a> <a id="11743" href="Monoids.html#11670" class="Datatype">BT</a> <a id="11746" href="Monoids.html#11674" class="Bound">A</a>

<a id="11749" class="Keyword">pattern</a> <a id="leaf"></a><a id="11757" href="Monoids.html#11757" class="InductiveConstructor">leaf</a> <a id="11762" href="Monoids.html#11779" class="Bound">a</a> <a id="11764" class="Symbol">=</a> <a id="11766" href="Monoids.html#11716" class="InductiveConstructor">branch</a> <a id="11773" href="Monoids.html#11701" class="InductiveConstructor">empty</a> <a id="11779" href="Monoids.html#11779" class="Bound">a</a> <a id="11781" href="Monoids.html#11701" class="InductiveConstructor">empty</a>

<a id="foldableBT"></a><a id="11788" href="Monoids.html#11788" class="Function">foldableBT</a> <a id="11799" class="Symbol">:</a> <a id="11801" href="Monoids.html#11044" class="Function">Foldable</a> <a id="11810" class="Symbol">{</a><a id="11811" href="Level.html#521" class="Function">0ℓ</a><a id="11813" class="Symbol">}</a> <a id="11815" class="Symbol">{</a><a id="11816" href="Monoids.html#2474" class="Generalizable">ℓ</a><a id="11817" class="Symbol">}</a> <a id="11819" href="Level.html#521" class="Function">0ℓ</a> <a id="11822" href="Monoids.html#11670" class="Datatype">BT</a>
<a id="11825" href="Monoids.html#11788" class="Function">foldableBT</a> <a id="11836" class="Symbol">⦃</a> <a id="11838" href="Monoids.html#11838" class="Bound">mon</a> <a id="11842" class="Symbol">⦄</a> <a id="11844" href="Monoids.html#11844" class="Bound">f</a> <a id="11846" href="Monoids.html#11701" class="InductiveConstructor">empty</a> <a id="11852" class="Symbol">=</a> <a id="11854" href="Monoids.html#4667" class="Function">ε</a>
  <a id="11858" class="Keyword">where</a> <a id="11864" class="Keyword">open</a> <a id="11869" href="Monoids.html#4607" class="Module">Monoid</a> <a id="11876" href="Monoids.html#11838" class="Bound">mon</a>
<a id="11880" href="Monoids.html#11788" class="Function">foldableBT</a> <a id="11891" class="Symbol">⦃</a> <a id="11893" href="Monoids.html#11893" class="Bound">mon</a> <a id="11897" class="Symbol">⦄</a> <a id="11899" href="Monoids.html#11899" class="Bound">f</a> <a id="11901" class="Symbol">(</a><a id="11902" href="Monoids.html#11716" class="InductiveConstructor">branch</a> <a id="11909" href="Monoids.html#11909" class="Bound">l</a> <a id="11911" href="Monoids.html#11911" class="Bound">x</a> <a id="11913" href="Monoids.html#11913" class="Bound">r</a><a id="11914" class="Symbol">)</a> <a id="11916" class="Symbol">=</a>
  <a id="11920" href="Monoids.html#11788" class="Function">foldableBT</a> <a id="11931" href="Monoids.html#11899" class="Bound">f</a> <a id="11933" href="Monoids.html#11909" class="Bound">l</a> <a id="11935" href="Monoids.html#4677" class="Function Operator">★</a> <a id="11937" href="Monoids.html#11899" class="Bound">f</a> <a id="11939" href="Monoids.html#11911" class="Bound">x</a> <a id="11941" href="Monoids.html#4677" class="Function Operator">★</a> <a id="11943" href="Monoids.html#11788" class="Function">foldableBT</a> <a id="11954" href="Monoids.html#11899" class="Bound">f</a> <a id="11956" href="Monoids.html#11913" class="Bound">r</a>
  <a id="11960" class="Keyword">where</a> <a id="11966" class="Keyword">open</a> <a id="11971" href="Monoids.html#4607" class="Module">Monoid</a> <a id="11978" href="Monoids.html#11893" class="Bound">mon</a>

<a id="tree"></a><a id="11983" href="Monoids.html#11983" class="Function">tree</a> <a id="11988" class="Symbol">:</a> <a id="11990" href="Monoids.html#11670" class="Datatype">BT</a> <a id="11993" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
<a id="11995" href="Monoids.html#11983" class="Function">tree</a> <a id="12000" class="Symbol">=</a> <a id="12002" href="Monoids.html#11716" class="InductiveConstructor">branch</a> <a id="12009" class="Symbol">(</a><a id="12010" href="Monoids.html#11716" class="InductiveConstructor">branch</a> <a id="12017" class="Symbol">(</a><a id="12018" href="Monoids.html#11757" class="InductiveConstructor">leaf</a> <a id="12023" class="Number">20</a><a id="12025" class="Symbol">)</a> <a id="12027" class="Number">30</a> <a id="12030" class="Symbol">(</a><a id="12031" href="Monoids.html#11757" class="InductiveConstructor">leaf</a> <a id="12036" class="Number">40</a><a id="12038" class="Symbol">))</a> <a id="12041" class="Number">10</a> <a id="12044" class="Symbol">(</a><a id="12045" href="Monoids.html#11757" class="InductiveConstructor">leaf</a> <a id="12050" class="Number">50</a><a id="12052" class="Symbol">)</a>

<a id="12055" class="Keyword">module</a> <a id="12062" href="Monoids.html#12062" class="Module">_</a> <a id="12064" class="Keyword">where</a>
  <a id="12072" class="Keyword">instance</a> <a id="12081" href="Monoids.html#12081" class="Function">_</a> <a id="12083" class="Symbol">=</a> <a id="12085" href="Monoids.html#8168" class="Function">+-0</a>

  <a id="12092" href="Monoids.html#12092" class="Function">t-sum</a> <a id="12098" class="Symbol">:</a> <a id="12100" href="Monoids.html#11670" class="Datatype">BT</a> <a id="12103" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="12105" class="Symbol">→</a> <a id="12107" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
  <a id="12111" href="Monoids.html#12092" class="Function">t-sum</a> <a id="12117" class="Symbol">=</a> <a id="12119" href="Monoids.html#11788" class="Function">foldableBT</a> <a id="12130" href="Function.Base.html#704" class="Function">id</a>

  <a id="12136" href="Monoids.html#12136" class="Function">size</a> <a id="12141" class="Symbol">:</a> <a id="12143" href="Monoids.html#11670" class="Datatype">BT</a> <a id="12146" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="12148" class="Symbol">→</a> <a id="12150" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
  <a id="12154" href="Monoids.html#12136" class="Function">size</a> <a id="12159" class="Symbol">=</a> <a id="12161" href="Monoids.html#11788" class="Function">foldableBT</a> <a id="12172" class="Symbol">(</a><a id="12173" href="Function.Base.html#725" class="Function">const</a> <a id="12179" class="Number">1</a><a id="12180" class="Symbol">)</a>

<a id="12183" href="Monoids.html#12183" class="Function">_</a> <a id="12185" class="Symbol">:</a> <a id="12187" href="Monoids.html#12092" class="Function">t-sum</a> <a id="12193" href="Monoids.html#11983" class="Function">tree</a> <a id="12198" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="12200" class="Number">150</a>
<a id="12204" class="Symbol">_</a> <a id="12206" class="Symbol">=</a> <a id="12208" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>

<a id="12214" href="Monoids.html#12214" class="Function">_</a> <a id="12216" class="Symbol">:</a> <a id="12218" href="Monoids.html#12136" class="Function">size</a> <a id="12223" href="Monoids.html#11983" class="Function">tree</a> <a id="12228" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="12230" class="Number">5</a>
<a id="12232" class="Symbol">_</a> <a id="12234" class="Symbol">=</a> <a id="12236" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre>
<p>In fact at this point we have gained enough generality to turn any <code>Foldable</code> to a <code>List</code>!</p>
<pre class="Agda"><a id="toList"></a><a id="12346" href="Monoids.html#12346" class="Function">toList</a> <a id="12353" class="Symbol">:</a> <a id="12355" class="Symbol">∀</a> <a id="12357" class="Symbol">{</a><a id="12358" href="Monoids.html#12358" class="Bound">ℓ</a> <a id="12360" href="Monoids.html#12360" class="Bound">F</a><a id="12361" class="Symbol">}</a> <a id="12363" class="Symbol">→</a> <a id="12365" href="Monoids.html#11044" class="Function">Foldable</a> <a id="12374" href="Monoids.html#12358" class="Bound">ℓ</a> <a id="12376" href="Monoids.html#12360" class="Bound">F</a> <a id="12378" class="Symbol">→</a> <a id="12380" href="Monoids.html#12360" class="Bound">F</a> <a id="12382" href="Monoids.html#2489" class="Generalizable">A</a> <a id="12384" class="Symbol">→</a> <a id="12386" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="12391" href="Monoids.html#2489" class="Generalizable">A</a>
<a id="12393" href="Monoids.html#12346" class="Function">toList</a> <a id="12400" href="Monoids.html#12400" class="Bound">f</a> <a id="12402" class="Symbol">=</a> <a id="12404" href="Monoids.html#12400" class="Bound">f</a> <a id="12406" class="Symbol">⦃</a> <a id="12408" href="Monoids.html#7438" class="Function">[]-monoid</a> <a id="12418" class="Symbol">⦄</a> <a id="12420" class="Symbol">(</a><a id="12421" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">_∷</a> <a id="12424" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a><a id="12426" class="Symbol">)</a>

<a id="12429" href="Monoids.html#12429" class="Function">_</a> <a id="12431" class="Symbol">:</a> <a id="12433" href="Monoids.html#12346" class="Function">toList</a> <a id="12440" href="Monoids.html#11788" class="Function">foldableBT</a> <a id="12451" href="Monoids.html#11983" class="Function">tree</a> <a id="12456" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="12458" class="Number">20</a> <a id="12461" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="12463" class="Number">30</a> <a id="12466" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="12468" class="Number">40</a> <a id="12471" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="12473" class="Number">10</a> <a id="12476" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="12478" class="Number">50</a> <a id="12481" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="12483" class="InductiveConstructor">[]</a>
<a id="12486" class="Symbol">_</a> <a id="12488" class="Symbol">=</a> <a id="12490" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre>
<p>I hope this write up convined you that <code>monoid</code> is a useful part of any programmers
toolkit. There’s so much more to talk about <code>monoids</code>, but I think this is enough for now.</p>
<p>Thanks for reading and see you next time!</p></section>
  </article>
</main>

<hr />
<footer>
  <a href="/">back</a>
  <a href="/atom.xml">atom</a>
  <a href="/rss.xml">rss</a>
</footer>

    <script async src="./js/script.js"></script>
  </body>
</html>
