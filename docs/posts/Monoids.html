<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Monoids as a tool for writing composable and reusable programs</title>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="Verified definition of monoids in agda and exploration of some cool monoids." />
    
    <meta name="author" content="Joona Piirainen" />
     
    <meta name="keywords" content="agda, monoids, algebra, functional-programming, dependent-types" />
    

    <meta property="og:site_name" content="japiirainen" />
    <meta property="og:title" content="Monoids as a tool for writing composable and reusable programs" />
    <meta property="og:url" content="https://japiirainen.xyz/posts/Monoids.html" />
    <meta property="og:description" content="Verified definition of monoids in agda and exploration of some cool monoids." />
     
    <meta property="og:type" content="article" />
    

    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:site" content="japiirainen" />
    <meta property="twitter:title" content="Monoids as a tool for writing composable and reusable programs" />
    <meta property="twitter:description" content="Verified definition of monoids in agda and exploration of some cool monoids." />
     

    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="canonical" href="https://japiirainen.xyz/posts/Monoids.html" />
    <link rel="stylesheet" href="../css/default.css?2023-08-05" />
    <link rel="stylesheet" href="../css/agda.css?2023-08-05" />
    <link rel="stylesheet" href="../css/code.css?2023-08-05" />
    <script
      type="text/javascript"
      src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"
    ></script>
  </head>
  <body>
    <main>
  <article>
    <header>
      <h2>
        <a href="/">&#8592</a>
      </h2>
      <h1>
        <a href="/posts/Monoids.html">Monoids as a tool for writing composable and reusable programs</a>
      </h1>
      <div>
        <small>2023-08-05</small>
        
      </div>
    </header>
    <section><p>This time I’ll ramble about <code>monoids</code>! The reason I like <code>monoids</code> is that they are
relatively simple mathemically, but immensly useful in programming. Every programmer has
used a number of <code>monoid</code> structures thruought their careers either knowingly or not. The goal
of this post is to show that using ideas from mathematics can be useful and even <strong><em>practical</em></strong>.</p>
<p>I will use the <code>Agda</code> programming language / proof assistant to keep us honest. Mathematical
structures like <code>monoid</code> usually come equipped with a set of <em>properties</em> or <em>laws</em> that they
should obey, and the proof assistant capabilities of <code>Agda</code> let us precisely encode these <em>properties</em>.</p>
<p>This document is a typechecked literal <code>Agda</code> document. In fact all the definitions used in this module
are hyperlinks to their definitions. You can for example click the sumbol <code>Data.Nat.Properties</code> in the code block below to
see the <em>standard-library</em> module <code>Data.Nat.Properties</code>. It is common for an <code>Agda</code> module to begin with a bunch of module headers and imports,
this one is no exception :-).</p>
<pre class="Agda"><a id="1378" class="Symbol">{-#</a> <a id="1382" class="Keyword">OPTIONS</a> <a id="1390" class="Pragma">--safe</a> <a id="1397" class="Pragma">--guardedness</a> <a id="1411" class="Symbol">#-}</a>
<a id="1415" class="Keyword">module</a> <a id="1422" href="Monoids.html" class="Module">Monoids</a> <a id="1430" class="Keyword">where</a>

<a id="1437" class="Keyword">open</a> <a id="1442" class="Keyword">import</a> <a id="1449" href="Level.html" class="Module">Level</a> <a id="1455" class="Keyword">renaming</a> <a id="1464" class="Symbol">(</a><a id="1465" href="Agda.Primitive.html#774" class="Primitive">suc</a> <a id="1469" class="Symbol">to</a> <a id="1472" class="Primitive">lsuc</a><a id="1476" class="Symbol">)</a>
<a id="1478" class="Keyword">open</a> <a id="1483" class="Keyword">import</a> <a id="1490" href="Function.html" class="Module">Function</a> <a id="1499" class="Keyword">using</a> <a id="1505" class="Symbol">(</a><a id="1506" href="Function.Base.html#1115" class="Function Operator">_∘_</a><a id="1509" class="Symbol">;</a> <a id="1511" href="Function.Base.html#704" class="Function">id</a><a id="1513" class="Symbol">;</a> <a id="1515" href="Function.Base.html#1638" class="Function">flip</a><a id="1519" class="Symbol">;</a> <a id="1521" href="Function.Base.html#725" class="Function">const</a><a id="1526" class="Symbol">)</a>
<a id="1528" class="Keyword">open</a> <a id="1533" class="Keyword">import</a> <a id="1540" href="Data.Nat.html" class="Module">Data.Nat</a> <a id="1549" class="Keyword">using</a> <a id="1555" class="Symbol">(</a><a id="1556" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">_+_</a><a id="1559" class="Symbol">;</a> <a id="1561" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">_*_</a><a id="1564" class="Symbol">;</a> <a id="1566" href="Data.Nat.Base.html#1330" class="Function Operator">_≤ᵇ_</a><a id="1570" class="Symbol">;</a> <a id="1572" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a><a id="1573" class="Symbol">)</a>
<a id="1575" class="Keyword">open</a> <a id="1580" class="Keyword">import</a> <a id="1587" href="Data.Nat.Properties.html" class="Module">Data.Nat.Properties</a> <a id="1607" class="Keyword">using</a> <a id="1613" class="Symbol">(</a><a id="1614" href="Data.Nat.Properties.html#14455" class="Function">+-assoc</a><a id="1621" class="Symbol">;</a> <a id="1623" href="Data.Nat.Properties.html#14556" class="Function">+-identityˡ</a><a id="1634" class="Symbol">;</a> <a id="1636" href="Data.Nat.Properties.html#14611" class="Function">+-identityʳ</a><a id="1647" class="Symbol">;</a> <a id="1649" href="Data.Nat.Properties.html#22029" class="Function">*-assoc</a><a id="1656" class="Symbol">;</a> <a id="1658" href="Data.Nat.Properties.html#20929" class="Function">*-identityˡ</a><a id="1669" class="Symbol">;</a> <a id="1671" href="Data.Nat.Properties.html#20993" class="Function">*-identityʳ</a><a id="1682" class="Symbol">)</a>
<a id="1684" class="Keyword">open</a> <a id="1689" class="Keyword">import</a> <a id="1696" href="Data.Bool.html" class="Module">Data.Bool</a> <a id="1706" class="Keyword">using</a> <a id="1712" class="Symbol">(</a><a id="1713" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a><a id="1717" class="Symbol">;</a> <a id="1719" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a><a id="1723" class="Symbol">;</a> <a id="1725" href="Agda.Builtin.Bool.html#175" class="InductiveConstructor">false</a><a id="1730" class="Symbol">;</a> <a id="1732" href="Data.Bool.Base.html#995" class="Function Operator">_∧_</a><a id="1735" class="Symbol">;</a> <a id="1737" href="Data.Bool.Base.html#1053" class="Function Operator">_∨_</a><a id="1740" class="Symbol">)</a>
<a id="1742" class="Keyword">open</a> <a id="1747" class="Keyword">import</a> <a id="1754" href="Data.Bool.Properties.html" class="Module">Data.Bool.Properties</a> <a id="1775" class="Keyword">using</a> <a id="1781" class="Symbol">(</a><a id="1782" href="Data.Bool.Properties.html#8098" class="Function">∧-assoc</a><a id="1789" class="Symbol">;</a> <a id="1791" href="Data.Bool.Properties.html#5308" class="Function">∨-assoc</a><a id="1798" class="Symbol">;</a> <a id="1800" href="Data.Bool.Properties.html#8305" class="Function">∧-identityˡ</a><a id="1811" class="Symbol">;</a> <a id="1813" href="Data.Bool.Properties.html#8363" class="Function">∧-identityʳ</a><a id="1824" class="Symbol">;</a> <a id="1826" href="Data.Bool.Properties.html#5515" class="Function">∨-identityˡ</a><a id="1837" class="Symbol">;</a> <a id="1839" href="Data.Bool.Properties.html#5574" class="Function">∨-identityʳ</a><a id="1850" class="Symbol">)</a>
<a id="1852" class="Keyword">open</a> <a id="1857" class="Keyword">import</a> <a id="1864" href="Data.List.html" class="Module">Data.List</a> <a id="1874" class="Keyword">using</a> <a id="1880" class="Symbol">(</a><a id="1881" href="Agda.Builtin.List.html#130" class="Datatype">List</a><a id="1885" class="Symbol">;</a> <a id="1887" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">_∷_</a><a id="1890" class="Symbol">;</a> <a id="1892" href="Data.List.Base.html#7375" class="InductiveConstructor">[]</a><a id="1894" class="Symbol">;</a> <a id="1896" href="Data.List.Base.html#1620" class="Function">map</a><a id="1899" class="Symbol">;</a> <a id="1901" href="Data.List.Base.html#4426" class="Function">foldl</a><a id="1906" class="Symbol">;</a> <a id="1908" href="Data.List.Base.html#1943" class="Function Operator">_++_</a><a id="1912" class="Symbol">;</a> <a id="1914" href="Data.List.Base.html#3703" class="Function">zip</a><a id="1917" class="Symbol">)</a>
<a id="1919" class="Keyword">open</a> <a id="1924" class="Keyword">import</a> <a id="1931" href="Data.List.Properties.html" class="Module">Data.List.Properties</a> <a id="1952" class="Keyword">using</a> <a id="1958" class="Symbol">(</a><a id="1959" href="Data.List.Properties.html#5580" class="Function">++-assoc</a><a id="1967" class="Symbol">;</a> <a id="1969" href="Data.List.Properties.html#5704" class="Function">++-identityˡ</a><a id="1981" class="Symbol">;</a> <a id="1983" href="Data.List.Properties.html#5768" class="Function">++-identityʳ</a><a id="1995" class="Symbol">)</a>
<a id="1997" class="Keyword">open</a> <a id="2002" class="Keyword">import</a> <a id="2009" href="Data.Product.html" class="Module">Data.Product</a> <a id="2022" class="Keyword">using</a> <a id="2028" class="Symbol">(</a><a id="2029" href="Agda.Builtin.Sigma.html#148" class="Record">Σ</a><a id="2030" class="Symbol">;</a> <a id="2032" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="2037" class="Symbol">;</a> <a id="2039" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="2044" class="Symbol">;</a> <a id="2046" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">_,_</a><a id="2049" class="Symbol">;</a> <a id="2051" href="Data.Product.Base.html#1618" class="Function Operator">_×_</a><a id="2054" class="Symbol">)</a>
<a id="2056" class="Keyword">open</a> <a id="2061" class="Keyword">import</a> <a id="2068" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="2106" class="Keyword">using</a> <a id="2112" class="Symbol">(</a><a id="2113" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="2117" class="Symbol">;</a> <a id="2119" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">_≡_</a><a id="2122" class="Symbol">;</a> <a id="2124" href="Relation.Binary.PropositionalEquality.Core.html#1712" class="Function">sym</a><a id="2127" class="Symbol">)</a>
</pre>
<p>One neat feature of <code>Agda</code> is it’s <code>variable</code> blocks. They let you generalize over variables in types.
In practice a <code>variable</code> block let’s you omit a bunch of detail from definitions since you can directly
use the variables defined in the <code>variable</code> block. I think this will make since once you see it in action.</p>
<pre class="Agda"><a id="2457" class="Keyword">private</a> <a id="2465" class="Keyword">variable</a>
  <a id="2476" href="Monoids.html#2476" class="Generalizable">ℓ</a> <a id="2478" href="Monoids.html#2478" class="Generalizable">ℓ₂</a> <a id="2481" class="Symbol">:</a> <a id="2483" href="Agda.Primitive.html#591" class="Postulate">Level</a>
  <a id="2491" href="Monoids.html#2491" class="Generalizable">A</a> <a id="2493" class="Symbol">:</a> <a id="2495" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="2499" href="Monoids.html#2476" class="Generalizable">ℓ</a>
  <a id="2503" href="Monoids.html#2503" class="Generalizable">B</a> <a id="2505" class="Symbol">:</a> <a id="2507" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="2511" href="Monoids.html#2478" class="Generalizable">ℓ₂</a>
</pre>
<p>If we look at the definition of a <code>monoid</code>, we will find that a <code>monoid</code> is a
<code>semigroup</code> with an <em>identity element</em>. From this it is reasonable to conclude that
we should first define what is a <code>semigroup</code>. Luckily <code>semigroups</code> are a relatively simple
structure.</p>
<h3 id="semigroup-definition"><a href="#semigroup-definition" class="anchor fas fa-xs fa-link"></a>Semigroup definition</h3>
<p>A semigroup is a <em>set</em> <span class="math inline">\(S\)</span> together with a <em>binary operation</em> <span class="math inline">\(★\)</span> that satisfies the
<em>associative property</em>.</p>
<p><span class="math display">\[
∀ x y z ∈ S. (x ★ y) ★ z = x ★ (y ★ z)
\]</span></p>
<p>To gain some intuition we should try to think of some examples. It can be difficult to gain insight to these often
quite abstract mathematical ideas without concrete examples. That is why I think it’s a great idea to always try to
come up with some examples when you see one of these definitions. Some examples of <code>semigroups</code> from the top of my head
include the natural numbers with the addition (<span class="math inline">\(+\)</span>) operation, or (ℕ,+). Natural numbers with multiplication (<span class="math inline">\(*\)</span>) also
form a <code>semigroup</code>. You can veryfy in you head that the following equations hold.</p>
<p><span class="math display">\[
∀ x y z ∈ ℕ. (x + y) + z = x + (y + z)
\]</span>
<span class="math display">\[
∀ x y z ∈ ℕ. (x * y) * z = x * (y * z)
\]</span></p>
<p>Other examples include (String,++) where <code>++</code> is string concatenation, (List, ++) where <code>++</code> is list concatenation,
(Bool,∨) where <code>∨</code> means <em>or</em> and (Bool,∧) where <code>∧</code> means <em>and</em>.</p>
<p>Lets encode this in <code>agda</code>. The beautiful thing about <code>agda</code> is that the encoding is pretty much <em>1:1</em> to the math above.</p>
<pre class="Agda"><a id="level-of"></a><a id="3925" href="Monoids.html#3925" class="Function">level-of</a> <a id="3934" class="Symbol">:</a> <a id="3936" class="Symbol">{</a><a id="3937" href="Monoids.html#3937" class="Bound">ℓ</a> <a id="3939" class="Symbol">:</a> <a id="3941" href="Agda.Primitive.html#591" class="Postulate">Level</a><a id="3946" class="Symbol">}</a> <a id="3948" class="Symbol">→</a> <a id="3950" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="3954" href="Monoids.html#3937" class="Bound">ℓ</a> <a id="3956" class="Symbol">→</a> <a id="3958" href="Agda.Primitive.html#591" class="Postulate">Level</a>
<a id="3964" href="Monoids.html#3925" class="Function">level-of</a> <a id="3973" class="Symbol">{</a><a id="3974" href="Monoids.html#3974" class="Bound">ℓ</a><a id="3975" class="Symbol">}</a> <a id="3977" class="Symbol">_</a> <a id="3979" class="Symbol">=</a> <a id="3981" href="Monoids.html#3974" class="Bound">ℓ</a>

<a id="3984" class="Keyword">record</a> <a id="is-semigroup"></a><a id="3991" href="Monoids.html#3991" class="Record">is-semigroup</a> <a id="4004" class="Symbol">(</a><a id="4005" href="Monoids.html#4005" class="Bound Operator">_★_</a> <a id="4009" class="Symbol">:</a> <a id="4011" href="Monoids.html#2491" class="Generalizable">A</a> <a id="4013" class="Symbol">→</a> <a id="4015" href="Monoids.html#2491" class="Generalizable">A</a> <a id="4017" class="Symbol">→</a> <a id="4019" href="Monoids.html#2491" class="Generalizable">A</a><a id="4020" class="Symbol">)</a> <a id="4022" class="Symbol">:</a> <a id="4024" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="4028" class="Symbol">(</a><a id="4029" href="Monoids.html#3925" class="Function">level-of</a> <a id="4038" href="Monoids.html#4011" class="Bound">A</a><a id="4039" class="Symbol">)</a> <a id="4041" class="Keyword">where</a>
  <a id="4049" class="Keyword">field</a>
    <a id="is-semigroup.assoc"></a><a id="4059" href="Monoids.html#4059" class="Field">assoc</a> <a id="4065" class="Symbol">:</a> <a id="4067" class="Symbol">∀</a> <a id="4069" href="Monoids.html#4069" class="Bound">x</a> <a id="4071" href="Monoids.html#4071" class="Bound">y</a> <a id="4073" href="Monoids.html#4073" class="Bound">z</a> <a id="4075" class="Symbol">→</a> <a id="4077" class="Symbol">(</a><a id="4078" href="Monoids.html#4069" class="Bound">x</a> <a id="4080" href="Monoids.html#4005" class="Bound Operator">★</a> <a id="4082" href="Monoids.html#4071" class="Bound">y</a><a id="4083" class="Symbol">)</a> <a id="4085" href="Monoids.html#4005" class="Bound Operator">★</a> <a id="4087" href="Monoids.html#4073" class="Bound">z</a> <a id="4089" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="4091" href="Monoids.html#4069" class="Bound">x</a> <a id="4093" href="Monoids.html#4005" class="Bound Operator">★</a> <a id="4095" class="Symbol">(</a><a id="4096" href="Monoids.html#4071" class="Bound">y</a> <a id="4098" href="Monoids.html#4005" class="Bound Operator">★</a> <a id="4100" href="Monoids.html#4073" class="Bound">z</a><a id="4101" class="Symbol">)</a>

<a id="4104" class="Keyword">record</a> <a id="Semigroup"></a><a id="4111" href="Monoids.html#4111" class="Record">Semigroup</a> <a id="4121" class="Symbol">(</a><a id="4122" href="Monoids.html#4122" class="Bound">A</a> <a id="4124" class="Symbol">:</a> <a id="4126" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="4130" href="Monoids.html#2476" class="Generalizable">ℓ</a><a id="4131" class="Symbol">)</a> <a id="4133" class="Symbol">:</a> <a id="4135" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="4139" href="Monoids.html#4130" class="Bound">ℓ</a> <a id="4141" class="Keyword">where</a>
  <a id="4149" class="Keyword">infixl</a> <a id="4156" class="Number">5</a> <a id="4158" href="Monoids.html#4174" class="Field Operator">_★_</a>
  <a id="4164" class="Keyword">field</a>
    <a id="Semigroup._★_"></a><a id="4174" href="Monoids.html#4174" class="Field Operator">_★_</a> <a id="4178" class="Symbol">:</a> <a id="4180" href="Monoids.html#4122" class="Bound">A</a> <a id="4182" class="Symbol">→</a> <a id="4184" href="Monoids.html#4122" class="Bound">A</a> <a id="4186" class="Symbol">→</a> <a id="4188" href="Monoids.html#4122" class="Bound">A</a>
    <a id="Semigroup.has-is-semigroup"></a><a id="4194" href="Monoids.html#4194" class="Field">has-is-semigroup</a> <a id="4211" class="Symbol">:</a> <a id="4213" href="Monoids.html#3991" class="Record">is-semigroup</a> <a id="4226" href="Monoids.html#4174" class="Field Operator">_★_</a>

  <a id="4233" class="Keyword">open</a> <a id="4238" href="Monoids.html#3991" class="Module">is-semigroup</a> <a id="4251" href="Monoids.html#4194" class="Field">has-is-semigroup</a> <a id="4268" class="Keyword">public</a>
</pre>
<p>A couple of familiar <code>semigroups</code> to programmers are the <code>∧</code> and <code>∨</code> operators
from <em>boolean algebra</em>. We can show that they conform to our definition of a <code>semigroup</code></p>
<pre class="Agda"><a id="∧-semigroup"></a><a id="4457" href="Monoids.html#4457" class="Function">∧-semigroup</a> <a id="4469" class="Symbol">:</a> <a id="4471" href="Monoids.html#4111" class="Record">Semigroup</a> <a id="4481" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
<a id="4486" href="Monoids.html#4457" class="Function">∧-semigroup</a> <a id="4498" class="Symbol">=</a> <a id="4500" class="Keyword">record</a> <a id="4507" class="Symbol">{</a> <a id="4509" href="Monoids.html#4174" class="Field Operator">_★_</a> <a id="4513" class="Symbol">=</a> <a id="4515" class="Symbol">λ</a> <a id="4517" href="Monoids.html#4517" class="Bound">x</a> <a id="4519" href="Monoids.html#4519" class="Bound">y</a> <a id="4521" class="Symbol">→</a> <a id="4523" href="Monoids.html#4517" class="Bound">x</a> <a id="4525" href="Data.Bool.Base.html#995" class="Function Operator">∧</a> <a id="4527" href="Monoids.html#4519" class="Bound">y</a> 
                     <a id="4551" class="Symbol">;</a> <a id="4553" href="Monoids.html#4194" class="Field">has-is-semigroup</a> <a id="4570" class="Symbol">=</a> <a id="4572" class="Keyword">record</a> <a id="4579" class="Symbol">{</a> <a id="4581" href="Monoids.html#4059" class="Field">assoc</a> <a id="4587" class="Symbol">=</a> <a id="4589" href="Data.Bool.Properties.html#8098" class="Function">∧-assoc</a> <a id="4597" class="Symbol">}</a> <a id="4599" class="Symbol">}</a>

<a id="∨-semigroup"></a><a id="4602" href="Monoids.html#4602" class="Function">∨-semigroup</a> <a id="4614" class="Symbol">:</a> <a id="4616" href="Monoids.html#4111" class="Record">Semigroup</a> <a id="4626" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
<a id="4631" href="Monoids.html#4602" class="Function">∨-semigroup</a> <a id="4643" class="Symbol">=</a> <a id="4645" class="Keyword">record</a> <a id="4652" class="Symbol">{</a> <a id="4654" href="Monoids.html#4174" class="Field Operator">_★_</a> <a id="4658" class="Symbol">=</a> <a id="4660" class="Symbol">λ</a> <a id="4662" href="Monoids.html#4662" class="Bound">x</a> <a id="4664" href="Monoids.html#4664" class="Bound">y</a> <a id="4666" class="Symbol">→</a> <a id="4668" href="Monoids.html#4662" class="Bound">x</a> <a id="4670" href="Data.Bool.Base.html#1053" class="Function Operator">∨</a> <a id="4672" href="Monoids.html#4664" class="Bound">y</a> 
                     <a id="4696" class="Symbol">;</a> <a id="4698" href="Monoids.html#4194" class="Field">has-is-semigroup</a> <a id="4715" class="Symbol">=</a> <a id="4717" class="Keyword">record</a> <a id="4724" class="Symbol">{</a> <a id="4726" href="Monoids.html#4059" class="Field">assoc</a> <a id="4732" class="Symbol">=</a> <a id="4734" href="Data.Bool.Properties.html#5308" class="Function">∨-assoc</a> <a id="4742" class="Symbol">}</a> <a id="4744" class="Symbol">}</a>
</pre>
<p>Now that we have defined what it means to be a <code>semigroup</code>, we can graduate to
<code>monoids</code>. Lets recall the definition first.</p>
<h3 id="monoid-definition"><a href="#monoid-definition" class="anchor fas fa-xs fa-link"></a>Monoid definition</h3>
<p>A monoid is a <em>set</em> <span class="math inline">\(S\)</span> together with a <em>binary operation</em> <span class="math inline">\(★\)</span> that satisfies the
following properties.</p>
<h4 id="associativity"><a href="#associativity" class="anchor fas fa-xs fa-link"></a>Associativity</h4>
<p><span class="math display">\[
∀ x y z ∈ S. (x ★ y) ★ z = x ★ (y ★ z)
\]</span></p>
<h4 id="identity-element"><a href="#identity-element" class="anchor fas fa-xs fa-link"></a>Identity element</h4>
<p><span class="math display">\[
∃ e ∈ S. ∀ x. e ★ a = a ★ e = a
\]</span></p>
<p>I again encourage you to think of examples, like we did after the <code>semigrou</code> definition.
Do you think the examples I gave of <code>semigroups</code> are also <code>monoids</code>?</p>
<p>Again, it is straight forward to translate this to <code>agda</code>.</p>
<pre class="Agda"><a id="5360" class="Keyword">record</a> <a id="is-monoid"></a><a id="5367" href="Monoids.html#5367" class="Record">is-monoid</a> <a id="5377" class="Symbol">(</a><a id="5378" href="Monoids.html#5378" class="Bound Operator">_★_</a> <a id="5382" class="Symbol">:</a> <a id="5384" href="Monoids.html#2491" class="Generalizable">A</a> <a id="5386" class="Symbol">→</a> <a id="5388" href="Monoids.html#2491" class="Generalizable">A</a> <a id="5390" class="Symbol">→</a> <a id="5392" href="Monoids.html#2491" class="Generalizable">A</a><a id="5393" class="Symbol">)</a> <a id="5395" class="Symbol">(</a><a id="5396" href="Monoids.html#5396" class="Bound">ε</a> <a id="5398" class="Symbol">:</a> <a id="5400" href="Monoids.html#2491" class="Generalizable">A</a><a id="5401" class="Symbol">)</a> <a id="5403" class="Symbol">:</a> <a id="5405" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="5409" class="Symbol">(</a><a id="5410" href="Monoids.html#3925" class="Function">level-of</a> <a id="5419" href="Monoids.html#5384" class="Bound">A</a><a id="5420" class="Symbol">)</a> <a id="5422" class="Keyword">where</a>
  <a id="5430" class="Keyword">field</a>
    <a id="is-monoid.has-is-semigroup"></a><a id="5440" href="Monoids.html#5440" class="Field">has-is-semigroup</a> <a id="5457" class="Symbol">:</a> <a id="5459" href="Monoids.html#3991" class="Record">is-semigroup</a> <a id="5472" href="Monoids.html#5378" class="Bound Operator">_★_</a>

  <a id="5479" class="Keyword">open</a> <a id="5484" href="Monoids.html#3991" class="Module">is-semigroup</a> <a id="5497" href="Monoids.html#5440" class="Field">has-is-semigroup</a> <a id="5514" class="Keyword">public</a>

  <a id="5524" class="Keyword">field</a>
    <a id="is-monoid.identityˡ"></a><a id="5534" href="Monoids.html#5534" class="Field">identityˡ</a> <a id="5544" class="Symbol">:</a> <a id="5546" class="Symbol">∀</a> <a id="5548" href="Monoids.html#5548" class="Bound">x</a> <a id="5550" class="Symbol">→</a> <a id="5552" href="Monoids.html#5396" class="Bound">ε</a> <a id="5554" href="Monoids.html#5378" class="Bound Operator">★</a> <a id="5556" href="Monoids.html#5548" class="Bound">x</a> <a id="5558" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="5560" href="Monoids.html#5548" class="Bound">x</a>
    <a id="is-monoid.identityʳ"></a><a id="5566" href="Monoids.html#5566" class="Field">identityʳ</a> <a id="5576" class="Symbol">:</a> <a id="5578" class="Symbol">∀</a> <a id="5580" href="Monoids.html#5580" class="Bound">x</a> <a id="5582" class="Symbol">→</a> <a id="5584" href="Monoids.html#5580" class="Bound">x</a> <a id="5586" href="Monoids.html#5378" class="Bound Operator">★</a> <a id="5588" href="Monoids.html#5396" class="Bound">ε</a> <a id="5590" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="5592" href="Monoids.html#5580" class="Bound">x</a>

<a id="5595" class="Keyword">record</a> <a id="Monoid"></a><a id="5602" href="Monoids.html#5602" class="Record">Monoid</a> <a id="5609" class="Symbol">(</a><a id="5610" href="Monoids.html#5610" class="Bound">A</a> <a id="5612" class="Symbol">:</a> <a id="5614" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="5618" href="Monoids.html#2476" class="Generalizable">ℓ</a><a id="5619" class="Symbol">)</a> <a id="5621" class="Symbol">:</a> <a id="5623" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="5627" href="Monoids.html#5618" class="Bound">ℓ</a> <a id="5629" class="Keyword">where</a>
  <a id="5637" class="Keyword">infixl</a> <a id="5644" class="Number">5</a> <a id="5646" href="Monoids.html#5672" class="Function Operator">_★_</a>
  <a id="5652" class="Keyword">field</a>
    <a id="Monoid.ε"></a><a id="5662" href="Monoids.html#5662" class="Field">ε</a> <a id="5664" class="Symbol">:</a> <a id="5666" href="Monoids.html#5610" class="Bound">A</a>
    <a id="Monoid._★_"></a><a id="5672" href="Monoids.html#5672" class="Field Operator">_★_</a> <a id="5676" class="Symbol">:</a> <a id="5678" href="Monoids.html#5610" class="Bound">A</a> <a id="5680" class="Symbol">→</a> <a id="5682" href="Monoids.html#5610" class="Bound">A</a> <a id="5684" class="Symbol">→</a> <a id="5686" href="Monoids.html#5610" class="Bound">A</a>
    <a id="Monoid.has-is-monoid"></a><a id="5692" href="Monoids.html#5692" class="Field">has-is-monoid</a> <a id="5706" class="Symbol">:</a> <a id="5708" href="Monoids.html#5367" class="Record">is-monoid</a> <a id="5718" href="Monoids.html#5672" class="Field Operator">_★_</a> <a id="5722" href="Monoids.html#5662" class="Field">ε</a>

  <a id="5727" class="Keyword">open</a> <a id="5732" href="Monoids.html#5367" class="Module">is-monoid</a> <a id="5742" href="Monoids.html#5692" class="Field">has-is-monoid</a> <a id="5756" class="Keyword">public</a>
</pre>
<p>We can show that <code>∧</code> and <code>∨</code> are <code>monoids</code>!</p>
<pre class="Agda"><a id="∧-monoid"></a><a id="5821" href="Monoids.html#5821" class="Function">∧-monoid</a> <a id="5830" class="Symbol">:</a> <a id="5832" href="Monoids.html#5602" class="Record">Monoid</a> <a id="5839" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
<a id="5844" href="Monoids.html#5821" class="Function">∧-monoid</a> <a id="5853" class="Symbol">=</a> <a id="5855" class="Keyword">record</a> <a id="5862" class="Symbol">{</a> <a id="5864" href="Monoids.html#5662" class="Field">ε</a> <a id="5866" class="Symbol">=</a> <a id="5868" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a> 
                  <a id="5892" class="Symbol">;</a> <a id="5894" href="Monoids.html#5672" class="Field Operator">_★_</a> <a id="5898" class="Symbol">=</a> <a id="5900" href="Data.Bool.Base.html#995" class="Function Operator">_∧_</a> 
                  <a id="5923" class="Symbol">;</a> <a id="5925" href="Monoids.html#5692" class="Field">has-is-monoid</a> <a id="5939" class="Symbol">=</a> 
                    <a id="5962" class="Keyword">record</a> <a id="5969" class="Symbol">{</a> <a id="5971" href="Monoids.html#5440" class="Field">has-is-semigroup</a> <a id="5988" class="Symbol">=</a> <a id="5990" href="Monoids.html#4194" class="Field">Semigroup.has-is-semigroup</a> <a id="6017" href="Monoids.html#4457" class="Function">∧-semigroup</a>
                           <a id="6056" class="Symbol">;</a> <a id="6058" href="Monoids.html#5534" class="Field">identityˡ</a> <a id="6068" class="Symbol">=</a> <a id="6070" href="Data.Bool.Properties.html#8305" class="Function">∧-identityˡ</a>
                           <a id="6109" class="Symbol">;</a> <a id="6111" href="Monoids.html#5566" class="Field">identityʳ</a> <a id="6121" class="Symbol">=</a> <a id="6123" href="Data.Bool.Properties.html#8363" class="Function">∧-identityʳ</a> <a id="6135" class="Symbol">}</a> <a id="6137" class="Symbol">}</a>

<a id="∨-monoid"></a><a id="6140" href="Monoids.html#6140" class="Function">∨-monoid</a> <a id="6149" class="Symbol">:</a> <a id="6151" href="Monoids.html#5602" class="Record">Monoid</a> <a id="6158" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
<a id="6163" href="Monoids.html#5662" class="Field">Monoid.ε</a> <a id="6172" href="Monoids.html#6140" class="Function">∨-monoid</a> <a id="6181" class="Symbol">=</a> <a id="6183" href="Agda.Builtin.Bool.html#175" class="InductiveConstructor">false</a>
<a id="6189" href="Monoids.html#5672" class="Field Operator">Monoid._★_</a> <a id="6200" href="Monoids.html#6140" class="Function">∨-monoid</a> <a id="6209" class="Symbol">=</a> <a id="6211" href="Data.Bool.Base.html#1053" class="Function Operator">_∨_</a>
<a id="6215" href="Monoids.html#5440" class="Field">is-monoid.has-is-semigroup</a> <a id="6242" class="Symbol">(</a><a id="6243" href="Monoids.html#5692" class="Field">Monoid.has-is-monoid</a> <a id="6264" href="Monoids.html#6140" class="Function">∨-monoid</a><a id="6272" class="Symbol">)</a> <a id="6274" class="Symbol">=</a>
  <a id="6278" href="Monoids.html#4194" class="Field">Semigroup.has-is-semigroup</a> <a id="6305" href="Monoids.html#4602" class="Function">∨-semigroup</a>
<a id="6317" href="Monoids.html#5534" class="Field">is-monoid.identityˡ</a> <a id="6337" class="Symbol">(</a><a id="6338" href="Monoids.html#5692" class="Field">Monoid.has-is-monoid</a> <a id="6359" href="Monoids.html#6140" class="Function">∨-monoid</a><a id="6367" class="Symbol">)</a> <a id="6369" class="Symbol">=</a> <a id="6371" href="Data.Bool.Properties.html#5515" class="Function">∨-identityˡ</a>
<a id="6383" href="Monoids.html#5566" class="Field">is-monoid.identityʳ</a> <a id="6403" class="Symbol">(</a><a id="6404" href="Monoids.html#5692" class="Field">Monoid.has-is-monoid</a> <a id="6425" href="Monoids.html#6140" class="Function">∨-monoid</a><a id="6433" class="Symbol">)</a> <a id="6435" class="Symbol">=</a> <a id="6437" href="Data.Bool.Properties.html#5574" class="Function">∨-identityʳ</a>
</pre>
<p>I’m using proofs such as <code>∨-identityʳ</code> from the <code>standard-library</code> to keep the length of
this post reasonable. Note that you can construct <code>records</code> in agda in two ways, which
are presented above. <code>∧-monoid</code> is defined using the <code>record</code> constructor syntax. <code>∨-monoid</code>
uses something called <code>copatterns</code>, which let’s us define the fields of a record as separate
declarations in a similar way that we would give different cases for a function.</p>
<p>At this point you might not be convinced on the usefulness of all this. Let me try to change
that by showcasing a bunch of commonly used monoids and operations that can be built up from those.</p>
<p>A very common pattern when coding in a functional style is <code>mapping</code> followed by <code>folding</code>.
This pattern is also known as <code>MapReduce</code> in the distributed computing community. Let’s see an example.</p>
<pre class="Agda"><a id="numbers"></a><a id="7293" href="Monoids.html#7293" class="Function">numbers</a> <a id="7301" class="Symbol">:</a> <a id="7303" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="7308" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
<a id="7310" href="Monoids.html#7293" class="Function">numbers</a> <a id="7318" class="Symbol">=</a> <a id="7320" class="Number">1</a> <a id="7322" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7324" class="Number">2</a> <a id="7326" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7328" class="Number">3</a> <a id="7330" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7332" class="Number">4</a> <a id="7334" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7336" class="Number">5</a> <a id="7338" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7340" class="Number">6</a> <a id="7342" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7344" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a>

<a id="all≤5?"></a><a id="7348" href="Monoids.html#7348" class="Function">all≤5?</a> <a id="7355" class="Symbol">:</a> <a id="7357" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="7362" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="7364" class="Symbol">→</a> <a id="7366" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
<a id="7371" href="Monoids.html#7348" class="Function">all≤5?</a> <a id="7378" class="Symbol">=</a> <a id="7380" href="Data.List.Base.html#4426" class="Function">foldl</a> <a id="7386" href="Data.Bool.Base.html#995" class="Function Operator">_∧_</a> <a id="7390" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a> <a id="7395" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="7397" href="Data.List.Base.html#1620" class="Function">map</a> <a id="7401" class="Symbol">(</a><a id="7402" href="Data.Nat.Base.html#1330" class="Function Operator">_≤ᵇ</a> <a id="7406" class="Number">5</a><a id="7407" class="Symbol">)</a>

<a id="any&gt;10?"></a><a id="7410" href="Monoids.html#7410" class="Function">any&gt;10?</a> <a id="7418" class="Symbol">:</a> <a id="7420" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="7425" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="7427" class="Symbol">→</a> <a id="7429" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
<a id="7434" href="Monoids.html#7410" class="Function">any&gt;10?</a> <a id="7442" class="Symbol">=</a> <a id="7444" href="Data.List.Base.html#4426" class="Function">foldl</a> <a id="7450" href="Data.Bool.Base.html#1053" class="Function Operator">_∨_</a> <a id="7454" href="Agda.Builtin.Bool.html#175" class="InductiveConstructor">false</a> <a id="7460" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="7462" href="Data.List.Base.html#1620" class="Function">map</a> <a id="7466" class="Symbol">(</a><a id="7467" class="Number">11</a> <a id="7470" href="Data.Nat.Base.html#1330" class="Function Operator">≤ᵇ_</a><a id="7473" class="Symbol">)</a>

<a id="7476" href="Monoids.html#7476" class="Function">_</a> <a id="7478" class="Symbol">:</a> <a id="7480" href="Monoids.html#7348" class="Function">all≤5?</a> <a id="7487" href="Monoids.html#7293" class="Function">numbers</a> <a id="7495" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="7497" href="Agda.Builtin.Bool.html#175" class="InductiveConstructor">false</a>
<a id="7503" class="Symbol">_</a> <a id="7505" class="Symbol">=</a> <a id="7507" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>

<a id="7513" href="Monoids.html#7513" class="Function">_</a> <a id="7515" class="Symbol">:</a> <a id="7517" href="Monoids.html#7410" class="Function">any&gt;10?</a> <a id="7525" class="Symbol">(</a><a id="7526" class="Number">11</a> <a id="7529" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7531" href="Monoids.html#7293" class="Function">numbers</a><a id="7538" class="Symbol">)</a> <a id="7540" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="7542" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a>
<a id="7547" class="Symbol">_</a> <a id="7549" class="Symbol">=</a> <a id="7551" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre>
<p>We can easily generalize this notion of <code>mapping</code> and then <code>folding</code> by a clever use
of the structure provided by a <code>monoid</code>.</p>
<pre class="Agda"><a id="foldMapList"></a><a id="7696" href="Monoids.html#7696" class="Function">foldMapList</a> <a id="7708" class="Symbol">:</a> <a id="7710" class="Symbol">⦃</a> <a id="7712" href="Monoids.html#5602" class="Record">Monoid</a> <a id="7719" href="Monoids.html#2503" class="Generalizable">B</a> <a id="7721" class="Symbol">⦄</a> <a id="7723" class="Symbol">→</a> <a id="7725" class="Symbol">(</a><a id="7726" href="Monoids.html#2491" class="Generalizable">A</a> <a id="7728" class="Symbol">→</a> <a id="7730" href="Monoids.html#2503" class="Generalizable">B</a><a id="7731" class="Symbol">)</a> <a id="7733" class="Symbol">→</a> <a id="7735" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="7740" href="Monoids.html#2491" class="Generalizable">A</a> <a id="7742" class="Symbol">→</a> <a id="7744" href="Monoids.html#2503" class="Generalizable">B</a>
<a id="7746" href="Monoids.html#7696" class="Function">foldMapList</a> <a id="7758" class="Symbol">⦃</a> <a id="7760" href="Monoids.html#7760" class="Bound">mon</a> <a id="7764" class="Symbol">⦄</a> <a id="7766" href="Monoids.html#7766" class="Bound">f</a> <a id="7768" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="7771" class="Symbol">=</a> <a id="7773" href="Monoids.html#5662" class="Function">ε</a>
  <a id="7777" class="Keyword">where</a> <a id="7783" class="Keyword">open</a> <a id="7788" href="Monoids.html#5602" class="Module">Monoid</a> <a id="7795" href="Monoids.html#7760" class="Bound">mon</a>
<a id="7799" href="Monoids.html#7696" class="Function">foldMapList</a> <a id="7811" class="Symbol">⦃</a> <a id="7813" href="Monoids.html#7813" class="Bound">mon</a> <a id="7817" class="Symbol">⦄</a> <a id="7819" href="Monoids.html#7819" class="Bound">f</a> <a id="7821" class="Symbol">(</a><a id="7822" href="Monoids.html#7822" class="Bound">x</a> <a id="7824" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7826" href="Monoids.html#7826" class="Bound">xs</a><a id="7828" class="Symbol">)</a> <a id="7830" class="Symbol">=</a> <a id="7832" href="Monoids.html#7819" class="Bound">f</a> <a id="7834" href="Monoids.html#7822" class="Bound">x</a> <a id="7836" href="Monoids.html#5672" class="Function Operator">★</a> <a id="7838" href="Monoids.html#7696" class="Function">foldMapList</a> <a id="7850" href="Monoids.html#7819" class="Bound">f</a> <a id="7852" href="Monoids.html#7826" class="Bound">xs</a>
  <a id="7857" class="Keyword">where</a> <a id="7863" class="Keyword">open</a> <a id="7868" href="Monoids.html#5602" class="Module">Monoid</a> <a id="7875" href="Monoids.html#7813" class="Bound">mon</a>

<a id="7880" class="Keyword">module</a> <a id="7887" href="Monoids.html#7887" class="Module">_</a> <a id="7889" class="Keyword">where</a>
  <a id="7897" class="Keyword">instance</a> <a id="7906" href="Monoids.html#7906" class="Function">_</a> <a id="7908" class="Symbol">=</a> <a id="7910" href="Monoids.html#5821" class="Function">∧-monoid</a>

  <a id="7922" href="Monoids.html#7922" class="Function">all?</a> <a id="7927" class="Symbol">:</a> <a id="7929" class="Symbol">(</a><a id="7930" href="Monoids.html#2491" class="Generalizable">A</a> <a id="7932" class="Symbol">→</a> <a id="7934" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a><a id="7938" class="Symbol">)</a> <a id="7940" class="Symbol">→</a> <a id="7942" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="7947" href="Monoids.html#2491" class="Generalizable">A</a> <a id="7949" class="Symbol">→</a> <a id="7951" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
  <a id="7958" href="Monoids.html#7922" class="Function">all?</a> <a id="7963" class="Symbol">=</a> <a id="7965" href="Monoids.html#7696" class="Function">foldMapList</a>

<a id="7978" class="Keyword">module</a> <a id="7985" href="Monoids.html#7985" class="Module">_</a> <a id="7987" class="Keyword">where</a>
  <a id="7995" class="Keyword">instance</a> <a id="8004" href="Monoids.html#8004" class="Function">_</a> <a id="8006" class="Symbol">=</a> <a id="8008" href="Monoids.html#6140" class="Function">∨-monoid</a>

  <a id="8020" href="Monoids.html#8020" class="Function">any?</a> <a id="8025" class="Symbol">:</a> <a id="8027" class="Symbol">(</a><a id="8028" href="Monoids.html#2491" class="Generalizable">A</a> <a id="8030" class="Symbol">→</a> <a id="8032" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a><a id="8036" class="Symbol">)</a> <a id="8038" class="Symbol">→</a> <a id="8040" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="8045" href="Monoids.html#2491" class="Generalizable">A</a> <a id="8047" class="Symbol">→</a> <a id="8049" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
  <a id="8056" href="Monoids.html#8020" class="Function">any?</a> <a id="8061" class="Symbol">=</a> <a id="8063" href="Monoids.html#7696" class="Function">foldMapList</a>

<a id="8076" href="Monoids.html#8076" class="Function">_</a> <a id="8078" class="Symbol">:</a> <a id="8080" href="Monoids.html#7922" class="Function">all?</a> <a id="8085" class="Symbol">(</a><a id="8086" href="Data.Nat.Base.html#1330" class="Function Operator">_≤ᵇ</a> <a id="8090" class="Number">5</a><a id="8091" class="Symbol">)</a> <a id="8093" href="Monoids.html#7293" class="Function">numbers</a> <a id="8101" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="8103" href="Agda.Builtin.Bool.html#175" class="InductiveConstructor">false</a>
<a id="8109" class="Symbol">_</a> <a id="8111" class="Symbol">=</a> <a id="8113" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>

<a id="8119" href="Monoids.html#8119" class="Function">_</a> <a id="8121" class="Symbol">:</a> <a id="8123" href="Monoids.html#8020" class="Function">any?</a> <a id="8128" class="Symbol">(</a><a id="8129" class="Number">11</a> <a id="8132" href="Data.Nat.Base.html#1330" class="Function Operator">≤ᵇ_</a><a id="8135" class="Symbol">)</a> <a id="8137" class="Symbol">(</a><a id="8138" class="Number">11</a> <a id="8141" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="8143" href="Monoids.html#7293" class="Function">numbers</a><a id="8150" class="Symbol">)</a> <a id="8152" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="8154" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a>
<a id="8159" class="Symbol">_</a> <a id="8161" class="Symbol">=</a> <a id="8163" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre>
<p>Pretty neat? I think so! We can do other cool things too, we can for example
flatten nested lists.</p>
<pre class="Agda"><a id="[]-semigroup"></a><a id="8281" href="Monoids.html#8281" class="Function">[]-semigroup</a> <a id="8294" class="Symbol">:</a> <a id="8296" href="Monoids.html#4111" class="Record">Semigroup</a> <a id="8306" class="Symbol">(</a><a id="8307" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="8312" href="Monoids.html#2491" class="Generalizable">A</a><a id="8313" class="Symbol">)</a>
<a id="8315" href="Monoids.html#4174" class="Field Operator">Semigroup._★_</a> <a id="8329" href="Monoids.html#8281" class="Function">[]-semigroup</a> <a id="8342" class="Symbol">=</a> <a id="8344" href="Data.List.Base.html#1943" class="Function Operator">_++_</a>
<a id="8349" href="Monoids.html#4059" class="Field">is-semigroup.assoc</a> <a id="8368" class="Symbol">(</a><a id="8369" href="Monoids.html#4194" class="Field">Semigroup.has-is-semigroup</a> <a id="8396" href="Monoids.html#8281" class="Function">[]-semigroup</a><a id="8408" class="Symbol">)</a> <a id="8410" class="Symbol">=</a> <a id="8412" href="Data.List.Properties.html#5580" class="Function">++-assoc</a>

<a id="[]-monoid"></a><a id="8422" href="Monoids.html#8422" class="Function">[]-monoid</a> <a id="8432" class="Symbol">:</a> <a id="8434" href="Monoids.html#5602" class="Record">Monoid</a> <a id="8441" class="Symbol">(</a><a id="8442" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="8447" href="Monoids.html#2491" class="Generalizable">A</a><a id="8448" class="Symbol">)</a>
<a id="8450" href="Monoids.html#5662" class="Field">Monoid.ε</a> <a id="8459" href="Monoids.html#8422" class="Function">[]-monoid</a> <a id="8469" class="Symbol">=</a> <a id="8471" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a>
<a id="8474" href="Monoids.html#5672" class="Field Operator">Monoid._★_</a> <a id="8485" href="Monoids.html#8422" class="Function">[]-monoid</a> <a id="8495" class="Symbol">=</a> <a id="8497" href="Data.List.Base.html#1943" class="Function Operator">_++_</a>
<a id="8502" href="Monoids.html#5440" class="Field">is-monoid.has-is-semigroup</a> <a id="8529" class="Symbol">(</a><a id="8530" href="Monoids.html#5692" class="Field">Monoid.has-is-monoid</a> <a id="8551" href="Monoids.html#8422" class="Function">[]-monoid</a><a id="8560" class="Symbol">)</a> <a id="8562" class="Symbol">=</a>
  <a id="8566" href="Monoids.html#4194" class="Field">Semigroup.has-is-semigroup</a> <a id="8593" href="Monoids.html#8281" class="Function">[]-semigroup</a>
<a id="8606" href="Monoids.html#5534" class="Field">is-monoid.identityˡ</a> <a id="8626" class="Symbol">(</a><a id="8627" href="Monoids.html#5692" class="Field">Monoid.has-is-monoid</a> <a id="8648" href="Monoids.html#8422" class="Function">[]-monoid</a><a id="8657" class="Symbol">)</a> <a id="8659" class="Symbol">=</a> <a id="8661" href="Data.List.Properties.html#5704" class="Function">++-identityˡ</a>
<a id="8674" href="Monoids.html#5566" class="Field">is-monoid.identityʳ</a> <a id="8694" class="Symbol">(</a><a id="8695" href="Monoids.html#5692" class="Field">Monoid.has-is-monoid</a> <a id="8716" href="Monoids.html#8422" class="Function">[]-monoid</a><a id="8725" class="Symbol">)</a> <a id="8727" class="Symbol">=</a> <a id="8729" href="Data.List.Properties.html#5768" class="Function">++-identityʳ</a>

<a id="8743" class="Keyword">module</a> <a id="8750" href="Monoids.html#8750" class="Module">_</a> <a id="8752" class="Keyword">where</a>
  <a id="8760" class="Keyword">instance</a> <a id="8769" href="Monoids.html#8769" class="Function">_</a> <a id="8771" class="Symbol">=</a> <a id="8773" href="Monoids.html#8422" class="Function">[]-monoid</a>

  <a id="8786" href="Monoids.html#8786" class="Function">flatten</a> <a id="8794" class="Symbol">:</a> <a id="8796" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="8801" class="Symbol">(</a><a id="8802" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="8807" href="Monoids.html#2491" class="Generalizable">A</a><a id="8808" class="Symbol">)</a> <a id="8810" class="Symbol">→</a> <a id="8812" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="8817" href="Monoids.html#2491" class="Generalizable">A</a>
  <a id="8821" href="Monoids.html#8786" class="Function">flatten</a> <a id="8829" class="Symbol">=</a> <a id="8831" href="Monoids.html#7696" class="Function">foldMapList</a> <a id="8843" href="Function.Base.html#704" class="Function">id</a>

<a id="8847" href="Monoids.html#8847" class="Function">_</a> <a id="8849" class="Symbol">:</a> <a id="8851" href="Monoids.html#8786" class="Function">flatten</a> <a id="8859" class="Symbol">((</a><a id="8861" class="Number">1</a> <a id="8863" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="8865" class="Number">2</a> <a id="8867" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="8869" class="InductiveConstructor">[]</a><a id="8871" class="Symbol">)</a> <a id="8873" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="8875" class="Symbol">(</a><a id="8876" class="Number">3</a> <a id="8878" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="8880" class="Number">4</a> <a id="8882" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="8884" class="InductiveConstructor">[]</a><a id="8886" class="Symbol">)</a> <a id="8888" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="8890" class="InductiveConstructor">[]</a><a id="8892" class="Symbol">)</a> <a id="8894" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="8896" class="Number">1</a> <a id="8898" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="8900" class="Number">2</a> <a id="8902" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="8904" class="Number">3</a> <a id="8906" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="8908" class="Number">4</a> <a id="8910" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="8912" class="InductiveConstructor">[]</a>
<a id="8915" class="Symbol">_</a> <a id="8917" class="Symbol">=</a> <a id="8919" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre>
<p>Or take sums and products. Excuse the mostly boring <code>semigroup</code> and <code>monoid</code> instance declarations.</p>
<pre class="Agda"><a id="+-semi"></a><a id="9038" href="Monoids.html#9038" class="Function">+-semi</a> <a id="9045" class="Symbol">:</a> <a id="9047" href="Monoids.html#4111" class="Record">Semigroup</a> <a id="9057" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
<a id="9059" href="Monoids.html#4174" class="Field Operator">Semigroup._★_</a> <a id="9073" href="Monoids.html#9038" class="Function">+-semi</a> <a id="9080" class="Symbol">=</a> <a id="9082" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">_+_</a>
<a id="9086" href="Monoids.html#4059" class="Field">is-semigroup.assoc</a> <a id="9105" class="Symbol">(</a><a id="9106" href="Monoids.html#4194" class="Field">Semigroup.has-is-semigroup</a> <a id="9133" href="Monoids.html#9038" class="Function">+-semi</a><a id="9139" class="Symbol">)</a> <a id="9141" class="Symbol">=</a> <a id="9143" href="Data.Nat.Properties.html#14455" class="Function">+-assoc</a>

<a id="+-0"></a><a id="9152" href="Monoids.html#9152" class="Function">+-0</a> <a id="9156" class="Symbol">:</a> <a id="9158" href="Monoids.html#5602" class="Record">Monoid</a> <a id="9165" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
<a id="9167" href="Monoids.html#5662" class="Field">Monoid.ε</a> <a id="9176" href="Monoids.html#9152" class="Function">+-0</a> <a id="9180" class="Symbol">=</a> <a id="9182" class="Number">0</a>
<a id="9184" href="Monoids.html#5672" class="Field Operator">Monoid._★_</a> <a id="9195" href="Monoids.html#9152" class="Function">+-0</a> <a id="9199" class="Symbol">=</a> <a id="9201" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">_+_</a>
<a id="9205" href="Monoids.html#5440" class="Field">is-monoid.has-is-semigroup</a> <a id="9232" class="Symbol">(</a><a id="9233" href="Monoids.html#5692" class="Field">Monoid.has-is-monoid</a> <a id="9254" href="Monoids.html#9152" class="Function">+-0</a><a id="9257" class="Symbol">)</a> <a id="9259" class="Symbol">=</a> <a id="9261" href="Monoids.html#4194" class="Field">Semigroup.has-is-semigroup</a> <a id="9288" href="Monoids.html#9038" class="Function">+-semi</a>
<a id="9295" href="Monoids.html#5534" class="Field">is-monoid.identityˡ</a> <a id="9315" class="Symbol">(</a><a id="9316" href="Monoids.html#5692" class="Field">Monoid.has-is-monoid</a> <a id="9337" href="Monoids.html#9152" class="Function">+-0</a><a id="9340" class="Symbol">)</a> <a id="9342" class="Symbol">=</a> <a id="9344" href="Data.Nat.Properties.html#14556" class="Function">+-identityˡ</a>
<a id="9356" href="Monoids.html#5566" class="Field">is-monoid.identityʳ</a> <a id="9376" class="Symbol">(</a><a id="9377" href="Monoids.html#5692" class="Field">Monoid.has-is-monoid</a> <a id="9398" href="Monoids.html#9152" class="Function">+-0</a><a id="9401" class="Symbol">)</a> <a id="9403" class="Symbol">=</a> <a id="9405" href="Data.Nat.Properties.html#14611" class="Function">+-identityʳ</a>

<a id="*-semi"></a><a id="9418" href="Monoids.html#9418" class="Function">*-semi</a> <a id="9425" class="Symbol">:</a> <a id="9427" href="Monoids.html#4111" class="Record">Semigroup</a> <a id="9437" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
<a id="9439" href="Monoids.html#4174" class="Field Operator">Semigroup._★_</a> <a id="9453" href="Monoids.html#9418" class="Function">*-semi</a> <a id="9460" class="Symbol">=</a> <a id="9462" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">_*_</a>
<a id="9466" href="Monoids.html#4059" class="Field">is-semigroup.assoc</a> <a id="9485" class="Symbol">(</a><a id="9486" href="Monoids.html#4194" class="Field">Semigroup.has-is-semigroup</a> <a id="9513" href="Monoids.html#9418" class="Function">*-semi</a><a id="9519" class="Symbol">)</a> <a id="9521" class="Symbol">=</a> <a id="9523" href="Data.Nat.Properties.html#22029" class="Function">*-assoc</a>

<a id="*-1"></a><a id="9532" href="Monoids.html#9532" class="Function">*-1</a> <a id="9536" class="Symbol">:</a> <a id="9538" href="Monoids.html#5602" class="Record">Monoid</a> <a id="9545" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
<a id="9547" href="Monoids.html#5662" class="Field">Monoid.ε</a> <a id="9556" href="Monoids.html#9532" class="Function">*-1</a> <a id="9560" class="Symbol">=</a> <a id="9562" class="Number">1</a>
<a id="9564" href="Monoids.html#5672" class="Field Operator">Monoid._★_</a> <a id="9575" href="Monoids.html#9532" class="Function">*-1</a> <a id="9579" class="Symbol">=</a> <a id="9581" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">_*_</a>
<a id="9585" href="Monoids.html#5440" class="Field">is-monoid.has-is-semigroup</a> <a id="9612" class="Symbol">(</a><a id="9613" href="Monoids.html#5692" class="Field">Monoid.has-is-monoid</a> <a id="9634" href="Monoids.html#9532" class="Function">*-1</a><a id="9637" class="Symbol">)</a> <a id="9639" class="Symbol">=</a> <a id="9641" href="Monoids.html#4194" class="Field">Semigroup.has-is-semigroup</a> <a id="9668" href="Monoids.html#9418" class="Function">*-semi</a>
<a id="9675" href="Monoids.html#5534" class="Field">is-monoid.identityˡ</a> <a id="9695" class="Symbol">(</a><a id="9696" href="Monoids.html#5692" class="Field">Monoid.has-is-monoid</a> <a id="9717" href="Monoids.html#9532" class="Function">*-1</a><a id="9720" class="Symbol">)</a> <a id="9722" class="Symbol">=</a> <a id="9724" href="Data.Nat.Properties.html#20929" class="Function">*-identityˡ</a>
<a id="9736" href="Monoids.html#5566" class="Field">is-monoid.identityʳ</a> <a id="9756" class="Symbol">(</a><a id="9757" href="Monoids.html#5692" class="Field">Monoid.has-is-monoid</a> <a id="9778" href="Monoids.html#9532" class="Function">*-1</a><a id="9781" class="Symbol">)</a> <a id="9783" class="Symbol">=</a> <a id="9785" href="Data.Nat.Properties.html#20993" class="Function">*-identityʳ</a>

<a id="9798" class="Keyword">module</a> <a id="9805" href="Monoids.html#9805" class="Module">_</a> <a id="9807" class="Keyword">where</a>
  <a id="9815" class="Keyword">instance</a> <a id="9824" href="Monoids.html#9824" class="Function">_</a> <a id="9826" class="Symbol">=</a> <a id="9828" href="Monoids.html#9152" class="Function">+-0</a>

  <a id="9835" href="Monoids.html#9835" class="Function">sum</a> <a id="9839" class="Symbol">:</a> <a id="9841" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="9846" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="9848" class="Symbol">→</a> <a id="9850" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
  <a id="9854" href="Monoids.html#9835" class="Function">sum</a> <a id="9858" class="Symbol">=</a> <a id="9860" href="Monoids.html#7696" class="Function">foldMapList</a> <a id="9872" href="Function.Base.html#704" class="Function">id</a>

<a id="9876" href="Monoids.html#9876" class="Function">_</a> <a id="9878" class="Symbol">:</a> <a id="9880" href="Monoids.html#9835" class="Function">sum</a> <a id="9884" href="Monoids.html#7293" class="Function">numbers</a> <a id="9892" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="9894" class="Number">21</a>
<a id="9897" class="Symbol">_</a> <a id="9899" class="Symbol">=</a> <a id="9901" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>

<a id="9907" class="Keyword">module</a> <a id="9914" href="Monoids.html#9914" class="Module">_</a> <a id="9916" class="Keyword">where</a>
  <a id="9924" class="Keyword">instance</a> <a id="9933" href="Monoids.html#9933" class="Function">_</a> <a id="9935" class="Symbol">=</a> <a id="9937" href="Monoids.html#9532" class="Function">*-1</a>

  <a id="9944" href="Monoids.html#9944" class="Function">product</a> <a id="9952" class="Symbol">=</a> <a id="9954" href="Monoids.html#7696" class="Function">foldMapList</a> <a id="9966" href="Function.Base.html#704" class="Function">id</a>

<a id="9970" href="Monoids.html#9970" class="Function">_</a> <a id="9972" class="Symbol">:</a> <a id="9974" href="Monoids.html#9944" class="Function">product</a> <a id="9982" href="Monoids.html#7293" class="Function">numbers</a> <a id="9990" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="9992" class="Number">720</a>
<a id="9996" class="Symbol">_</a> <a id="9998" class="Symbol">=</a> <a id="10000" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre>
<p>An interesting <code>monoid</code> is the <code>dual</code> of some other <code>monoid</code>.</p>
<pre class="Agda"><a id="10081" class="Keyword">module</a> <a id="10088" href="Monoids.html#10088" class="Module">_</a> <a id="10090" class="Symbol">(</a><a id="10091" href="Monoids.html#10091" class="Bound">mon</a> <a id="10095" class="Symbol">:</a> <a id="10097" href="Monoids.html#5602" class="Record">Monoid</a> <a id="10104" href="Monoids.html#2491" class="Generalizable">A</a><a id="10105" class="Symbol">)</a> <a id="10107" class="Keyword">where</a>
  <a id="10115" class="Keyword">open</a> <a id="10120" href="Monoids.html#5602" class="Module">Monoid</a> <a id="10127" href="Monoids.html#10091" class="Bound">mon</a>

  <a id="10134" href="Monoids.html#10134" class="Function">dual</a> <a id="10139" class="Symbol">:</a> <a id="10141" href="Monoids.html#5602" class="Record">Monoid</a> <a id="10148" href="Monoids.html#10104" class="Bound">A</a>
  <a id="10152" href="Monoids.html#5662" class="Field">Monoid.ε</a> <a id="10161" href="Monoids.html#10134" class="Function">dual</a> <a id="10166" class="Symbol">=</a> <a id="10168" href="Monoids.html#5662" class="Field">ε</a>
  <a id="10172" href="Monoids.html#5672" class="Field Operator">Monoid._★_</a> <a id="10183" href="Monoids.html#10134" class="Function">dual</a> <a id="10188" class="Symbol">=</a> <a id="10190" href="Function.Base.html#1638" class="Function">flip</a> <a id="10195" href="Monoids.html#5672" class="Field Operator">_★_</a>
  <a id="10201" href="Monoids.html#4059" class="Field">is-semigroup.assoc</a> <a id="10220" class="Symbol">(</a><a id="10221" href="Monoids.html#5440" class="Field">is-monoid.has-is-semigroup</a> <a id="10248" class="Symbol">(</a><a id="10249" href="Monoids.html#5692" class="Field">Monoid.has-is-monoid</a> <a id="10270" href="Monoids.html#10134" class="Function">dual</a><a id="10274" class="Symbol">))</a>
    <a id="10281" href="Monoids.html#10281" class="Bound">x</a> <a id="10283" href="Monoids.html#10283" class="Bound">y</a> <a id="10285" href="Monoids.html#10285" class="Bound">z</a> <a id="10287" class="Symbol">=</a> <a id="10289" href="Relation.Binary.PropositionalEquality.Core.html#1712" class="Function">sym</a> <a id="10293" class="Symbol">(</a><a id="10294" href="Monoids.html#4059" class="Function">assoc</a> <a id="10300" href="Monoids.html#10285" class="Bound">z</a> <a id="10302" href="Monoids.html#10283" class="Bound">y</a> <a id="10304" href="Monoids.html#10281" class="Bound">x</a><a id="10305" class="Symbol">)</a>
  <a id="10309" href="Monoids.html#5534" class="Field">is-monoid.identityˡ</a> <a id="10329" class="Symbol">(</a><a id="10330" href="Monoids.html#5692" class="Field">Monoid.has-is-monoid</a> <a id="10351" href="Monoids.html#10134" class="Function">dual</a><a id="10355" class="Symbol">)</a> <a id="10357" class="Symbol">=</a> <a id="10359" href="Monoids.html#5566" class="Function">identityʳ</a>
  <a id="10371" href="Monoids.html#5566" class="Field">is-monoid.identityʳ</a> <a id="10391" class="Symbol">(</a><a id="10392" href="Monoids.html#5692" class="Field">Monoid.has-is-monoid</a> <a id="10413" href="Monoids.html#10134" class="Function">dual</a><a id="10417" class="Symbol">)</a> <a id="10419" class="Symbol">=</a> <a id="10421" href="Monoids.html#5534" class="Function">identityˡ</a>

<a id="reverse"></a><a id="10432" href="Monoids.html#10432" class="Function">reverse</a> <a id="10440" class="Symbol">:</a> <a id="10442" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="10447" href="Monoids.html#2491" class="Generalizable">A</a> <a id="10449" class="Symbol">→</a> <a id="10451" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="10456" href="Monoids.html#2491" class="Generalizable">A</a>
<a id="10458" href="Monoids.html#10432" class="Function">reverse</a> <a id="10466" class="Symbol">=</a> <a id="10468" href="Monoids.html#7696" class="Function">foldMapList</a> <a id="10480" class="Symbol">⦃</a> <a id="10482" href="Monoids.html#10134" class="Function">dual</a> <a id="10487" class="Symbol">(</a><a id="10488" href="Monoids.html#8422" class="Function">[]-monoid</a><a id="10497" class="Symbol">)</a> <a id="10499" class="Symbol">⦄</a> <a id="10501" class="Symbol">(</a><a id="10502" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">_∷</a> <a id="10505" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a><a id="10507" class="Symbol">)</a>

<a id="10510" href="Monoids.html#10510" class="Function">_</a> <a id="10512" class="Symbol">:</a> <a id="10514" href="Monoids.html#10432" class="Function">reverse</a> <a id="10522" href="Monoids.html#7293" class="Function">numbers</a> <a id="10530" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="10532" class="Symbol">(</a><a id="10533" class="Number">6</a> <a id="10535" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="10537" class="Number">5</a> <a id="10539" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="10541" class="Number">4</a> <a id="10543" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="10545" class="Number">3</a> <a id="10547" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="10549" class="Number">2</a> <a id="10551" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="10553" class="Number">1</a> <a id="10555" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="10557" class="InductiveConstructor">[]</a><a id="10559" class="Symbol">)</a>
<a id="10561" class="Symbol">_</a> <a id="10563" class="Symbol">=</a> <a id="10565" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre>
<p>Another example of a <code>monoid</code> built of other <code>monoids</code> is the <em>cartetesian product</em> or <code>_×_</code>.</p>
<pre class="Agda"><a id="10678" class="Keyword">module</a> <a id="10685" href="Monoids.html#10685" class="Module">_</a> <a id="10687" class="Symbol">(</a><a id="10688" href="Monoids.html#10688" class="Bound">ma</a> <a id="10691" class="Symbol">:</a> <a id="10693" href="Monoids.html#5602" class="Record">Monoid</a> <a id="10700" href="Monoids.html#2491" class="Generalizable">A</a><a id="10701" class="Symbol">)</a> <a id="10703" class="Symbol">(</a><a id="10704" href="Monoids.html#10704" class="Bound">mb</a> <a id="10707" class="Symbol">:</a> <a id="10709" href="Monoids.html#5602" class="Record">Monoid</a> <a id="10716" href="Monoids.html#2503" class="Generalizable">B</a><a id="10717" class="Symbol">)</a> <a id="10719" class="Keyword">where</a>

  <a id="10728" class="Keyword">open</a> <a id="10733" href="Monoids.html#5602" class="Module">Monoid</a> <a id="10740" class="Symbol">⦃</a> <a id="10742" class="Symbol">...</a> <a id="10746" class="Symbol">⦄</a>

  <a id="10751" class="Keyword">instance</a>
    <a id="10764" href="Monoids.html#10764" class="Function">_</a> <a id="10766" class="Symbol">=</a> <a id="10768" href="Monoids.html#10688" class="Bound">ma</a>
    <a id="10775" href="Monoids.html#10775" class="Function">_</a> <a id="10777" class="Symbol">=</a> <a id="10779" href="Monoids.html#10704" class="Bound">mb</a>

  <a id="10785" href="Monoids.html#10785" class="Function">×-semigroup</a> <a id="10797" class="Symbol">:</a> <a id="10799" href="Monoids.html#4111" class="Record">Semigroup</a> <a id="10809" class="Symbol">(</a><a id="10810" href="Monoids.html#10700" class="Bound">A</a> <a id="10812" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="10814" href="Monoids.html#10716" class="Bound">B</a><a id="10815" class="Symbol">)</a>
  <a id="10819" class="Symbol">(</a><a id="10820" href="Monoids.html#10785" class="Function">×-semigroup</a> <a id="10832" href="Monoids.html#4174" class="Field Operator">Semigroup.★</a> <a id="10844" class="Symbol">(</a><a id="10845" href="Monoids.html#10845" class="Bound">a</a> <a id="10847" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="10849" href="Monoids.html#10849" class="Bound">b</a><a id="10850" class="Symbol">))</a> <a id="10853" class="Symbol">(</a><a id="10854" href="Monoids.html#10854" class="Bound">a₁</a> <a id="10857" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="10859" href="Monoids.html#10859" class="Bound">b₁</a><a id="10861" class="Symbol">)</a> <a id="10863" class="Symbol">=</a> <a id="10865" href="Monoids.html#10845" class="Bound">a</a> <a id="10867" href="Monoids.html#5672" class="Field Operator">★</a> <a id="10869" href="Monoids.html#10854" class="Bound">a₁</a> <a id="10872" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="10874" href="Monoids.html#10849" class="Bound">b</a> <a id="10876" href="Monoids.html#5672" class="Field Operator">★</a> <a id="10878" href="Monoids.html#10859" class="Bound">b₁</a>
  <a id="10883" href="Monoids.html#4059" class="Field">is-semigroup.assoc</a> <a id="10902" class="Symbol">(</a><a id="10903" href="Monoids.html#4194" class="Field">Semigroup.has-is-semigroup</a> <a id="10930" href="Monoids.html#10785" class="Function">×-semigroup</a><a id="10941" class="Symbol">)</a> 
    <a id="10948" class="Symbol">(</a><a id="10949" href="Monoids.html#10949" class="Bound">a₁</a> <a id="10952" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="10954" href="Monoids.html#10954" class="Bound">b₁</a><a id="10956" class="Symbol">)</a> <a id="10958" class="Symbol">(</a><a id="10959" href="Monoids.html#10959" class="Bound">a₂</a> <a id="10962" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="10964" href="Monoids.html#10964" class="Bound">b₂</a><a id="10966" class="Symbol">)</a> <a id="10968" class="Symbol">(</a><a id="10969" href="Monoids.html#10969" class="Bound">a₃</a> <a id="10972" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="10974" href="Monoids.html#10974" class="Bound">b₃</a><a id="10976" class="Symbol">)</a> <a id="10978" class="Keyword">rewrite</a> <a id="10986" href="Monoids.html#4059" class="Function">assoc</a> <a id="10992" href="Monoids.html#10949" class="Bound">a₁</a> <a id="10995" href="Monoids.html#10959" class="Bound">a₂</a> <a id="10998" href="Monoids.html#10969" class="Bound">a₃</a> <a id="11001" class="Keyword">rewrite</a> <a id="11009" href="Monoids.html#4059" class="Function">assoc</a> <a id="11015" href="Monoids.html#10954" class="Bound">b₁</a> <a id="11018" href="Monoids.html#10964" class="Bound">b₂</a> <a id="11021" href="Monoids.html#10974" class="Bound">b₃</a> <a id="11024" class="Symbol">=</a> <a id="11026" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>

  <a id="11034" href="Monoids.html#11034" class="Function">×-monoid</a> <a id="11043" class="Symbol">:</a> <a id="11045" href="Monoids.html#5602" class="Record">Monoid</a> <a id="11052" class="Symbol">(</a><a id="11053" href="Monoids.html#10700" class="Bound">A</a> <a id="11055" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="11057" href="Monoids.html#10716" class="Bound">B</a><a id="11058" class="Symbol">)</a>
  <a id="11062" href="Monoids.html#5662" class="Field">Monoid.ε</a> <a id="11071" href="Monoids.html#11034" class="Function">×-monoid</a> <a id="11080" class="Symbol">=</a> <a id="11082" href="Monoids.html#5662" class="Field">ε</a> <a id="11084" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="11086" href="Monoids.html#5662" class="Field">ε</a>
  <a id="11090" class="Symbol">(</a><a id="11091" href="Monoids.html#11034" class="Function">×-monoid</a> <a id="11100" href="Monoids.html#5672" class="Field Operator">Monoid.★</a> <a id="11109" class="Symbol">(</a><a id="11110" href="Monoids.html#11110" class="Bound">a</a> <a id="11112" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="11114" href="Monoids.html#11114" class="Bound">b</a><a id="11115" class="Symbol">))</a> <a id="11118" class="Symbol">(</a><a id="11119" href="Monoids.html#11119" class="Bound">a₁</a> <a id="11122" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="11124" href="Monoids.html#11124" class="Bound">b₁</a><a id="11126" class="Symbol">)</a> <a id="11128" class="Symbol">=</a> <a id="11130" href="Monoids.html#11110" class="Bound">a</a> <a id="11132" href="Monoids.html#5672" class="Field Operator">★</a> <a id="11134" href="Monoids.html#11119" class="Bound">a₁</a> <a id="11137" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="11139" href="Monoids.html#11114" class="Bound">b</a> <a id="11141" href="Monoids.html#5672" class="Field Operator">★</a> <a id="11143" href="Monoids.html#11124" class="Bound">b₁</a>
  <a id="11148" href="Monoids.html#5440" class="Field">is-monoid.has-is-semigroup</a> <a id="11175" class="Symbol">(</a><a id="11176" href="Monoids.html#5692" class="Field">Monoid.has-is-monoid</a> <a id="11197" href="Monoids.html#11034" class="Function">×-monoid</a><a id="11205" class="Symbol">)</a> <a id="11207" class="Symbol">=</a>
    <a id="11213" href="Monoids.html#4194" class="Field">Semigroup.has-is-semigroup</a> <a id="11240" href="Monoids.html#10785" class="Function">×-semigroup</a>
  <a id="11254" href="Monoids.html#5534" class="Field">is-monoid.identityˡ</a> <a id="11274" class="Symbol">(</a><a id="11275" href="Monoids.html#5692" class="Field">Monoid.has-is-monoid</a> <a id="11296" href="Monoids.html#11034" class="Function">×-monoid</a><a id="11304" class="Symbol">)</a> <a id="11306" class="Symbol">(</a><a id="11307" href="Monoids.html#11307" class="Bound">a</a> <a id="11309" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="11311" href="Monoids.html#11311" class="Bound">b</a><a id="11312" class="Symbol">)</a> 
    <a id="11319" class="Keyword">rewrite</a> <a id="11327" href="Monoids.html#5534" class="Function">identityˡ</a> <a id="11337" href="Monoids.html#11307" class="Bound">a</a> <a id="11339" class="Keyword">rewrite</a> <a id="11347" href="Monoids.html#5534" class="Function">identityˡ</a> <a id="11357" href="Monoids.html#11311" class="Bound">b</a> <a id="11359" class="Symbol">=</a> <a id="11361" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
  <a id="11368" href="Monoids.html#5566" class="Field">is-monoid.identityʳ</a> <a id="11388" class="Symbol">(</a><a id="11389" href="Monoids.html#5692" class="Field">Monoid.has-is-monoid</a> <a id="11410" href="Monoids.html#11034" class="Function">×-monoid</a><a id="11418" class="Symbol">)</a> <a id="11420" class="Symbol">(</a><a id="11421" href="Monoids.html#11421" class="Bound">a</a> <a id="11423" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="11425" href="Monoids.html#11425" class="Bound">b</a><a id="11426" class="Symbol">)</a>
    <a id="11432" class="Keyword">rewrite</a> <a id="11440" href="Monoids.html#5566" class="Function">identityʳ</a> <a id="11450" href="Monoids.html#11421" class="Bound">a</a> <a id="11452" class="Keyword">rewrite</a> <a id="11460" href="Monoids.html#5566" class="Function">identityʳ</a> <a id="11470" href="Monoids.html#11425" class="Bound">b</a> <a id="11472" class="Symbol">=</a> <a id="11474" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>

<a id="11480" class="Keyword">module</a> <a id="11487" href="Monoids.html#11487" class="Module">_</a> <a id="11489" class="Keyword">where</a>
  <a id="11497" class="Keyword">instance</a> <a id="11506" href="Monoids.html#11506" class="Function">_</a> <a id="11508" class="Symbol">=</a> <a id="11510" href="Monoids.html#11034" class="Function">×-monoid</a> <a id="11519" href="Monoids.html#9152" class="Function">+-0</a> <a id="11523" href="Monoids.html#9532" class="Function">*-1</a>

  <a id="11530" href="Monoids.html#11530" class="Function">sum×prod</a> <a id="11539" class="Symbol">:</a> <a id="11541" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="11546" class="Symbol">(</a><a id="11547" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="11549" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="11551" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a><a id="11552" class="Symbol">)</a> <a id="11554" class="Symbol">→</a> <a id="11556" class="Symbol">(</a><a id="11557" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="11559" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="11561" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a><a id="11562" class="Symbol">)</a>
  <a id="11566" href="Monoids.html#11530" class="Function">sum×prod</a> <a id="11575" class="Symbol">=</a> <a id="11577" href="Monoids.html#7696" class="Function">foldMapList</a> <a id="11589" href="Function.Base.html#704" class="Function">id</a>

<a id="11593" href="Monoids.html#11593" class="Function">_</a> <a id="11595" class="Symbol">:</a> <a id="11597" href="Monoids.html#11530" class="Function">sum×prod</a> <a id="11606" class="Symbol">(</a><a id="11607" href="Data.List.Base.html#3703" class="Function">zip</a> <a id="11611" href="Monoids.html#7293" class="Function">numbers</a> <a id="11619" href="Monoids.html#7293" class="Function">numbers</a><a id="11626" class="Symbol">)</a> <a id="11628" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="11630" class="Symbol">(</a><a id="11631" class="Number">21</a> <a id="11634" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="11636" class="Number">720</a><a id="11639" class="Symbol">)</a>
<a id="11641" class="Symbol">_</a> <a id="11643" class="Symbol">=</a> <a id="11645" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre>
<p>Up until now we have only worked on the <code>List</code> type. This is getting a bit boring and
redundant… On top of it being boring it might make you second guess the generality of
this approach. Can we only work on lists? As you might guess this is not the case!
We can define a more general structure <code>Foldable</code> and generalize this notion to arbitrary
data structures.</p>
<pre class="Agda"><a id="Foldable"></a><a id="12028" href="Monoids.html#12028" class="Function">Foldable</a> <a id="12037" class="Symbol">:</a> <a id="12039" class="Symbol">{</a><a id="12040" href="Monoids.html#12040" class="Bound">ℓ₁</a> <a id="12043" href="Monoids.html#12043" class="Bound">ℓ₂</a> <a id="12046" class="Symbol">:</a> <a id="12048" href="Agda.Primitive.html#591" class="Postulate">Level</a><a id="12053" class="Symbol">}</a> <a id="12055" class="Symbol">→</a> <a id="12057" class="Symbol">(</a><a id="12058" href="Monoids.html#12058" class="Bound">ℓᶠ</a> <a id="12061" class="Symbol">:</a> <a id="12063" href="Agda.Primitive.html#591" class="Postulate">Level</a><a id="12068" class="Symbol">)</a> <a id="12070" class="Symbol">→</a> <a id="12072" class="Symbol">(</a><a id="12073" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="12077" href="Monoids.html#12040" class="Bound">ℓ₁</a> <a id="12080" class="Symbol">→</a> <a id="12082" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="12086" href="Monoids.html#12058" class="Bound">ℓᶠ</a><a id="12088" class="Symbol">)</a> <a id="12090" class="Symbol">→</a> <a id="12092" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="12096" class="Symbol">(</a><a id="12097" href="Monoids.html#1472" class="Primitive">lsuc</a> <a id="12102" href="Monoids.html#12040" class="Bound">ℓ₁</a> <a id="12105" href="Agda.Primitive.html#804" class="Primitive Operator">⊔</a> <a id="12107" href="Monoids.html#1472" class="Primitive">lsuc</a> <a id="12112" href="Monoids.html#12043" class="Bound">ℓ₂</a> <a id="12115" href="Agda.Primitive.html#804" class="Primitive Operator">⊔</a> <a id="12117" href="Monoids.html#12058" class="Bound">ℓᶠ</a><a id="12119" class="Symbol">)</a>
<a id="12121" href="Monoids.html#12028" class="Function">Foldable</a> <a id="12130" class="Symbol">{</a><a id="12131" class="Argument">ℓ₂</a> <a id="12134" class="Symbol">=</a> <a id="12136" href="Monoids.html#12136" class="Bound">ℓ₂</a><a id="12138" class="Symbol">}</a> <a id="12140" class="Symbol">_</a> <a id="12142" href="Monoids.html#12142" class="Bound">F</a> <a id="12144" class="Symbol">=</a> <a id="12146" class="Symbol">∀</a> <a id="12148" class="Symbol">{</a><a id="12149" href="Monoids.html#12149" class="Bound">A</a><a id="12150" class="Symbol">}</a> <a id="12152" class="Symbol">{</a><a id="12153" href="Monoids.html#12153" class="Bound">B</a> <a id="12155" class="Symbol">:</a> <a id="12157" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="12161" href="Monoids.html#12136" class="Bound">ℓ₂</a><a id="12163" class="Symbol">}</a> <a id="12165" class="Symbol">→</a> <a id="12167" class="Symbol">⦃</a> <a id="12169" href="Monoids.html#5602" class="Record">Monoid</a> <a id="12176" href="Monoids.html#12153" class="Bound">B</a> <a id="12178" class="Symbol">⦄</a> <a id="12180" class="Symbol">→</a> <a id="12182" class="Symbol">(</a><a id="12183" href="Monoids.html#12149" class="Bound">A</a> <a id="12185" class="Symbol">→</a> <a id="12187" href="Monoids.html#12153" class="Bound">B</a><a id="12188" class="Symbol">)</a> <a id="12190" class="Symbol">→</a> <a id="12192" href="Monoids.html#12142" class="Bound">F</a> <a id="12194" href="Monoids.html#12149" class="Bound">A</a> <a id="12196" class="Symbol">→</a> <a id="12198" href="Monoids.html#12153" class="Bound">B</a>


<a id="foldableList"></a><a id="12202" href="Monoids.html#12202" class="Function">foldableList</a> <a id="12215" class="Symbol">:</a> <a id="12217" href="Monoids.html#12028" class="Function">Foldable</a> <a id="12226" class="Symbol">{</a><a id="12227" href="Monoids.html#2476" class="Generalizable">ℓ</a><a id="12228" class="Symbol">}</a> <a id="12230" class="Symbol">{</a><a id="12231" href="Monoids.html#2478" class="Generalizable">ℓ₂</a><a id="12233" class="Symbol">}</a> <a id="12235" class="Symbol">_</a> <a id="12237" href="Agda.Builtin.List.html#130" class="Datatype">List</a>
<a id="12242" href="Monoids.html#12202" class="Function">foldableList</a> <a id="12255" class="Symbol">=</a> <a id="12257" href="Monoids.html#7696" class="Function">foldMapList</a>

<a id="12270" class="Keyword">module</a> <a id="12277" href="Monoids.html#12277" class="Module">_</a> <a id="12279" class="Keyword">where</a>
  <a id="12287" class="Keyword">instance</a> <a id="12296" href="Monoids.html#12296" class="Function">_</a> <a id="12298" class="Symbol">=</a> <a id="12300" href="Monoids.html#9152" class="Function">+-0</a>

  <a id="12307" href="Monoids.html#12307" class="Function">length</a> <a id="12314" class="Symbol">:</a> <a id="12316" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="12321" href="Monoids.html#2491" class="Generalizable">A</a> <a id="12323" class="Symbol">→</a> <a id="12325" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
  <a id="12329" href="Monoids.html#12307" class="Function">length</a> <a id="12336" class="Symbol">=</a> <a id="12338" href="Monoids.html#12202" class="Function">foldableList</a> <a id="12351" class="Symbol">(</a><a id="12352" href="Function.Base.html#725" class="Function">const</a> <a id="12358" class="Number">1</a><a id="12359" class="Symbol">)</a>

<a id="12362" href="Monoids.html#12362" class="Function">_</a> <a id="12364" class="Symbol">:</a> <a id="12366" href="Monoids.html#12307" class="Function">length</a> <a id="12373" href="Monoids.html#7293" class="Function">numbers</a> <a id="12381" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="12383" class="Number">6</a>
<a id="12385" class="Symbol">_</a> <a id="12387" class="Symbol">=</a> <a id="12389" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre>
<h3 id="foldable-binary-trees"><a href="#foldable-binary-trees" class="anchor fas fa-xs fa-link"></a>Foldable binary trees</h3>
<p>I claimed that we can <code>foldMap</code> over other structures than <code>List</code>. Let’s define
a simple <em>binary tree</em> data structure and show that we can use the same machinery
on <em>binary trees</em> as we have been using on <em>lists</em>.</p>
<pre class="Agda"><a id="12649" class="Keyword">data</a> <a id="BT"></a><a id="12654" href="Monoids.html#12654" class="Datatype">BT</a> <a id="12657" class="Symbol">(</a><a id="12658" href="Monoids.html#12658" class="Bound">A</a> <a id="12660" class="Symbol">:</a> <a id="12662" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="12666" href="Monoids.html#2476" class="Generalizable">ℓ</a><a id="12667" class="Symbol">)</a> <a id="12669" class="Symbol">:</a> <a id="12671" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="12675" href="Monoids.html#12666" class="Bound">ℓ</a> <a id="12677" class="Keyword">where</a>
  <a id="BT.empty"></a><a id="12685" href="Monoids.html#12685" class="InductiveConstructor">empty</a> <a id="12691" class="Symbol">:</a> <a id="12693" href="Monoids.html#12654" class="Datatype">BT</a> <a id="12696" href="Monoids.html#12658" class="Bound">A</a>
  <a id="BT.branch"></a><a id="12700" href="Monoids.html#12700" class="InductiveConstructor">branch</a> <a id="12707" class="Symbol">:</a> <a id="12709" href="Monoids.html#12654" class="Datatype">BT</a> <a id="12712" href="Monoids.html#12658" class="Bound">A</a> <a id="12714" class="Symbol">→</a> <a id="12716" href="Monoids.html#12658" class="Bound">A</a> <a id="12718" class="Symbol">→</a> <a id="12720" href="Monoids.html#12654" class="Datatype">BT</a> <a id="12723" href="Monoids.html#12658" class="Bound">A</a> <a id="12725" class="Symbol">→</a> <a id="12727" href="Monoids.html#12654" class="Datatype">BT</a> <a id="12730" href="Monoids.html#12658" class="Bound">A</a>

<a id="12733" class="Keyword">pattern</a> <a id="leaf"></a><a id="12741" href="Monoids.html#12741" class="InductiveConstructor">leaf</a> <a id="12746" href="Monoids.html#12763" class="Bound">a</a> <a id="12748" class="Symbol">=</a> <a id="12750" href="Monoids.html#12700" class="InductiveConstructor">branch</a> <a id="12757" href="Monoids.html#12685" class="InductiveConstructor">empty</a> <a id="12763" href="Monoids.html#12763" class="Bound">a</a> <a id="12765" href="Monoids.html#12685" class="InductiveConstructor">empty</a>

<a id="foldableBT"></a><a id="12772" href="Monoids.html#12772" class="Function">foldableBT</a> <a id="12783" class="Symbol">:</a> <a id="12785" href="Monoids.html#12028" class="Function">Foldable</a> <a id="12794" class="Symbol">{</a><a id="12795" href="Level.html#521" class="Function">0ℓ</a><a id="12797" class="Symbol">}</a> <a id="12799" class="Symbol">{</a><a id="12800" href="Monoids.html#2476" class="Generalizable">ℓ</a><a id="12801" class="Symbol">}</a> <a id="12803" href="Level.html#521" class="Function">0ℓ</a> <a id="12806" href="Monoids.html#12654" class="Datatype">BT</a>
<a id="12809" href="Monoids.html#12772" class="Function">foldableBT</a> <a id="12820" class="Symbol">⦃</a> <a id="12822" href="Monoids.html#12822" class="Bound">mon</a> <a id="12826" class="Symbol">⦄</a> <a id="12828" href="Monoids.html#12828" class="Bound">f</a> <a id="12830" href="Monoids.html#12685" class="InductiveConstructor">empty</a> <a id="12836" class="Symbol">=</a> <a id="12838" href="Monoids.html#5662" class="Function">ε</a>
  <a id="12842" class="Keyword">where</a> <a id="12848" class="Keyword">open</a> <a id="12853" href="Monoids.html#5602" class="Module">Monoid</a> <a id="12860" href="Monoids.html#12822" class="Bound">mon</a>
<a id="12864" href="Monoids.html#12772" class="Function">foldableBT</a> <a id="12875" class="Symbol">⦃</a> <a id="12877" href="Monoids.html#12877" class="Bound">mon</a> <a id="12881" class="Symbol">⦄</a> <a id="12883" href="Monoids.html#12883" class="Bound">f</a> <a id="12885" class="Symbol">(</a><a id="12886" href="Monoids.html#12700" class="InductiveConstructor">branch</a> <a id="12893" href="Monoids.html#12893" class="Bound">l</a> <a id="12895" href="Monoids.html#12895" class="Bound">x</a> <a id="12897" href="Monoids.html#12897" class="Bound">r</a><a id="12898" class="Symbol">)</a> <a id="12900" class="Symbol">=</a>
  <a id="12904" href="Monoids.html#12772" class="Function">foldableBT</a> <a id="12915" href="Monoids.html#12883" class="Bound">f</a> <a id="12917" href="Monoids.html#12893" class="Bound">l</a> <a id="12919" href="Monoids.html#5672" class="Function Operator">★</a> <a id="12921" href="Monoids.html#12883" class="Bound">f</a> <a id="12923" href="Monoids.html#12895" class="Bound">x</a> <a id="12925" href="Monoids.html#5672" class="Function Operator">★</a> <a id="12927" href="Monoids.html#12772" class="Function">foldableBT</a> <a id="12938" href="Monoids.html#12883" class="Bound">f</a> <a id="12940" href="Monoids.html#12897" class="Bound">r</a>
  <a id="12944" class="Keyword">where</a> <a id="12950" class="Keyword">open</a> <a id="12955" href="Monoids.html#5602" class="Module">Monoid</a> <a id="12962" href="Monoids.html#12877" class="Bound">mon</a>

<a id="tree"></a><a id="12967" href="Monoids.html#12967" class="Function">tree</a> <a id="12972" class="Symbol">:</a> <a id="12974" href="Monoids.html#12654" class="Datatype">BT</a> <a id="12977" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
<a id="12979" href="Monoids.html#12967" class="Function">tree</a> <a id="12984" class="Symbol">=</a> <a id="12986" href="Monoids.html#12700" class="InductiveConstructor">branch</a> <a id="12993" class="Symbol">(</a><a id="12994" href="Monoids.html#12700" class="InductiveConstructor">branch</a> <a id="13001" class="Symbol">(</a><a id="13002" href="Monoids.html#12741" class="InductiveConstructor">leaf</a> <a id="13007" class="Number">20</a><a id="13009" class="Symbol">)</a> <a id="13011" class="Number">30</a> <a id="13014" class="Symbol">(</a><a id="13015" href="Monoids.html#12741" class="InductiveConstructor">leaf</a> <a id="13020" class="Number">40</a><a id="13022" class="Symbol">))</a> <a id="13025" class="Number">10</a> <a id="13028" class="Symbol">(</a><a id="13029" href="Monoids.html#12741" class="InductiveConstructor">leaf</a> <a id="13034" class="Number">50</a><a id="13036" class="Symbol">)</a>

<a id="13039" class="Keyword">module</a> <a id="13046" href="Monoids.html#13046" class="Module">_</a> <a id="13048" class="Keyword">where</a>
  <a id="13056" class="Keyword">instance</a> <a id="13065" href="Monoids.html#13065" class="Function">_</a> <a id="13067" class="Symbol">=</a> <a id="13069" href="Monoids.html#9152" class="Function">+-0</a>

  <a id="13076" href="Monoids.html#13076" class="Function">t-sum</a> <a id="13082" class="Symbol">:</a> <a id="13084" href="Monoids.html#12654" class="Datatype">BT</a> <a id="13087" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="13089" class="Symbol">→</a> <a id="13091" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
  <a id="13095" href="Monoids.html#13076" class="Function">t-sum</a> <a id="13101" class="Symbol">=</a> <a id="13103" href="Monoids.html#12772" class="Function">foldableBT</a> <a id="13114" href="Function.Base.html#704" class="Function">id</a>

  <a id="13120" href="Monoids.html#13120" class="Function">size</a> <a id="13125" class="Symbol">:</a> <a id="13127" href="Monoids.html#12654" class="Datatype">BT</a> <a id="13130" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="13132" class="Symbol">→</a> <a id="13134" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
  <a id="13138" href="Monoids.html#13120" class="Function">size</a> <a id="13143" class="Symbol">=</a> <a id="13145" href="Monoids.html#12772" class="Function">foldableBT</a> <a id="13156" class="Symbol">(</a><a id="13157" href="Function.Base.html#725" class="Function">const</a> <a id="13163" class="Number">1</a><a id="13164" class="Symbol">)</a>

<a id="13167" href="Monoids.html#13167" class="Function">_</a> <a id="13169" class="Symbol">:</a> <a id="13171" href="Monoids.html#13076" class="Function">t-sum</a> <a id="13177" href="Monoids.html#12967" class="Function">tree</a> <a id="13182" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="13184" class="Number">150</a>
<a id="13188" class="Symbol">_</a> <a id="13190" class="Symbol">=</a> <a id="13192" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>

<a id="13198" href="Monoids.html#13198" class="Function">_</a> <a id="13200" class="Symbol">:</a> <a id="13202" href="Monoids.html#13120" class="Function">size</a> <a id="13207" href="Monoids.html#12967" class="Function">tree</a> <a id="13212" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="13214" class="Number">5</a>
<a id="13216" class="Symbol">_</a> <a id="13218" class="Symbol">=</a> <a id="13220" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre>
<p>In fact at this point we have gained enough generality to turn any <code>Foldable</code> to a <code>List</code>!</p>
<pre class="Agda"><a id="toList"></a><a id="13330" href="Monoids.html#13330" class="Function">toList</a> <a id="13337" class="Symbol">:</a> <a id="13339" class="Symbol">∀</a> <a id="13341" class="Symbol">{</a><a id="13342" href="Monoids.html#13342" class="Bound">ℓ</a> <a id="13344" href="Monoids.html#13344" class="Bound">F</a><a id="13345" class="Symbol">}</a> <a id="13347" class="Symbol">→</a> <a id="13349" href="Monoids.html#12028" class="Function">Foldable</a> <a id="13358" href="Monoids.html#13342" class="Bound">ℓ</a> <a id="13360" href="Monoids.html#13344" class="Bound">F</a> <a id="13362" class="Symbol">→</a> <a id="13364" href="Monoids.html#13344" class="Bound">F</a> <a id="13366" href="Monoids.html#2491" class="Generalizable">A</a> <a id="13368" class="Symbol">→</a> <a id="13370" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="13375" href="Monoids.html#2491" class="Generalizable">A</a>
<a id="13377" href="Monoids.html#13330" class="Function">toList</a> <a id="13384" href="Monoids.html#13384" class="Bound">f</a> <a id="13386" class="Symbol">=</a> <a id="13388" href="Monoids.html#13384" class="Bound">f</a> <a id="13390" class="Symbol">⦃</a> <a id="13392" href="Monoids.html#8422" class="Function">[]-monoid</a> <a id="13402" class="Symbol">⦄</a> <a id="13404" class="Symbol">(</a><a id="13405" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">_∷</a> <a id="13408" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a><a id="13410" class="Symbol">)</a>

<a id="13413" href="Monoids.html#13413" class="Function">_</a> <a id="13415" class="Symbol">:</a> <a id="13417" href="Monoids.html#13330" class="Function">toList</a> <a id="13424" href="Monoids.html#12772" class="Function">foldableBT</a> <a id="13435" href="Monoids.html#12967" class="Function">tree</a> <a id="13440" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="13442" class="Number">20</a> <a id="13445" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="13447" class="Number">30</a> <a id="13450" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="13452" class="Number">40</a> <a id="13455" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="13457" class="Number">10</a> <a id="13460" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="13462" class="Number">50</a> <a id="13465" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="13467" class="InductiveConstructor">[]</a>
<a id="13470" class="Symbol">_</a> <a id="13472" class="Symbol">=</a> <a id="13474" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre>
<p>I hope this write up convined you that <code>monoid</code> is a useful part of any programmers
toolkit. There’s so much more to talk about <code>monoids</code>, but I think this is enough for now.</p>
<p>Thanks for reading and see you next time!</p></section>
  </article>
</main>

<hr />
<br />
<footer>
  <a href="/">back</a>
  <a href="/atom.xml">atom</a>
  <a href="/rss.xml">rss</a>
</footer>
<br />

    <script async src="./js/script.js"></script>
  </body>
</html>
