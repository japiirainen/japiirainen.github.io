<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Monoids as a tool for writing composable and reusable programs</title>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="Verified definition of monoids in agda and exploration of some cool monoids." />
    
    <meta name="author" content="Joona Piirainen" />
     
    <meta name="keywords" content="agda, monoids, algebra, functional-programming, dependent-types" />
    

    <meta property="og:site_name" content="japiirainen" />
    <meta property="og:title" content="Monoids as a tool for writing composable and reusable programs" />
    <meta property="og:url" content="https://japiirainen.xyz/posts/Monoids.html" />
    <meta property="og:description" content="Verified definition of monoids in agda and exploration of some cool monoids." />
     
    <meta property="og:type" content="article" />
    

    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:site" content="japiirainen" />
    <meta property="twitter:title" content="Monoids as a tool for writing composable and reusable programs" />
    <meta property="twitter:description" content="Verified definition of monoids in agda and exploration of some cool monoids." />
     

    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="canonical" href="https://japiirainen.xyz/posts/Monoids.html" />
    <link rel="stylesheet" href="../css/default.css?2023-08-05" />
    <link rel="stylesheet" href="../css/agda.css?2023-08-05" />
    <link rel="stylesheet" href="../css/code.css?2023-08-05" />
    <script
      type="text/javascript"
      src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"
    ></script>
  </head>
  <body>
    <main>
  <article>
    <header>
      <h2>
        <a href="/">&#8592</a>
      </h2>
      <h1>
        <a href="/posts/Monoids.html">Monoids as a tool for writing composable and reusable programs</a>
      </h1>
      <div>
        <small>2023-08-05</small>
        
      </div>
    </header>
    <section><p>This time I’ll ramble about <code>monoids</code>! The reason I like <code>monoids</code> is that they they are
relatively simple mathemically, but immensly useful in programming. Every programmer has
used a number of <code>monoid</code> structures thruought their careers either knowingly or not. The goal
of this post is to show that using ideas from mathematics can be useful and even <strong><em>practical</em></strong>.</p>
<p>I will use the <code>Agda</code> programming language / proof assistant to keep us honest. Mathematical
structures like <code>monoid</code> usually come equipped with a set of <em>properties</em> or <em>laws</em> that they
should obey, and the proof assistant capabilities of <code>Agda</code> let us precisely encode these <em>properties</em>.</p>
<p>This document is a typechecked literal <code>Agda</code> document. In fact all the definitions used in this module
are hyperlinks to their definitions. You can for example click the sumbol <code>Data.Nat.Properties</code> in the code block below to
see the <em>standard-library</em> module <code>Data.Nat.Properties</code>. It is common for an <code>Agda</code> module to begin with a bunch of module headers and imports,
this one is no exception :-).</p>
<pre class="Agda"><a id="1383" class="Symbol">{-#</a> <a id="1387" class="Keyword">OPTIONS</a> <a id="1395" class="Pragma">--safe</a> <a id="1402" class="Pragma">--guardedness</a> <a id="1416" class="Pragma">--cubical-compatible</a> <a id="1437" class="Symbol">#-}</a>
<a id="1441" class="Keyword">module</a> <a id="1448" href="Monoids.html" class="Module">Monoids</a> <a id="1456" class="Keyword">where</a>

<a id="1463" class="Keyword">open</a> <a id="1468" class="Keyword">import</a> <a id="1475" href="Level.html" class="Module">Level</a> <a id="1481" class="Keyword">renaming</a> <a id="1490" class="Symbol">(</a><a id="1491" href="Agda.Primitive.html#774" class="Primitive">suc</a> <a id="1495" class="Symbol">to</a> <a id="1498" class="Primitive">lsuc</a><a id="1502" class="Symbol">)</a>
<a id="1504" class="Keyword">open</a> <a id="1509" class="Keyword">import</a> <a id="1516" href="Function.html" class="Module">Function</a> <a id="1525" class="Keyword">using</a> <a id="1531" class="Symbol">(</a><a id="1532" href="Function.Base.html#1115" class="Function Operator">_∘_</a><a id="1535" class="Symbol">;</a> <a id="1537" href="Function.Base.html#704" class="Function">id</a><a id="1539" class="Symbol">;</a> <a id="1541" href="Function.Base.html#1638" class="Function">flip</a><a id="1545" class="Symbol">;</a> <a id="1547" href="Function.Base.html#725" class="Function">const</a><a id="1552" class="Symbol">)</a>
<a id="1554" class="Keyword">open</a> <a id="1559" class="Keyword">import</a> <a id="1566" href="Data.Nat.html" class="Module">Data.Nat</a> <a id="1575" class="Keyword">using</a> <a id="1581" class="Symbol">(</a><a id="1582" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">_+_</a><a id="1585" class="Symbol">;</a> <a id="1587" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">_*_</a><a id="1590" class="Symbol">;</a> <a id="1592" href="Data.Nat.Base.html#1330" class="Function Operator">_≤ᵇ_</a><a id="1596" class="Symbol">;</a> <a id="1598" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a><a id="1599" class="Symbol">)</a>
<a id="1601" class="Keyword">open</a> <a id="1606" class="Keyword">import</a> <a id="1613" href="Data.Nat.Properties.html" class="Module">Data.Nat.Properties</a> <a id="1633" class="Keyword">using</a> <a id="1639" class="Symbol">(</a><a id="1640" href="Data.Nat.Properties.html#14455" class="Function">+-assoc</a><a id="1647" class="Symbol">;</a> <a id="1649" href="Data.Nat.Properties.html#14556" class="Function">+-identityˡ</a><a id="1660" class="Symbol">;</a> <a id="1662" href="Data.Nat.Properties.html#14611" class="Function">+-identityʳ</a><a id="1673" class="Symbol">;</a> <a id="1675" href="Data.Nat.Properties.html#22029" class="Function">*-assoc</a><a id="1682" class="Symbol">;</a> <a id="1684" href="Data.Nat.Properties.html#20929" class="Function">*-identityˡ</a><a id="1695" class="Symbol">;</a> <a id="1697" href="Data.Nat.Properties.html#20993" class="Function">*-identityʳ</a><a id="1708" class="Symbol">)</a>
<a id="1710" class="Keyword">open</a> <a id="1715" class="Keyword">import</a> <a id="1722" href="Data.Bool.html" class="Module">Data.Bool</a> <a id="1732" class="Keyword">using</a> <a id="1738" class="Symbol">(</a><a id="1739" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a><a id="1743" class="Symbol">;</a> <a id="1745" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a><a id="1749" class="Symbol">;</a> <a id="1751" href="Agda.Builtin.Bool.html#175" class="InductiveConstructor">false</a><a id="1756" class="Symbol">;</a> <a id="1758" href="Data.Bool.Base.html#995" class="Function Operator">_∧_</a><a id="1761" class="Symbol">;</a> <a id="1763" href="Data.Bool.Base.html#1053" class="Function Operator">_∨_</a><a id="1766" class="Symbol">)</a>
<a id="1768" class="Keyword">open</a> <a id="1773" class="Keyword">import</a> <a id="1780" href="Data.Bool.Properties.html" class="Module">Data.Bool.Properties</a> <a id="1801" class="Keyword">using</a> <a id="1807" class="Symbol">(</a><a id="1808" href="Data.Bool.Properties.html#8098" class="Function">∧-assoc</a><a id="1815" class="Symbol">;</a> <a id="1817" href="Data.Bool.Properties.html#5308" class="Function">∨-assoc</a><a id="1824" class="Symbol">;</a> <a id="1826" href="Data.Bool.Properties.html#8305" class="Function">∧-identityˡ</a><a id="1837" class="Symbol">;</a> <a id="1839" href="Data.Bool.Properties.html#8363" class="Function">∧-identityʳ</a><a id="1850" class="Symbol">;</a> <a id="1852" href="Data.Bool.Properties.html#5515" class="Function">∨-identityˡ</a><a id="1863" class="Symbol">;</a> <a id="1865" href="Data.Bool.Properties.html#5574" class="Function">∨-identityʳ</a><a id="1876" class="Symbol">)</a>
<a id="1878" class="Keyword">open</a> <a id="1883" class="Keyword">import</a> <a id="1890" href="Data.List.html" class="Module">Data.List</a> <a id="1900" class="Keyword">using</a> <a id="1906" class="Symbol">(</a><a id="1907" href="Agda.Builtin.List.html#130" class="Datatype">List</a><a id="1911" class="Symbol">;</a> <a id="1913" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">_∷_</a><a id="1916" class="Symbol">;</a> <a id="1918" href="Data.List.Base.html#7375" class="InductiveConstructor">[]</a><a id="1920" class="Symbol">;</a> <a id="1922" href="Data.List.Base.html#1620" class="Function">map</a><a id="1925" class="Symbol">;</a> <a id="1927" href="Data.List.Base.html#4426" class="Function">foldl</a><a id="1932" class="Symbol">;</a> <a id="1934" href="Data.List.Base.html#1943" class="Function Operator">_++_</a><a id="1938" class="Symbol">;</a> <a id="1940" href="Data.List.Base.html#3703" class="Function">zip</a><a id="1943" class="Symbol">)</a>
<a id="1945" class="Keyword">open</a> <a id="1950" class="Keyword">import</a> <a id="1957" href="Data.List.Properties.html" class="Module">Data.List.Properties</a> <a id="1978" class="Keyword">using</a> <a id="1984" class="Symbol">(</a><a id="1985" href="Data.List.Properties.html#5580" class="Function">++-assoc</a><a id="1993" class="Symbol">;</a> <a id="1995" href="Data.List.Properties.html#5704" class="Function">++-identityˡ</a><a id="2007" class="Symbol">;</a> <a id="2009" href="Data.List.Properties.html#5768" class="Function">++-identityʳ</a><a id="2021" class="Symbol">)</a>
<a id="2023" class="Keyword">open</a> <a id="2028" class="Keyword">import</a> <a id="2035" href="Data.Product.html" class="Module">Data.Product</a> <a id="2048" class="Keyword">using</a> <a id="2054" class="Symbol">(</a><a id="2055" href="Agda.Builtin.Sigma.html#148" class="Record">Σ</a><a id="2056" class="Symbol">;</a> <a id="2058" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="2063" class="Symbol">;</a> <a id="2065" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="2070" class="Symbol">;</a> <a id="2072" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">_,_</a><a id="2075" class="Symbol">;</a> <a id="2077" href="Data.Product.Base.html#1618" class="Function Operator">_×_</a><a id="2080" class="Symbol">)</a>
<a id="2082" class="Keyword">open</a> <a id="2087" class="Keyword">import</a> <a id="2094" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="2132" class="Keyword">using</a> <a id="2138" class="Symbol">(</a><a id="2139" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="2143" class="Symbol">;</a> <a id="2145" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">_≡_</a><a id="2148" class="Symbol">;</a> <a id="2150" href="Relation.Binary.PropositionalEquality.Core.html#1712" class="Function">sym</a><a id="2153" class="Symbol">)</a>
</pre>
<p>One neat feature of <code>Agda</code> is it’s <code>variable</code> blocks. They let you generalize over variables in types.
In practice a <code>variable</code> block let’s you omit a bunch of detail from definitions since you can directly
use the variables defined in the <code>variable</code> block. I think this will make since once you see it in action.</p>
<pre class="Agda"><a id="2483" class="Keyword">variable</a>
  <a id="2494" href="Monoids.html#2494" class="Generalizable">ℓ</a> <a id="2496" href="Monoids.html#2496" class="Generalizable">ℓ₂</a> <a id="2499" class="Symbol">:</a> <a id="2501" href="Agda.Primitive.html#591" class="Postulate">Level</a>
  <a id="2509" href="Monoids.html#2509" class="Generalizable">A</a> <a id="2511" class="Symbol">:</a> <a id="2513" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="2517" href="Monoids.html#2494" class="Generalizable">ℓ</a>
  <a id="2521" href="Monoids.html#2521" class="Generalizable">B</a> <a id="2523" class="Symbol">:</a> <a id="2525" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="2529" href="Monoids.html#2496" class="Generalizable">ℓ₂</a>
</pre>
<p>If we look at the definition of a <code>monoid</code>, we will find that a <code>monoid</code> is a
<code>semigroup</code> with an <em>identity element</em>. From this it is reasonable to conclude that
we should first define what is a <code>semigroup</code>. Luckily <code>semigroups</code> are a very simple
structure.</p>
<h3 id="semigroup-definition"><a href="#semigroup-definition" class="anchor fas fa-xs fa-link"></a>Semigroup definition</h3>
<p>A semigroup is a <em>set</em> <span class="math inline">\(S\)</span> together with a <em>binary operation</em> <span class="math inline">\(★\)</span> that satisfies the
<em>associative property</em>.</p>
<p><span class="math display">\[
∀ x y z ∈ S. (x ★ y) ★ z = x ★ (y ★ z)
\]</span></p>
<p>Lets encode this in <code>agda</code>. The beautiful thing about <code>agda</code> is that the encoding is pretty much <em>1:1</em> to the math above.</p>
<pre class="Agda"><a id="level-of"></a><a id="3109" href="Monoids.html#3109" class="Function">level-of</a> <a id="3118" class="Symbol">:</a> <a id="3120" class="Symbol">{</a><a id="3121" href="Monoids.html#3121" class="Bound">ℓ</a> <a id="3123" class="Symbol">:</a> <a id="3125" href="Agda.Primitive.html#591" class="Postulate">Level</a><a id="3130" class="Symbol">}</a> <a id="3132" class="Symbol">→</a> <a id="3134" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="3138" href="Monoids.html#3121" class="Bound">ℓ</a> <a id="3140" class="Symbol">→</a> <a id="3142" href="Agda.Primitive.html#591" class="Postulate">Level</a>
<a id="3148" href="Monoids.html#3109" class="Function">level-of</a> <a id="3157" class="Symbol">{</a><a id="3158" href="Monoids.html#3158" class="Bound">ℓ</a><a id="3159" class="Symbol">}</a> <a id="3161" class="Symbol">_</a> <a id="3163" class="Symbol">=</a> <a id="3165" href="Monoids.html#3158" class="Bound">ℓ</a>

<a id="3168" class="Keyword">record</a> <a id="is-semigroup"></a><a id="3175" href="Monoids.html#3175" class="Record">is-semigroup</a> <a id="3188" class="Symbol">(</a><a id="3189" href="Monoids.html#3189" class="Bound Operator">_★_</a> <a id="3193" class="Symbol">:</a> <a id="3195" href="Monoids.html#2509" class="Generalizable">A</a> <a id="3197" class="Symbol">→</a> <a id="3199" href="Monoids.html#2509" class="Generalizable">A</a> <a id="3201" class="Symbol">→</a> <a id="3203" href="Monoids.html#2509" class="Generalizable">A</a><a id="3204" class="Symbol">)</a> <a id="3206" class="Symbol">:</a> <a id="3208" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="3212" class="Symbol">(</a><a id="3213" href="Monoids.html#3109" class="Function">level-of</a> <a id="3222" href="Monoids.html#3195" class="Bound">A</a><a id="3223" class="Symbol">)</a> <a id="3225" class="Keyword">where</a>
  <a id="3233" class="Keyword">field</a>
    <a id="is-semigroup.assoc"></a><a id="3243" href="Monoids.html#3243" class="Field">assoc</a> <a id="3249" class="Symbol">:</a> <a id="3251" class="Symbol">∀</a> <a id="3253" href="Monoids.html#3253" class="Bound">x</a> <a id="3255" href="Monoids.html#3255" class="Bound">y</a> <a id="3257" href="Monoids.html#3257" class="Bound">z</a> <a id="3259" class="Symbol">→</a> <a id="3261" class="Symbol">(</a><a id="3262" href="Monoids.html#3253" class="Bound">x</a> <a id="3264" href="Monoids.html#3189" class="Bound Operator">★</a> <a id="3266" href="Monoids.html#3255" class="Bound">y</a><a id="3267" class="Symbol">)</a> <a id="3269" href="Monoids.html#3189" class="Bound Operator">★</a> <a id="3271" href="Monoids.html#3257" class="Bound">z</a> <a id="3273" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="3275" href="Monoids.html#3253" class="Bound">x</a> <a id="3277" href="Monoids.html#3189" class="Bound Operator">★</a> <a id="3279" class="Symbol">(</a><a id="3280" href="Monoids.html#3255" class="Bound">y</a> <a id="3282" href="Monoids.html#3189" class="Bound Operator">★</a> <a id="3284" href="Monoids.html#3257" class="Bound">z</a><a id="3285" class="Symbol">)</a>

<a id="3288" class="Keyword">record</a> <a id="Semigroup"></a><a id="3295" href="Monoids.html#3295" class="Record">Semigroup</a> <a id="3305" class="Symbol">(</a><a id="3306" href="Monoids.html#3306" class="Bound">A</a> <a id="3308" class="Symbol">:</a> <a id="3310" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="3314" href="Monoids.html#2494" class="Generalizable">ℓ</a><a id="3315" class="Symbol">)</a> <a id="3317" class="Symbol">:</a> <a id="3319" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="3323" href="Monoids.html#3314" class="Bound">ℓ</a> <a id="3325" class="Keyword">where</a>
  <a id="3333" class="Keyword">infixl</a> <a id="3340" class="Number">5</a> <a id="3342" href="Monoids.html#3358" class="Field Operator">_★_</a>
  <a id="3348" class="Keyword">field</a>
    <a id="Semigroup._★_"></a><a id="3358" href="Monoids.html#3358" class="Field Operator">_★_</a> <a id="3362" class="Symbol">:</a> <a id="3364" href="Monoids.html#3306" class="Bound">A</a> <a id="3366" class="Symbol">→</a> <a id="3368" href="Monoids.html#3306" class="Bound">A</a> <a id="3370" class="Symbol">→</a> <a id="3372" href="Monoids.html#3306" class="Bound">A</a>
    <a id="Semigroup.has-is-semigroup"></a><a id="3378" href="Monoids.html#3378" class="Field">has-is-semigroup</a> <a id="3395" class="Symbol">:</a> <a id="3397" href="Monoids.html#3175" class="Record">is-semigroup</a> <a id="3410" href="Monoids.html#3358" class="Field Operator">_★_</a>

  <a id="3417" class="Keyword">open</a> <a id="3422" href="Monoids.html#3175" class="Module">is-semigroup</a> <a id="3435" href="Monoids.html#3378" class="Field">has-is-semigroup</a> <a id="3452" class="Keyword">public</a>
</pre>
<p>A couple of familiar <code>semigroups</code> to programmers are the <code>∧</code> and <code>∨</code> operators
from <em>boolean algebra</em>. We can show that they conform to our definition of a <code>semigroup</code></p>
<pre class="Agda"><a id="∧-semigroup"></a><a id="3641" href="Monoids.html#3641" class="Function">∧-semigroup</a> <a id="3653" class="Symbol">:</a> <a id="3655" href="Monoids.html#3295" class="Record">Semigroup</a> <a id="3665" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
<a id="3670" href="Monoids.html#3641" class="Function">∧-semigroup</a> <a id="3682" class="Symbol">=</a> <a id="3684" class="Keyword">record</a> <a id="3691" class="Symbol">{</a> <a id="3693" href="Monoids.html#3358" class="Field Operator">_★_</a> <a id="3697" class="Symbol">=</a> <a id="3699" class="Symbol">λ</a> <a id="3701" href="Monoids.html#3701" class="Bound">x</a> <a id="3703" href="Monoids.html#3703" class="Bound">y</a> <a id="3705" class="Symbol">→</a> <a id="3707" href="Monoids.html#3701" class="Bound">x</a> <a id="3709" href="Data.Bool.Base.html#995" class="Function Operator">∧</a> <a id="3711" href="Monoids.html#3703" class="Bound">y</a> 
                     <a id="3735" class="Symbol">;</a> <a id="3737" href="Monoids.html#3378" class="Field">has-is-semigroup</a> <a id="3754" class="Symbol">=</a> <a id="3756" class="Keyword">record</a> <a id="3763" class="Symbol">{</a> <a id="3765" href="Monoids.html#3243" class="Field">assoc</a> <a id="3771" class="Symbol">=</a> <a id="3773" href="Data.Bool.Properties.html#8098" class="Function">∧-assoc</a> <a id="3781" class="Symbol">}</a> <a id="3783" class="Symbol">}</a>

<a id="∨-semigroup"></a><a id="3786" href="Monoids.html#3786" class="Function">∨-semigroup</a> <a id="3798" class="Symbol">:</a> <a id="3800" href="Monoids.html#3295" class="Record">Semigroup</a> <a id="3810" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
<a id="3815" href="Monoids.html#3786" class="Function">∨-semigroup</a> <a id="3827" class="Symbol">=</a> <a id="3829" class="Keyword">record</a> <a id="3836" class="Symbol">{</a> <a id="3838" href="Monoids.html#3358" class="Field Operator">_★_</a> <a id="3842" class="Symbol">=</a> <a id="3844" class="Symbol">λ</a> <a id="3846" href="Monoids.html#3846" class="Bound">x</a> <a id="3848" href="Monoids.html#3848" class="Bound">y</a> <a id="3850" class="Symbol">→</a> <a id="3852" href="Monoids.html#3846" class="Bound">x</a> <a id="3854" href="Data.Bool.Base.html#1053" class="Function Operator">∨</a> <a id="3856" href="Monoids.html#3848" class="Bound">y</a> 
                     <a id="3880" class="Symbol">;</a> <a id="3882" href="Monoids.html#3378" class="Field">has-is-semigroup</a> <a id="3899" class="Symbol">=</a> <a id="3901" class="Keyword">record</a> <a id="3908" class="Symbol">{</a> <a id="3910" href="Monoids.html#3243" class="Field">assoc</a> <a id="3916" class="Symbol">=</a> <a id="3918" href="Data.Bool.Properties.html#5308" class="Function">∨-assoc</a> <a id="3926" class="Symbol">}</a> <a id="3928" class="Symbol">}</a>
</pre>
<p>Now that we have defined what it means to be a <code>semigroup</code>, we can graduate to
<code>monoids</code>. Lets recall the definition first.</p>
<h3 id="monoid-definition"><a href="#monoid-definition" class="anchor fas fa-xs fa-link"></a>Monoid definition</h3>
<p>A monoid is a <em>set</em> <span class="math inline">\(S\)</span> together with a <em>binary operation</em> <span class="math inline">\(★\)</span> that satisfies the
following properties.</p>
<h4 id="associativity"><a href="#associativity" class="anchor fas fa-xs fa-link"></a>Associativity</h4>
<p><span class="math display">\[
∀ x y z ∈ S. (x ★ y) ★ z = x ★ (y ★ z)
\]</span></p>
<h4 id="identity-element"><a href="#identity-element" class="anchor fas fa-xs fa-link"></a>Identity element</h4>
<p><span class="math display">\[
∃ e ∈ S. ∀ x. e ★ a = a ★ e = a
\]</span></p>
<p>Again, it is straight forward to translate this to <code>agda</code>.</p>
<pre class="Agda"><a id="4385" class="Keyword">record</a> <a id="is-monoid"></a><a id="4392" href="Monoids.html#4392" class="Record">is-monoid</a> <a id="4402" class="Symbol">(</a><a id="4403" href="Monoids.html#4403" class="Bound Operator">_★_</a> <a id="4407" class="Symbol">:</a> <a id="4409" href="Monoids.html#2509" class="Generalizable">A</a> <a id="4411" class="Symbol">→</a> <a id="4413" href="Monoids.html#2509" class="Generalizable">A</a> <a id="4415" class="Symbol">→</a> <a id="4417" href="Monoids.html#2509" class="Generalizable">A</a><a id="4418" class="Symbol">)</a> <a id="4420" class="Symbol">(</a><a id="4421" href="Monoids.html#4421" class="Bound">ε</a> <a id="4423" class="Symbol">:</a> <a id="4425" href="Monoids.html#2509" class="Generalizable">A</a><a id="4426" class="Symbol">)</a> <a id="4428" class="Symbol">:</a> <a id="4430" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="4434" class="Symbol">(</a><a id="4435" href="Monoids.html#3109" class="Function">level-of</a> <a id="4444" href="Monoids.html#4409" class="Bound">A</a><a id="4445" class="Symbol">)</a> <a id="4447" class="Keyword">where</a>
  <a id="4455" class="Keyword">field</a>
    <a id="is-monoid.has-is-semigroup"></a><a id="4465" href="Monoids.html#4465" class="Field">has-is-semigroup</a> <a id="4482" class="Symbol">:</a> <a id="4484" href="Monoids.html#3175" class="Record">is-semigroup</a> <a id="4497" href="Monoids.html#4403" class="Bound Operator">_★_</a>

  <a id="4504" class="Keyword">open</a> <a id="4509" href="Monoids.html#3175" class="Module">is-semigroup</a> <a id="4522" href="Monoids.html#4465" class="Field">has-is-semigroup</a> <a id="4539" class="Keyword">public</a>

  <a id="4549" class="Keyword">field</a>
    <a id="is-monoid.identityˡ"></a><a id="4559" href="Monoids.html#4559" class="Field">identityˡ</a> <a id="4569" class="Symbol">:</a> <a id="4571" class="Symbol">∀</a> <a id="4573" href="Monoids.html#4573" class="Bound">x</a> <a id="4575" class="Symbol">→</a> <a id="4577" href="Monoids.html#4421" class="Bound">ε</a> <a id="4579" href="Monoids.html#4403" class="Bound Operator">★</a> <a id="4581" href="Monoids.html#4573" class="Bound">x</a> <a id="4583" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="4585" href="Monoids.html#4573" class="Bound">x</a>
    <a id="is-monoid.identityʳ"></a><a id="4591" href="Monoids.html#4591" class="Field">identityʳ</a> <a id="4601" class="Symbol">:</a> <a id="4603" class="Symbol">∀</a> <a id="4605" href="Monoids.html#4605" class="Bound">x</a> <a id="4607" class="Symbol">→</a> <a id="4609" href="Monoids.html#4605" class="Bound">x</a> <a id="4611" href="Monoids.html#4403" class="Bound Operator">★</a> <a id="4613" href="Monoids.html#4421" class="Bound">ε</a> <a id="4615" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="4617" href="Monoids.html#4605" class="Bound">x</a>

<a id="4620" class="Keyword">record</a> <a id="Monoid"></a><a id="4627" href="Monoids.html#4627" class="Record">Monoid</a> <a id="4634" class="Symbol">(</a><a id="4635" href="Monoids.html#4635" class="Bound">A</a> <a id="4637" class="Symbol">:</a> <a id="4639" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="4643" href="Monoids.html#2494" class="Generalizable">ℓ</a><a id="4644" class="Symbol">)</a> <a id="4646" class="Symbol">:</a> <a id="4648" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="4652" href="Monoids.html#4643" class="Bound">ℓ</a> <a id="4654" class="Keyword">where</a>
  <a id="4662" class="Keyword">infixl</a> <a id="4669" class="Number">5</a> <a id="4671" href="Monoids.html#4697" class="Function Operator">_★_</a>
  <a id="4677" class="Keyword">field</a>
    <a id="Monoid.ε"></a><a id="4687" href="Monoids.html#4687" class="Field">ε</a> <a id="4689" class="Symbol">:</a> <a id="4691" href="Monoids.html#4635" class="Bound">A</a>
    <a id="Monoid._★_"></a><a id="4697" href="Monoids.html#4697" class="Field Operator">_★_</a> <a id="4701" class="Symbol">:</a> <a id="4703" href="Monoids.html#4635" class="Bound">A</a> <a id="4705" class="Symbol">→</a> <a id="4707" href="Monoids.html#4635" class="Bound">A</a> <a id="4709" class="Symbol">→</a> <a id="4711" href="Monoids.html#4635" class="Bound">A</a>
    <a id="Monoid.has-is-monoid"></a><a id="4717" href="Monoids.html#4717" class="Field">has-is-monoid</a> <a id="4731" class="Symbol">:</a> <a id="4733" href="Monoids.html#4392" class="Record">is-monoid</a> <a id="4743" href="Monoids.html#4697" class="Field Operator">_★_</a> <a id="4747" href="Monoids.html#4687" class="Field">ε</a>

  <a id="4752" class="Keyword">open</a> <a id="4757" href="Monoids.html#4392" class="Module">is-monoid</a> <a id="4767" href="Monoids.html#4717" class="Field">has-is-monoid</a> <a id="4781" class="Keyword">public</a>
</pre>
<p>We can show that <code>∧</code> and <code>∨</code> are <code>monoids</code>!</p>
<pre class="Agda"><a id="∧-monoid"></a><a id="4846" href="Monoids.html#4846" class="Function">∧-monoid</a> <a id="4855" class="Symbol">:</a> <a id="4857" href="Monoids.html#4627" class="Record">Monoid</a> <a id="4864" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
<a id="4869" href="Monoids.html#4846" class="Function">∧-monoid</a> <a id="4878" class="Symbol">=</a> <a id="4880" class="Keyword">record</a> <a id="4887" class="Symbol">{</a> <a id="4889" href="Monoids.html#4687" class="Field">ε</a> <a id="4891" class="Symbol">=</a> <a id="4893" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a> 
                  <a id="4917" class="Symbol">;</a> <a id="4919" href="Monoids.html#4697" class="Field Operator">_★_</a> <a id="4923" class="Symbol">=</a> <a id="4925" href="Data.Bool.Base.html#995" class="Function Operator">_∧_</a> 
                  <a id="4948" class="Symbol">;</a> <a id="4950" href="Monoids.html#4717" class="Field">has-is-monoid</a> <a id="4964" class="Symbol">=</a> 
                    <a id="4987" class="Keyword">record</a> <a id="4994" class="Symbol">{</a> <a id="4996" href="Monoids.html#4465" class="Field">has-is-semigroup</a> <a id="5013" class="Symbol">=</a> <a id="5015" href="Monoids.html#3378" class="Field">Semigroup.has-is-semigroup</a> <a id="5042" href="Monoids.html#3641" class="Function">∧-semigroup</a>
                           <a id="5081" class="Symbol">;</a> <a id="5083" href="Monoids.html#4559" class="Field">identityˡ</a> <a id="5093" class="Symbol">=</a> <a id="5095" href="Data.Bool.Properties.html#8305" class="Function">∧-identityˡ</a>
                           <a id="5134" class="Symbol">;</a> <a id="5136" href="Monoids.html#4591" class="Field">identityʳ</a> <a id="5146" class="Symbol">=</a> <a id="5148" href="Data.Bool.Properties.html#8363" class="Function">∧-identityʳ</a> <a id="5160" class="Symbol">}</a> <a id="5162" class="Symbol">}</a>

<a id="∨-monoid"></a><a id="5165" href="Monoids.html#5165" class="Function">∨-monoid</a> <a id="5174" class="Symbol">:</a> <a id="5176" href="Monoids.html#4627" class="Record">Monoid</a> <a id="5183" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
<a id="5188" href="Monoids.html#4687" class="Field">Monoid.ε</a> <a id="5197" href="Monoids.html#5165" class="Function">∨-monoid</a> <a id="5206" class="Symbol">=</a> <a id="5208" href="Agda.Builtin.Bool.html#175" class="InductiveConstructor">false</a>
<a id="5214" href="Monoids.html#4697" class="Field Operator">Monoid._★_</a> <a id="5225" href="Monoids.html#5165" class="Function">∨-monoid</a> <a id="5234" class="Symbol">=</a> <a id="5236" href="Data.Bool.Base.html#1053" class="Function Operator">_∨_</a>
<a id="5240" href="Monoids.html#4465" class="Field">is-monoid.has-is-semigroup</a> <a id="5267" class="Symbol">(</a><a id="5268" href="Monoids.html#4717" class="Field">Monoid.has-is-monoid</a> <a id="5289" href="Monoids.html#5165" class="Function">∨-monoid</a><a id="5297" class="Symbol">)</a> <a id="5299" class="Symbol">=</a>
  <a id="5303" href="Monoids.html#3378" class="Field">Semigroup.has-is-semigroup</a> <a id="5330" href="Monoids.html#3786" class="Function">∨-semigroup</a>
<a id="5342" href="Monoids.html#4559" class="Field">is-monoid.identityˡ</a> <a id="5362" class="Symbol">(</a><a id="5363" href="Monoids.html#4717" class="Field">Monoid.has-is-monoid</a> <a id="5384" href="Monoids.html#5165" class="Function">∨-monoid</a><a id="5392" class="Symbol">)</a> <a id="5394" class="Symbol">=</a> <a id="5396" href="Data.Bool.Properties.html#5515" class="Function">∨-identityˡ</a>
<a id="5408" href="Monoids.html#4591" class="Field">is-monoid.identityʳ</a> <a id="5428" class="Symbol">(</a><a id="5429" href="Monoids.html#4717" class="Field">Monoid.has-is-monoid</a> <a id="5450" href="Monoids.html#5165" class="Function">∨-monoid</a><a id="5458" class="Symbol">)</a> <a id="5460" class="Symbol">=</a> <a id="5462" href="Data.Bool.Properties.html#5574" class="Function">∨-identityʳ</a>
</pre>
<p>I’m using proofs such as <code>∨-identityʳ</code> from the <code>standard-library</code> to keep the length of
this post reasonable. Note that you can construct <code>records</code> in agda in two ways, which
are presented above. <code>∧-monoid</code> is defined using the <code>record</code> constructor syntax. <code>∨-monoid</code>
uses something called <code>copatterns</code>, which let’s us define the fields of a record as separate
declarations in a similar way that we would give different cases for a function.</p>
<p>At this point you might not be convinced on the usefulness of all this. Let me try to change
that by showcasing a bunch of commonly used monoids and operations that can be built up from those.</p>
<p>A very common pattern when coding in a functional style is <code>mapping</code> followed by <code>folding</code>.
This pattern is also known as <code>MapReduce</code> in the distributed computing community. Let’s see an example.</p>
<pre class="Agda"><a id="numbers"></a><a id="6318" href="Monoids.html#6318" class="Function">numbers</a> <a id="6326" class="Symbol">:</a> <a id="6328" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="6333" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
<a id="6335" href="Monoids.html#6318" class="Function">numbers</a> <a id="6343" class="Symbol">=</a> <a id="6345" class="Number">1</a> <a id="6347" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="6349" class="Number">2</a> <a id="6351" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="6353" class="Number">3</a> <a id="6355" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="6357" class="Number">4</a> <a id="6359" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="6361" class="Number">5</a> <a id="6363" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="6365" class="Number">6</a> <a id="6367" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="6369" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a>

<a id="all≤5?"></a><a id="6373" href="Monoids.html#6373" class="Function">all≤5?</a> <a id="6380" class="Symbol">:</a> <a id="6382" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="6387" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="6389" class="Symbol">→</a> <a id="6391" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
<a id="6396" href="Monoids.html#6373" class="Function">all≤5?</a> <a id="6403" class="Symbol">=</a> <a id="6405" href="Data.List.Base.html#4426" class="Function">foldl</a> <a id="6411" href="Data.Bool.Base.html#995" class="Function Operator">_∧_</a> <a id="6415" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a> <a id="6420" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="6422" href="Data.List.Base.html#1620" class="Function">map</a> <a id="6426" class="Symbol">(</a><a id="6427" href="Data.Nat.Base.html#1330" class="Function Operator">_≤ᵇ</a> <a id="6431" class="Number">5</a><a id="6432" class="Symbol">)</a>

<a id="any&gt;10?"></a><a id="6435" href="Monoids.html#6435" class="Function">any&gt;10?</a> <a id="6443" class="Symbol">:</a> <a id="6445" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="6450" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="6452" class="Symbol">→</a> <a id="6454" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
<a id="6459" href="Monoids.html#6435" class="Function">any&gt;10?</a> <a id="6467" class="Symbol">=</a> <a id="6469" href="Data.List.Base.html#4426" class="Function">foldl</a> <a id="6475" href="Data.Bool.Base.html#1053" class="Function Operator">_∨_</a> <a id="6479" href="Agda.Builtin.Bool.html#175" class="InductiveConstructor">false</a> <a id="6485" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="6487" href="Data.List.Base.html#1620" class="Function">map</a> <a id="6491" class="Symbol">(</a><a id="6492" class="Number">11</a> <a id="6495" href="Data.Nat.Base.html#1330" class="Function Operator">≤ᵇ_</a><a id="6498" class="Symbol">)</a>

<a id="6501" href="Monoids.html#6501" class="Function">_</a> <a id="6503" class="Symbol">:</a> <a id="6505" href="Monoids.html#6373" class="Function">all≤5?</a> <a id="6512" href="Monoids.html#6318" class="Function">numbers</a> <a id="6520" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="6522" href="Agda.Builtin.Bool.html#175" class="InductiveConstructor">false</a>
<a id="6528" class="Symbol">_</a> <a id="6530" class="Symbol">=</a> <a id="6532" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>

<a id="6538" href="Monoids.html#6538" class="Function">_</a> <a id="6540" class="Symbol">:</a> <a id="6542" href="Monoids.html#6435" class="Function">any&gt;10?</a> <a id="6550" class="Symbol">(</a><a id="6551" class="Number">11</a> <a id="6554" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="6556" href="Monoids.html#6318" class="Function">numbers</a><a id="6563" class="Symbol">)</a> <a id="6565" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="6567" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a>
<a id="6572" class="Symbol">_</a> <a id="6574" class="Symbol">=</a> <a id="6576" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre>
<p>We can easily generalize this notion of <code>mapping</code> and then <code>folding</code> by a clever use
of the structure provided by a <code>monoid</code>.</p>
<pre class="Agda"><a id="foldMapList"></a><a id="6721" href="Monoids.html#6721" class="Function">foldMapList</a> <a id="6733" class="Symbol">:</a> <a id="6735" class="Symbol">⦃</a> <a id="6737" href="Monoids.html#4627" class="Record">Monoid</a> <a id="6744" href="Monoids.html#2521" class="Generalizable">B</a> <a id="6746" class="Symbol">⦄</a> <a id="6748" class="Symbol">→</a> <a id="6750" class="Symbol">(</a><a id="6751" href="Monoids.html#2509" class="Generalizable">A</a> <a id="6753" class="Symbol">→</a> <a id="6755" href="Monoids.html#2521" class="Generalizable">B</a><a id="6756" class="Symbol">)</a> <a id="6758" class="Symbol">→</a> <a id="6760" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="6765" href="Monoids.html#2509" class="Generalizable">A</a> <a id="6767" class="Symbol">→</a> <a id="6769" href="Monoids.html#2521" class="Generalizable">B</a>
<a id="6771" href="Monoids.html#6721" class="Function">foldMapList</a> <a id="6783" class="Symbol">⦃</a> <a id="6785" href="Monoids.html#6785" class="Bound">mon</a> <a id="6789" class="Symbol">⦄</a> <a id="6791" href="Monoids.html#6791" class="Bound">f</a> <a id="6793" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="6796" class="Symbol">=</a> <a id="6798" href="Monoids.html#4687" class="Function">ε</a>
  <a id="6802" class="Keyword">where</a> <a id="6808" class="Keyword">open</a> <a id="6813" href="Monoids.html#4627" class="Module">Monoid</a> <a id="6820" href="Monoids.html#6785" class="Bound">mon</a>
<a id="6824" href="Monoids.html#6721" class="Function">foldMapList</a> <a id="6836" class="Symbol">⦃</a> <a id="6838" href="Monoids.html#6838" class="Bound">mon</a> <a id="6842" class="Symbol">⦄</a> <a id="6844" href="Monoids.html#6844" class="Bound">f</a> <a id="6846" class="Symbol">(</a><a id="6847" href="Monoids.html#6847" class="Bound">x</a> <a id="6849" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="6851" href="Monoids.html#6851" class="Bound">xs</a><a id="6853" class="Symbol">)</a> <a id="6855" class="Symbol">=</a> <a id="6857" href="Monoids.html#6844" class="Bound">f</a> <a id="6859" href="Monoids.html#6847" class="Bound">x</a> <a id="6861" href="Monoids.html#4697" class="Function Operator">★</a> <a id="6863" href="Monoids.html#6721" class="Function">foldMapList</a> <a id="6875" href="Monoids.html#6844" class="Bound">f</a> <a id="6877" href="Monoids.html#6851" class="Bound">xs</a>
  <a id="6882" class="Keyword">where</a> <a id="6888" class="Keyword">open</a> <a id="6893" href="Monoids.html#4627" class="Module">Monoid</a> <a id="6900" href="Monoids.html#6838" class="Bound">mon</a>

<a id="6905" class="Keyword">module</a> <a id="6912" href="Monoids.html#6912" class="Module">_</a> <a id="6914" class="Keyword">where</a>
  <a id="6922" class="Keyword">instance</a> <a id="6931" href="Monoids.html#6931" class="Function">_</a> <a id="6933" class="Symbol">=</a> <a id="6935" href="Monoids.html#4846" class="Function">∧-monoid</a>

  <a id="6947" href="Monoids.html#6947" class="Function">all?</a> <a id="6952" class="Symbol">:</a> <a id="6954" class="Symbol">(</a><a id="6955" href="Monoids.html#2509" class="Generalizable">A</a> <a id="6957" class="Symbol">→</a> <a id="6959" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a><a id="6963" class="Symbol">)</a> <a id="6965" class="Symbol">→</a> <a id="6967" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="6972" href="Monoids.html#2509" class="Generalizable">A</a> <a id="6974" class="Symbol">→</a> <a id="6976" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
  <a id="6983" href="Monoids.html#6947" class="Function">all?</a> <a id="6988" class="Symbol">=</a> <a id="6990" href="Monoids.html#6721" class="Function">foldMapList</a>

<a id="7003" class="Keyword">module</a> <a id="7010" href="Monoids.html#7010" class="Module">_</a> <a id="7012" class="Keyword">where</a>
  <a id="7020" class="Keyword">instance</a> <a id="7029" href="Monoids.html#7029" class="Function">_</a> <a id="7031" class="Symbol">=</a> <a id="7033" href="Monoids.html#5165" class="Function">∨-monoid</a>

  <a id="7045" href="Monoids.html#7045" class="Function">any?</a> <a id="7050" class="Symbol">:</a> <a id="7052" class="Symbol">(</a><a id="7053" href="Monoids.html#2509" class="Generalizable">A</a> <a id="7055" class="Symbol">→</a> <a id="7057" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a><a id="7061" class="Symbol">)</a> <a id="7063" class="Symbol">→</a> <a id="7065" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="7070" href="Monoids.html#2509" class="Generalizable">A</a> <a id="7072" class="Symbol">→</a> <a id="7074" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
  <a id="7081" href="Monoids.html#7045" class="Function">any?</a> <a id="7086" class="Symbol">=</a> <a id="7088" href="Monoids.html#6721" class="Function">foldMapList</a>

<a id="7101" href="Monoids.html#7101" class="Function">_</a> <a id="7103" class="Symbol">:</a> <a id="7105" href="Monoids.html#6947" class="Function">all?</a> <a id="7110" class="Symbol">(</a><a id="7111" href="Data.Nat.Base.html#1330" class="Function Operator">_≤ᵇ</a> <a id="7115" class="Number">5</a><a id="7116" class="Symbol">)</a> <a id="7118" href="Monoids.html#6318" class="Function">numbers</a> <a id="7126" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="7128" href="Agda.Builtin.Bool.html#175" class="InductiveConstructor">false</a>
<a id="7134" class="Symbol">_</a> <a id="7136" class="Symbol">=</a> <a id="7138" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>

<a id="7144" href="Monoids.html#7144" class="Function">_</a> <a id="7146" class="Symbol">:</a> <a id="7148" href="Monoids.html#7045" class="Function">any?</a> <a id="7153" class="Symbol">(</a><a id="7154" class="Number">11</a> <a id="7157" href="Data.Nat.Base.html#1330" class="Function Operator">≤ᵇ_</a><a id="7160" class="Symbol">)</a> <a id="7162" class="Symbol">(</a><a id="7163" class="Number">11</a> <a id="7166" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7168" href="Monoids.html#6318" class="Function">numbers</a><a id="7175" class="Symbol">)</a> <a id="7177" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="7179" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a>
<a id="7184" class="Symbol">_</a> <a id="7186" class="Symbol">=</a> <a id="7188" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre>
<p>Pretty neat? I think so! We can do a bunch of other cool things too, we can for example
flatten nested lists.</p>
<pre class="Agda"><a id="[]-semigroup"></a><a id="7317" href="Monoids.html#7317" class="Function">[]-semigroup</a> <a id="7330" class="Symbol">:</a> <a id="7332" href="Monoids.html#3295" class="Record">Semigroup</a> <a id="7342" class="Symbol">(</a><a id="7343" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="7348" href="Monoids.html#2509" class="Generalizable">A</a><a id="7349" class="Symbol">)</a>
<a id="7351" href="Monoids.html#3358" class="Field Operator">Semigroup._★_</a> <a id="7365" href="Monoids.html#7317" class="Function">[]-semigroup</a> <a id="7378" class="Symbol">=</a> <a id="7380" href="Data.List.Base.html#1943" class="Function Operator">_++_</a>
<a id="7385" href="Monoids.html#3243" class="Field">is-semigroup.assoc</a> <a id="7404" class="Symbol">(</a><a id="7405" href="Monoids.html#3378" class="Field">Semigroup.has-is-semigroup</a> <a id="7432" href="Monoids.html#7317" class="Function">[]-semigroup</a><a id="7444" class="Symbol">)</a> <a id="7446" class="Symbol">=</a> <a id="7448" href="Data.List.Properties.html#5580" class="Function">++-assoc</a>

<a id="[]-monoid"></a><a id="7458" href="Monoids.html#7458" class="Function">[]-monoid</a> <a id="7468" class="Symbol">:</a> <a id="7470" href="Monoids.html#4627" class="Record">Monoid</a> <a id="7477" class="Symbol">(</a><a id="7478" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="7483" href="Monoids.html#2509" class="Generalizable">A</a><a id="7484" class="Symbol">)</a>
<a id="7486" href="Monoids.html#4687" class="Field">Monoid.ε</a> <a id="7495" href="Monoids.html#7458" class="Function">[]-monoid</a> <a id="7505" class="Symbol">=</a> <a id="7507" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a>
<a id="7510" href="Monoids.html#4697" class="Field Operator">Monoid._★_</a> <a id="7521" href="Monoids.html#7458" class="Function">[]-monoid</a> <a id="7531" class="Symbol">=</a> <a id="7533" href="Data.List.Base.html#1943" class="Function Operator">_++_</a>
<a id="7538" href="Monoids.html#4465" class="Field">is-monoid.has-is-semigroup</a> <a id="7565" class="Symbol">(</a><a id="7566" href="Monoids.html#4717" class="Field">Monoid.has-is-monoid</a> <a id="7587" href="Monoids.html#7458" class="Function">[]-monoid</a><a id="7596" class="Symbol">)</a> <a id="7598" class="Symbol">=</a>
  <a id="7602" href="Monoids.html#3378" class="Field">Semigroup.has-is-semigroup</a> <a id="7629" href="Monoids.html#7317" class="Function">[]-semigroup</a>
<a id="7642" href="Monoids.html#4559" class="Field">is-monoid.identityˡ</a> <a id="7662" class="Symbol">(</a><a id="7663" href="Monoids.html#4717" class="Field">Monoid.has-is-monoid</a> <a id="7684" href="Monoids.html#7458" class="Function">[]-monoid</a><a id="7693" class="Symbol">)</a> <a id="7695" class="Symbol">=</a> <a id="7697" href="Data.List.Properties.html#5704" class="Function">++-identityˡ</a>
<a id="7710" href="Monoids.html#4591" class="Field">is-monoid.identityʳ</a> <a id="7730" class="Symbol">(</a><a id="7731" href="Monoids.html#4717" class="Field">Monoid.has-is-monoid</a> <a id="7752" href="Monoids.html#7458" class="Function">[]-monoid</a><a id="7761" class="Symbol">)</a> <a id="7763" class="Symbol">=</a> <a id="7765" href="Data.List.Properties.html#5768" class="Function">++-identityʳ</a>

<a id="7779" class="Keyword">module</a> <a id="7786" href="Monoids.html#7786" class="Module">_</a> <a id="7788" class="Keyword">where</a>
  <a id="7796" class="Keyword">instance</a> <a id="7805" href="Monoids.html#7805" class="Function">_</a> <a id="7807" class="Symbol">=</a> <a id="7809" href="Monoids.html#7458" class="Function">[]-monoid</a>

  <a id="7822" href="Monoids.html#7822" class="Function">flatten</a> <a id="7830" class="Symbol">:</a> <a id="7832" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="7837" class="Symbol">(</a><a id="7838" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="7843" href="Monoids.html#2509" class="Generalizable">A</a><a id="7844" class="Symbol">)</a> <a id="7846" class="Symbol">→</a> <a id="7848" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="7853" href="Monoids.html#2509" class="Generalizable">A</a>
  <a id="7857" href="Monoids.html#7822" class="Function">flatten</a> <a id="7865" class="Symbol">=</a> <a id="7867" href="Monoids.html#6721" class="Function">foldMapList</a> <a id="7879" href="Function.Base.html#704" class="Function">id</a>

<a id="7883" href="Monoids.html#7883" class="Function">_</a> <a id="7885" class="Symbol">:</a> <a id="7887" href="Monoids.html#7822" class="Function">flatten</a> <a id="7895" class="Symbol">((</a><a id="7897" class="Number">1</a> <a id="7899" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7901" class="Number">2</a> <a id="7903" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7905" class="InductiveConstructor">[]</a><a id="7907" class="Symbol">)</a> <a id="7909" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7911" class="Symbol">(</a><a id="7912" class="Number">3</a> <a id="7914" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7916" class="Number">4</a> <a id="7918" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7920" class="InductiveConstructor">[]</a><a id="7922" class="Symbol">)</a> <a id="7924" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7926" class="InductiveConstructor">[]</a><a id="7928" class="Symbol">)</a> <a id="7930" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="7932" class="Number">1</a> <a id="7934" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7936" class="Number">2</a> <a id="7938" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7940" class="Number">3</a> <a id="7942" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7944" class="Number">4</a> <a id="7946" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7948" class="InductiveConstructor">[]</a>
<a id="7951" class="Symbol">_</a> <a id="7953" class="Symbol">=</a> <a id="7955" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre>
<p>Or take sums and products. Excuse the mostly boring <code>semigroup</code> and <code>monoid</code> instance declarations.</p>
<pre class="Agda"><a id="+-semi"></a><a id="8074" href="Monoids.html#8074" class="Function">+-semi</a> <a id="8081" class="Symbol">:</a> <a id="8083" href="Monoids.html#3295" class="Record">Semigroup</a> <a id="8093" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
<a id="8095" href="Monoids.html#3358" class="Field Operator">Semigroup._★_</a> <a id="8109" href="Monoids.html#8074" class="Function">+-semi</a> <a id="8116" class="Symbol">=</a> <a id="8118" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">_+_</a>
<a id="8122" href="Monoids.html#3243" class="Field">is-semigroup.assoc</a> <a id="8141" class="Symbol">(</a><a id="8142" href="Monoids.html#3378" class="Field">Semigroup.has-is-semigroup</a> <a id="8169" href="Monoids.html#8074" class="Function">+-semi</a><a id="8175" class="Symbol">)</a> <a id="8177" class="Symbol">=</a> <a id="8179" href="Data.Nat.Properties.html#14455" class="Function">+-assoc</a>

<a id="+-0"></a><a id="8188" href="Monoids.html#8188" class="Function">+-0</a> <a id="8192" class="Symbol">:</a> <a id="8194" href="Monoids.html#4627" class="Record">Monoid</a> <a id="8201" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
<a id="8203" href="Monoids.html#4687" class="Field">Monoid.ε</a> <a id="8212" href="Monoids.html#8188" class="Function">+-0</a> <a id="8216" class="Symbol">=</a> <a id="8218" class="Number">0</a>
<a id="8220" href="Monoids.html#4697" class="Field Operator">Monoid._★_</a> <a id="8231" href="Monoids.html#8188" class="Function">+-0</a> <a id="8235" class="Symbol">=</a> <a id="8237" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">_+_</a>
<a id="8241" href="Monoids.html#4465" class="Field">is-monoid.has-is-semigroup</a> <a id="8268" class="Symbol">(</a><a id="8269" href="Monoids.html#4717" class="Field">Monoid.has-is-monoid</a> <a id="8290" href="Monoids.html#8188" class="Function">+-0</a><a id="8293" class="Symbol">)</a> <a id="8295" class="Symbol">=</a> <a id="8297" href="Monoids.html#3378" class="Field">Semigroup.has-is-semigroup</a> <a id="8324" href="Monoids.html#8074" class="Function">+-semi</a>
<a id="8331" href="Monoids.html#4559" class="Field">is-monoid.identityˡ</a> <a id="8351" class="Symbol">(</a><a id="8352" href="Monoids.html#4717" class="Field">Monoid.has-is-monoid</a> <a id="8373" href="Monoids.html#8188" class="Function">+-0</a><a id="8376" class="Symbol">)</a> <a id="8378" class="Symbol">=</a> <a id="8380" href="Data.Nat.Properties.html#14556" class="Function">+-identityˡ</a>
<a id="8392" href="Monoids.html#4591" class="Field">is-monoid.identityʳ</a> <a id="8412" class="Symbol">(</a><a id="8413" href="Monoids.html#4717" class="Field">Monoid.has-is-monoid</a> <a id="8434" href="Monoids.html#8188" class="Function">+-0</a><a id="8437" class="Symbol">)</a> <a id="8439" class="Symbol">=</a> <a id="8441" href="Data.Nat.Properties.html#14611" class="Function">+-identityʳ</a>

<a id="*-semi"></a><a id="8454" href="Monoids.html#8454" class="Function">*-semi</a> <a id="8461" class="Symbol">:</a> <a id="8463" href="Monoids.html#3295" class="Record">Semigroup</a> <a id="8473" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
<a id="8475" href="Monoids.html#3358" class="Field Operator">Semigroup._★_</a> <a id="8489" href="Monoids.html#8454" class="Function">*-semi</a> <a id="8496" class="Symbol">=</a> <a id="8498" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">_*_</a>
<a id="8502" href="Monoids.html#3243" class="Field">is-semigroup.assoc</a> <a id="8521" class="Symbol">(</a><a id="8522" href="Monoids.html#3378" class="Field">Semigroup.has-is-semigroup</a> <a id="8549" href="Monoids.html#8454" class="Function">*-semi</a><a id="8555" class="Symbol">)</a> <a id="8557" class="Symbol">=</a> <a id="8559" href="Data.Nat.Properties.html#22029" class="Function">*-assoc</a>

<a id="*-1"></a><a id="8568" href="Monoids.html#8568" class="Function">*-1</a> <a id="8572" class="Symbol">:</a> <a id="8574" href="Monoids.html#4627" class="Record">Monoid</a> <a id="8581" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
<a id="8583" href="Monoids.html#4687" class="Field">Monoid.ε</a> <a id="8592" href="Monoids.html#8568" class="Function">*-1</a> <a id="8596" class="Symbol">=</a> <a id="8598" class="Number">1</a>
<a id="8600" href="Monoids.html#4697" class="Field Operator">Monoid._★_</a> <a id="8611" href="Monoids.html#8568" class="Function">*-1</a> <a id="8615" class="Symbol">=</a> <a id="8617" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">_*_</a>
<a id="8621" href="Monoids.html#4465" class="Field">is-monoid.has-is-semigroup</a> <a id="8648" class="Symbol">(</a><a id="8649" href="Monoids.html#4717" class="Field">Monoid.has-is-monoid</a> <a id="8670" href="Monoids.html#8568" class="Function">*-1</a><a id="8673" class="Symbol">)</a> <a id="8675" class="Symbol">=</a> <a id="8677" href="Monoids.html#3378" class="Field">Semigroup.has-is-semigroup</a> <a id="8704" href="Monoids.html#8454" class="Function">*-semi</a>
<a id="8711" href="Monoids.html#4559" class="Field">is-monoid.identityˡ</a> <a id="8731" class="Symbol">(</a><a id="8732" href="Monoids.html#4717" class="Field">Monoid.has-is-monoid</a> <a id="8753" href="Monoids.html#8568" class="Function">*-1</a><a id="8756" class="Symbol">)</a> <a id="8758" class="Symbol">=</a> <a id="8760" href="Data.Nat.Properties.html#20929" class="Function">*-identityˡ</a>
<a id="8772" href="Monoids.html#4591" class="Field">is-monoid.identityʳ</a> <a id="8792" class="Symbol">(</a><a id="8793" href="Monoids.html#4717" class="Field">Monoid.has-is-monoid</a> <a id="8814" href="Monoids.html#8568" class="Function">*-1</a><a id="8817" class="Symbol">)</a> <a id="8819" class="Symbol">=</a> <a id="8821" href="Data.Nat.Properties.html#20993" class="Function">*-identityʳ</a>

<a id="8834" class="Keyword">module</a> <a id="8841" href="Monoids.html#8841" class="Module">_</a> <a id="8843" class="Keyword">where</a>
  <a id="8851" class="Keyword">instance</a> <a id="8860" href="Monoids.html#8860" class="Function">_</a> <a id="8862" class="Symbol">=</a> <a id="8864" href="Monoids.html#8188" class="Function">+-0</a>

  <a id="8871" href="Monoids.html#8871" class="Function">sum</a> <a id="8875" class="Symbol">:</a> <a id="8877" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="8882" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="8884" class="Symbol">→</a> <a id="8886" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
  <a id="8890" href="Monoids.html#8871" class="Function">sum</a> <a id="8894" class="Symbol">=</a> <a id="8896" href="Monoids.html#6721" class="Function">foldMapList</a> <a id="8908" href="Function.Base.html#704" class="Function">id</a>

<a id="8912" href="Monoids.html#8912" class="Function">_</a> <a id="8914" class="Symbol">:</a> <a id="8916" href="Monoids.html#8871" class="Function">sum</a> <a id="8920" href="Monoids.html#6318" class="Function">numbers</a> <a id="8928" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="8930" class="Number">21</a>
<a id="8933" class="Symbol">_</a> <a id="8935" class="Symbol">=</a> <a id="8937" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>

<a id="8943" class="Keyword">module</a> <a id="8950" href="Monoids.html#8950" class="Module">_</a> <a id="8952" class="Keyword">where</a>
  <a id="8960" class="Keyword">instance</a> <a id="8969" href="Monoids.html#8969" class="Function">_</a> <a id="8971" class="Symbol">=</a> <a id="8973" href="Monoids.html#8568" class="Function">*-1</a>

  <a id="8980" href="Monoids.html#8980" class="Function">product</a> <a id="8988" class="Symbol">=</a> <a id="8990" href="Monoids.html#6721" class="Function">foldMapList</a> <a id="9002" href="Function.Base.html#704" class="Function">id</a>

<a id="9006" href="Monoids.html#9006" class="Function">_</a> <a id="9008" class="Symbol">:</a> <a id="9010" href="Monoids.html#8980" class="Function">product</a> <a id="9018" href="Monoids.html#6318" class="Function">numbers</a> <a id="9026" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="9028" class="Number">720</a>
<a id="9032" class="Symbol">_</a> <a id="9034" class="Symbol">=</a> <a id="9036" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre>
<p>An interesting <code>monoid</code> is the <code>dual</code> of some other <code>monoid</code>.</p>
<pre class="Agda"><a id="9117" class="Keyword">module</a> <a id="9124" href="Monoids.html#9124" class="Module">_</a> <a id="9126" class="Symbol">(</a><a id="9127" href="Monoids.html#9127" class="Bound">mon</a> <a id="9131" class="Symbol">:</a> <a id="9133" href="Monoids.html#4627" class="Record">Monoid</a> <a id="9140" href="Monoids.html#2509" class="Generalizable">A</a><a id="9141" class="Symbol">)</a> <a id="9143" class="Keyword">where</a>
  <a id="9151" class="Keyword">open</a> <a id="9156" href="Monoids.html#4627" class="Module">Monoid</a> <a id="9163" href="Monoids.html#9127" class="Bound">mon</a>

  <a id="9170" href="Monoids.html#9170" class="Function">dual</a> <a id="9175" class="Symbol">:</a> <a id="9177" href="Monoids.html#4627" class="Record">Monoid</a> <a id="9184" href="Monoids.html#9140" class="Bound">A</a>
  <a id="9188" href="Monoids.html#4687" class="Field">Monoid.ε</a> <a id="9197" href="Monoids.html#9170" class="Function">dual</a> <a id="9202" class="Symbol">=</a> <a id="9204" href="Monoids.html#4687" class="Field">ε</a>
  <a id="9208" href="Monoids.html#4697" class="Field Operator">Monoid._★_</a> <a id="9219" href="Monoids.html#9170" class="Function">dual</a> <a id="9224" class="Symbol">=</a> <a id="9226" href="Function.Base.html#1638" class="Function">flip</a> <a id="9231" href="Monoids.html#4697" class="Field Operator">_★_</a>
  <a id="9237" href="Monoids.html#3243" class="Field">is-semigroup.assoc</a> <a id="9256" class="Symbol">(</a><a id="9257" href="Monoids.html#4465" class="Field">is-monoid.has-is-semigroup</a> <a id="9284" class="Symbol">(</a><a id="9285" href="Monoids.html#4717" class="Field">Monoid.has-is-monoid</a> <a id="9306" href="Monoids.html#9170" class="Function">dual</a><a id="9310" class="Symbol">))</a>
    <a id="9317" href="Monoids.html#9317" class="Bound">x</a> <a id="9319" href="Monoids.html#9319" class="Bound">y</a> <a id="9321" href="Monoids.html#9321" class="Bound">z</a> <a id="9323" class="Symbol">=</a> <a id="9325" href="Relation.Binary.PropositionalEquality.Core.html#1712" class="Function">sym</a> <a id="9329" class="Symbol">(</a><a id="9330" href="Monoids.html#3243" class="Function">assoc</a> <a id="9336" href="Monoids.html#9321" class="Bound">z</a> <a id="9338" href="Monoids.html#9319" class="Bound">y</a> <a id="9340" href="Monoids.html#9317" class="Bound">x</a><a id="9341" class="Symbol">)</a>
  <a id="9345" href="Monoids.html#4559" class="Field">is-monoid.identityˡ</a> <a id="9365" class="Symbol">(</a><a id="9366" href="Monoids.html#4717" class="Field">Monoid.has-is-monoid</a> <a id="9387" href="Monoids.html#9170" class="Function">dual</a><a id="9391" class="Symbol">)</a> <a id="9393" class="Symbol">=</a> <a id="9395" href="Monoids.html#4591" class="Function">identityʳ</a>
  <a id="9407" href="Monoids.html#4591" class="Field">is-monoid.identityʳ</a> <a id="9427" class="Symbol">(</a><a id="9428" href="Monoids.html#4717" class="Field">Monoid.has-is-monoid</a> <a id="9449" href="Monoids.html#9170" class="Function">dual</a><a id="9453" class="Symbol">)</a> <a id="9455" class="Symbol">=</a> <a id="9457" href="Monoids.html#4559" class="Function">identityˡ</a>

<a id="reverse"></a><a id="9468" href="Monoids.html#9468" class="Function">reverse</a> <a id="9476" class="Symbol">:</a> <a id="9478" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="9483" href="Monoids.html#2509" class="Generalizable">A</a> <a id="9485" class="Symbol">→</a> <a id="9487" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="9492" href="Monoids.html#2509" class="Generalizable">A</a>
<a id="9494" href="Monoids.html#9468" class="Function">reverse</a> <a id="9502" class="Symbol">=</a> <a id="9504" href="Monoids.html#6721" class="Function">foldMapList</a> <a id="9516" class="Symbol">⦃</a> <a id="9518" href="Monoids.html#9170" class="Function">dual</a> <a id="9523" class="Symbol">(</a><a id="9524" href="Monoids.html#7458" class="Function">[]-monoid</a><a id="9533" class="Symbol">)</a> <a id="9535" class="Symbol">⦄</a> <a id="9537" class="Symbol">(</a><a id="9538" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">_∷</a> <a id="9541" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a><a id="9543" class="Symbol">)</a>

<a id="9546" href="Monoids.html#9546" class="Function">_</a> <a id="9548" class="Symbol">:</a> <a id="9550" href="Monoids.html#9468" class="Function">reverse</a> <a id="9558" href="Monoids.html#6318" class="Function">numbers</a> <a id="9566" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="9568" class="Symbol">(</a><a id="9569" class="Number">6</a> <a id="9571" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="9573" class="Number">5</a> <a id="9575" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="9577" class="Number">4</a> <a id="9579" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="9581" class="Number">3</a> <a id="9583" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="9585" class="Number">2</a> <a id="9587" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="9589" class="Number">1</a> <a id="9591" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="9593" class="InductiveConstructor">[]</a><a id="9595" class="Symbol">)</a>
<a id="9597" class="Symbol">_</a> <a id="9599" class="Symbol">=</a> <a id="9601" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre>
<p>Another example of a <code>monoid</code> built of other <code>monoids</code> is the <em>cartetesian product</em> or <code>_×_</code>.</p>
<pre class="Agda"><a id="9714" class="Keyword">module</a> <a id="9721" href="Monoids.html#9721" class="Module">_</a> <a id="9723" class="Symbol">(</a><a id="9724" href="Monoids.html#9724" class="Bound">ma</a> <a id="9727" class="Symbol">:</a> <a id="9729" href="Monoids.html#4627" class="Record">Monoid</a> <a id="9736" href="Monoids.html#2509" class="Generalizable">A</a><a id="9737" class="Symbol">)</a> <a id="9739" class="Symbol">(</a><a id="9740" href="Monoids.html#9740" class="Bound">mb</a> <a id="9743" class="Symbol">:</a> <a id="9745" href="Monoids.html#4627" class="Record">Monoid</a> <a id="9752" href="Monoids.html#2521" class="Generalizable">B</a><a id="9753" class="Symbol">)</a> <a id="9755" class="Keyword">where</a>

  <a id="9764" class="Keyword">open</a> <a id="9769" href="Monoids.html#4627" class="Module">Monoid</a> <a id="9776" class="Symbol">⦃</a> <a id="9778" class="Symbol">...</a> <a id="9782" class="Symbol">⦄</a>

  <a id="9787" class="Keyword">instance</a>
    <a id="9800" href="Monoids.html#9800" class="Function">_</a> <a id="9802" class="Symbol">=</a> <a id="9804" href="Monoids.html#9724" class="Bound">ma</a>
    <a id="9811" href="Monoids.html#9811" class="Function">_</a> <a id="9813" class="Symbol">=</a> <a id="9815" href="Monoids.html#9740" class="Bound">mb</a>

  <a id="9821" href="Monoids.html#9821" class="Function">×-semigroup</a> <a id="9833" class="Symbol">:</a> <a id="9835" href="Monoids.html#3295" class="Record">Semigroup</a> <a id="9845" class="Symbol">(</a><a id="9846" href="Monoids.html#9736" class="Bound">A</a> <a id="9848" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="9850" href="Monoids.html#9752" class="Bound">B</a><a id="9851" class="Symbol">)</a>
  <a id="9855" class="Symbol">(</a><a id="9856" href="Monoids.html#9821" class="Function">×-semigroup</a> <a id="9868" href="Monoids.html#3358" class="Field Operator">Semigroup.★</a> <a id="9880" class="Symbol">(</a><a id="9881" href="Monoids.html#9881" class="Bound">a</a> <a id="9883" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="9885" href="Monoids.html#9885" class="Bound">b</a><a id="9886" class="Symbol">))</a> <a id="9889" class="Symbol">(</a><a id="9890" href="Monoids.html#9890" class="Bound">a₁</a> <a id="9893" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="9895" href="Monoids.html#9895" class="Bound">b₁</a><a id="9897" class="Symbol">)</a> <a id="9899" class="Symbol">=</a> <a id="9901" href="Monoids.html#9881" class="Bound">a</a> <a id="9903" href="Monoids.html#4697" class="Field Operator">★</a> <a id="9905" href="Monoids.html#9890" class="Bound">a₁</a> <a id="9908" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="9910" href="Monoids.html#9885" class="Bound">b</a> <a id="9912" href="Monoids.html#4697" class="Field Operator">★</a> <a id="9914" href="Monoids.html#9895" class="Bound">b₁</a>
  <a id="9919" href="Monoids.html#3243" class="Field">is-semigroup.assoc</a> <a id="9938" class="Symbol">(</a><a id="9939" href="Monoids.html#3378" class="Field">Semigroup.has-is-semigroup</a> <a id="9966" href="Monoids.html#9821" class="Function">×-semigroup</a><a id="9977" class="Symbol">)</a> 
    <a id="9984" class="Symbol">(</a><a id="9985" href="Monoids.html#9985" class="Bound">a₁</a> <a id="9988" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="9990" href="Monoids.html#9990" class="Bound">b₁</a><a id="9992" class="Symbol">)</a> <a id="9994" class="Symbol">(</a><a id="9995" href="Monoids.html#9995" class="Bound">a₂</a> <a id="9998" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="10000" href="Monoids.html#10000" class="Bound">b₂</a><a id="10002" class="Symbol">)</a> <a id="10004" class="Symbol">(</a><a id="10005" href="Monoids.html#10005" class="Bound">a₃</a> <a id="10008" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="10010" href="Monoids.html#10010" class="Bound">b₃</a><a id="10012" class="Symbol">)</a> <a id="10014" class="Keyword">rewrite</a> <a id="10022" href="Monoids.html#3243" class="Function">assoc</a> <a id="10028" href="Monoids.html#9985" class="Bound">a₁</a> <a id="10031" href="Monoids.html#9995" class="Bound">a₂</a> <a id="10034" href="Monoids.html#10005" class="Bound">a₃</a> <a id="10037" class="Keyword">rewrite</a> <a id="10045" href="Monoids.html#3243" class="Function">assoc</a> <a id="10051" href="Monoids.html#9990" class="Bound">b₁</a> <a id="10054" href="Monoids.html#10000" class="Bound">b₂</a> <a id="10057" href="Monoids.html#10010" class="Bound">b₃</a> <a id="10060" class="Symbol">=</a> <a id="10062" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>

  <a id="10070" href="Monoids.html#10070" class="Function">×-monoid</a> <a id="10079" class="Symbol">:</a> <a id="10081" href="Monoids.html#4627" class="Record">Monoid</a> <a id="10088" class="Symbol">(</a><a id="10089" href="Monoids.html#9736" class="Bound">A</a> <a id="10091" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="10093" href="Monoids.html#9752" class="Bound">B</a><a id="10094" class="Symbol">)</a>
  <a id="10098" href="Monoids.html#4687" class="Field">Monoid.ε</a> <a id="10107" href="Monoids.html#10070" class="Function">×-monoid</a> <a id="10116" class="Symbol">=</a> <a id="10118" href="Monoids.html#4687" class="Field">ε</a> <a id="10120" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="10122" href="Monoids.html#4687" class="Field">ε</a>
  <a id="10126" class="Symbol">(</a><a id="10127" href="Monoids.html#10070" class="Function">×-monoid</a> <a id="10136" href="Monoids.html#4697" class="Field Operator">Monoid.★</a> <a id="10145" class="Symbol">(</a><a id="10146" href="Monoids.html#10146" class="Bound">a</a> <a id="10148" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="10150" href="Monoids.html#10150" class="Bound">b</a><a id="10151" class="Symbol">))</a> <a id="10154" class="Symbol">(</a><a id="10155" href="Monoids.html#10155" class="Bound">a₁</a> <a id="10158" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="10160" href="Monoids.html#10160" class="Bound">b₁</a><a id="10162" class="Symbol">)</a> <a id="10164" class="Symbol">=</a> <a id="10166" href="Monoids.html#10146" class="Bound">a</a> <a id="10168" href="Monoids.html#4697" class="Field Operator">★</a> <a id="10170" href="Monoids.html#10155" class="Bound">a₁</a> <a id="10173" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="10175" href="Monoids.html#10150" class="Bound">b</a> <a id="10177" href="Monoids.html#4697" class="Field Operator">★</a> <a id="10179" href="Monoids.html#10160" class="Bound">b₁</a>
  <a id="10184" href="Monoids.html#4465" class="Field">is-monoid.has-is-semigroup</a> <a id="10211" class="Symbol">(</a><a id="10212" href="Monoids.html#4717" class="Field">Monoid.has-is-monoid</a> <a id="10233" href="Monoids.html#10070" class="Function">×-monoid</a><a id="10241" class="Symbol">)</a> <a id="10243" class="Symbol">=</a>
    <a id="10249" href="Monoids.html#3378" class="Field">Semigroup.has-is-semigroup</a> <a id="10276" href="Monoids.html#9821" class="Function">×-semigroup</a>
  <a id="10290" href="Monoids.html#4559" class="Field">is-monoid.identityˡ</a> <a id="10310" class="Symbol">(</a><a id="10311" href="Monoids.html#4717" class="Field">Monoid.has-is-monoid</a> <a id="10332" href="Monoids.html#10070" class="Function">×-monoid</a><a id="10340" class="Symbol">)</a> <a id="10342" class="Symbol">(</a><a id="10343" href="Monoids.html#10343" class="Bound">a</a> <a id="10345" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="10347" href="Monoids.html#10347" class="Bound">b</a><a id="10348" class="Symbol">)</a> 
    <a id="10355" class="Keyword">rewrite</a> <a id="10363" href="Monoids.html#4559" class="Function">identityˡ</a> <a id="10373" href="Monoids.html#10343" class="Bound">a</a> <a id="10375" class="Keyword">rewrite</a> <a id="10383" href="Monoids.html#4559" class="Function">identityˡ</a> <a id="10393" href="Monoids.html#10347" class="Bound">b</a> <a id="10395" class="Symbol">=</a> <a id="10397" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
  <a id="10404" href="Monoids.html#4591" class="Field">is-monoid.identityʳ</a> <a id="10424" class="Symbol">(</a><a id="10425" href="Monoids.html#4717" class="Field">Monoid.has-is-monoid</a> <a id="10446" href="Monoids.html#10070" class="Function">×-monoid</a><a id="10454" class="Symbol">)</a> <a id="10456" class="Symbol">(</a><a id="10457" href="Monoids.html#10457" class="Bound">a</a> <a id="10459" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="10461" href="Monoids.html#10461" class="Bound">b</a><a id="10462" class="Symbol">)</a>
    <a id="10468" class="Keyword">rewrite</a> <a id="10476" href="Monoids.html#4591" class="Function">identityʳ</a> <a id="10486" href="Monoids.html#10457" class="Bound">a</a> <a id="10488" class="Keyword">rewrite</a> <a id="10496" href="Monoids.html#4591" class="Function">identityʳ</a> <a id="10506" href="Monoids.html#10461" class="Bound">b</a> <a id="10508" class="Symbol">=</a> <a id="10510" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>

<a id="10516" class="Keyword">module</a> <a id="10523" href="Monoids.html#10523" class="Module">_</a> <a id="10525" class="Keyword">where</a>
  <a id="10533" class="Keyword">instance</a> <a id="10542" href="Monoids.html#10542" class="Function">_</a> <a id="10544" class="Symbol">=</a> <a id="10546" href="Monoids.html#10070" class="Function">×-monoid</a> <a id="10555" href="Monoids.html#8188" class="Function">+-0</a> <a id="10559" href="Monoids.html#8568" class="Function">*-1</a>

  <a id="10566" href="Monoids.html#10566" class="Function">sum×prod</a> <a id="10575" class="Symbol">:</a> <a id="10577" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="10582" class="Symbol">(</a><a id="10583" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="10585" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="10587" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a><a id="10588" class="Symbol">)</a> <a id="10590" class="Symbol">→</a> <a id="10592" class="Symbol">(</a><a id="10593" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="10595" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="10597" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a><a id="10598" class="Symbol">)</a>
  <a id="10602" href="Monoids.html#10566" class="Function">sum×prod</a> <a id="10611" class="Symbol">=</a> <a id="10613" href="Monoids.html#6721" class="Function">foldMapList</a> <a id="10625" href="Function.Base.html#704" class="Function">id</a>

<a id="10629" href="Monoids.html#10629" class="Function">_</a> <a id="10631" class="Symbol">:</a> <a id="10633" href="Monoids.html#10566" class="Function">sum×prod</a> <a id="10642" class="Symbol">(</a><a id="10643" href="Data.List.Base.html#3703" class="Function">zip</a> <a id="10647" href="Monoids.html#6318" class="Function">numbers</a> <a id="10655" href="Monoids.html#6318" class="Function">numbers</a><a id="10662" class="Symbol">)</a> <a id="10664" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="10666" class="Symbol">(</a><a id="10667" class="Number">21</a> <a id="10670" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="10672" class="Number">720</a><a id="10675" class="Symbol">)</a>
<a id="10677" class="Symbol">_</a> <a id="10679" class="Symbol">=</a> <a id="10681" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre>
<p>Up until now we have only worked on the <code>List</code> type. This is getting a bit boring and
redundant… On top of it being boring it might make you second guess the generality of
this approach. Can we only work on lists? As you might guess this is not the case!
We can define a more general structure <code>Foldable</code> and generalize this notion to arbitrary
data structures.</p>
<pre class="Agda"><a id="Foldable"></a><a id="11064" href="Monoids.html#11064" class="Function">Foldable</a> <a id="11073" class="Symbol">:</a> <a id="11075" class="Symbol">{</a><a id="11076" href="Monoids.html#11076" class="Bound">ℓ₁</a> <a id="11079" href="Monoids.html#11079" class="Bound">ℓ₂</a> <a id="11082" class="Symbol">:</a> <a id="11084" href="Agda.Primitive.html#591" class="Postulate">Level</a><a id="11089" class="Symbol">}</a> <a id="11091" class="Symbol">→</a> <a id="11093" class="Symbol">(</a><a id="11094" href="Monoids.html#11094" class="Bound">ℓᶠ</a> <a id="11097" class="Symbol">:</a> <a id="11099" href="Agda.Primitive.html#591" class="Postulate">Level</a><a id="11104" class="Symbol">)</a> <a id="11106" class="Symbol">→</a> <a id="11108" class="Symbol">(</a><a id="11109" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="11113" href="Monoids.html#11076" class="Bound">ℓ₁</a> <a id="11116" class="Symbol">→</a> <a id="11118" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="11122" href="Monoids.html#11094" class="Bound">ℓᶠ</a><a id="11124" class="Symbol">)</a> <a id="11126" class="Symbol">→</a> <a id="11128" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="11132" class="Symbol">(</a><a id="11133" href="Monoids.html#1498" class="Primitive">lsuc</a> <a id="11138" href="Monoids.html#11076" class="Bound">ℓ₁</a> <a id="11141" href="Agda.Primitive.html#804" class="Primitive Operator">⊔</a> <a id="11143" href="Monoids.html#1498" class="Primitive">lsuc</a> <a id="11148" href="Monoids.html#11079" class="Bound">ℓ₂</a> <a id="11151" href="Agda.Primitive.html#804" class="Primitive Operator">⊔</a> <a id="11153" href="Monoids.html#11094" class="Bound">ℓᶠ</a><a id="11155" class="Symbol">)</a>
<a id="11157" href="Monoids.html#11064" class="Function">Foldable</a> <a id="11166" class="Symbol">{</a><a id="11167" class="Argument">ℓ₂</a> <a id="11170" class="Symbol">=</a> <a id="11172" href="Monoids.html#11172" class="Bound">ℓ₂</a><a id="11174" class="Symbol">}</a> <a id="11176" class="Symbol">_</a> <a id="11178" href="Monoids.html#11178" class="Bound">F</a> <a id="11180" class="Symbol">=</a> <a id="11182" class="Symbol">∀</a> <a id="11184" class="Symbol">{</a><a id="11185" href="Monoids.html#11185" class="Bound">A</a><a id="11186" class="Symbol">}</a> <a id="11188" class="Symbol">{</a><a id="11189" href="Monoids.html#11189" class="Bound">B</a> <a id="11191" class="Symbol">:</a> <a id="11193" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="11197" href="Monoids.html#11172" class="Bound">ℓ₂</a><a id="11199" class="Symbol">}</a> <a id="11201" class="Symbol">→</a> <a id="11203" class="Symbol">⦃</a> <a id="11205" href="Monoids.html#4627" class="Record">Monoid</a> <a id="11212" href="Monoids.html#11189" class="Bound">B</a> <a id="11214" class="Symbol">⦄</a> <a id="11216" class="Symbol">→</a> <a id="11218" class="Symbol">(</a><a id="11219" href="Monoids.html#11185" class="Bound">A</a> <a id="11221" class="Symbol">→</a> <a id="11223" href="Monoids.html#11189" class="Bound">B</a><a id="11224" class="Symbol">)</a> <a id="11226" class="Symbol">→</a> <a id="11228" href="Monoids.html#11178" class="Bound">F</a> <a id="11230" href="Monoids.html#11185" class="Bound">A</a> <a id="11232" class="Symbol">→</a> <a id="11234" href="Monoids.html#11189" class="Bound">B</a>


<a id="foldableList"></a><a id="11238" href="Monoids.html#11238" class="Function">foldableList</a> <a id="11251" class="Symbol">:</a> <a id="11253" href="Monoids.html#11064" class="Function">Foldable</a> <a id="11262" class="Symbol">{</a><a id="11263" href="Monoids.html#2494" class="Generalizable">ℓ</a><a id="11264" class="Symbol">}</a> <a id="11266" class="Symbol">{</a><a id="11267" href="Monoids.html#2496" class="Generalizable">ℓ₂</a><a id="11269" class="Symbol">}</a> <a id="11271" class="Symbol">_</a> <a id="11273" href="Agda.Builtin.List.html#130" class="Datatype">List</a>
<a id="11278" href="Monoids.html#11238" class="Function">foldableList</a> <a id="11291" class="Symbol">=</a> <a id="11293" href="Monoids.html#6721" class="Function">foldMapList</a>

<a id="11306" class="Keyword">module</a> <a id="11313" href="Monoids.html#11313" class="Module">_</a> <a id="11315" class="Keyword">where</a>
  <a id="11323" class="Keyword">instance</a> <a id="11332" href="Monoids.html#11332" class="Function">_</a> <a id="11334" class="Symbol">=</a> <a id="11336" href="Monoids.html#8188" class="Function">+-0</a>

  <a id="11343" href="Monoids.html#11343" class="Function">length</a> <a id="11350" class="Symbol">:</a> <a id="11352" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="11357" href="Monoids.html#2509" class="Generalizable">A</a> <a id="11359" class="Symbol">→</a> <a id="11361" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
  <a id="11365" href="Monoids.html#11343" class="Function">length</a> <a id="11372" class="Symbol">=</a> <a id="11374" href="Monoids.html#11238" class="Function">foldableList</a> <a id="11387" class="Symbol">(</a><a id="11388" href="Function.Base.html#725" class="Function">const</a> <a id="11394" class="Number">1</a><a id="11395" class="Symbol">)</a>

<a id="11398" href="Monoids.html#11398" class="Function">_</a> <a id="11400" class="Symbol">:</a> <a id="11402" href="Monoids.html#11343" class="Function">length</a> <a id="11409" href="Monoids.html#6318" class="Function">numbers</a> <a id="11417" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="11419" class="Number">6</a>
<a id="11421" class="Symbol">_</a> <a id="11423" class="Symbol">=</a> <a id="11425" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre>
<h3 id="foldable-binary-trees"><a href="#foldable-binary-trees" class="anchor fas fa-xs fa-link"></a>Foldable binary trees</h3>
<p>I claimed that we can <code>foldMap</code> over other structures than <code>List</code>. Let’s define
a simple <em>binary tree</em> data structure and show that we can use the same machinery
on <em>binary trees</em> as we have been using on <em>lists</em>.</p>
<pre class="Agda"><a id="11685" class="Keyword">data</a> <a id="BT"></a><a id="11690" href="Monoids.html#11690" class="Datatype">BT</a> <a id="11693" class="Symbol">(</a><a id="11694" href="Monoids.html#11694" class="Bound">A</a> <a id="11696" class="Symbol">:</a> <a id="11698" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="11702" href="Monoids.html#2494" class="Generalizable">ℓ</a><a id="11703" class="Symbol">)</a> <a id="11705" class="Symbol">:</a> <a id="11707" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="11711" href="Monoids.html#11702" class="Bound">ℓ</a> <a id="11713" class="Keyword">where</a>
  <a id="BT.empty"></a><a id="11721" href="Monoids.html#11721" class="InductiveConstructor">empty</a> <a id="11727" class="Symbol">:</a> <a id="11729" href="Monoids.html#11690" class="Datatype">BT</a> <a id="11732" href="Monoids.html#11694" class="Bound">A</a>
  <a id="BT.branch"></a><a id="11736" href="Monoids.html#11736" class="InductiveConstructor">branch</a> <a id="11743" class="Symbol">:</a> <a id="11745" href="Monoids.html#11690" class="Datatype">BT</a> <a id="11748" href="Monoids.html#11694" class="Bound">A</a> <a id="11750" class="Symbol">→</a> <a id="11752" href="Monoids.html#11694" class="Bound">A</a> <a id="11754" class="Symbol">→</a> <a id="11756" href="Monoids.html#11690" class="Datatype">BT</a> <a id="11759" href="Monoids.html#11694" class="Bound">A</a> <a id="11761" class="Symbol">→</a> <a id="11763" href="Monoids.html#11690" class="Datatype">BT</a> <a id="11766" href="Monoids.html#11694" class="Bound">A</a>

<a id="11769" class="Keyword">pattern</a> <a id="leaf"></a><a id="11777" href="Monoids.html#11777" class="InductiveConstructor">leaf</a> <a id="11782" href="Monoids.html#11799" class="Bound">a</a> <a id="11784" class="Symbol">=</a> <a id="11786" href="Monoids.html#11736" class="InductiveConstructor">branch</a> <a id="11793" href="Monoids.html#11721" class="InductiveConstructor">empty</a> <a id="11799" href="Monoids.html#11799" class="Bound">a</a> <a id="11801" href="Monoids.html#11721" class="InductiveConstructor">empty</a>

<a id="foldableBT"></a><a id="11808" href="Monoids.html#11808" class="Function">foldableBT</a> <a id="11819" class="Symbol">:</a> <a id="11821" href="Monoids.html#11064" class="Function">Foldable</a> <a id="11830" class="Symbol">{</a><a id="11831" href="Level.html#521" class="Function">0ℓ</a><a id="11833" class="Symbol">}</a> <a id="11835" class="Symbol">{</a><a id="11836" href="Monoids.html#2494" class="Generalizable">ℓ</a><a id="11837" class="Symbol">}</a> <a id="11839" href="Level.html#521" class="Function">0ℓ</a> <a id="11842" href="Monoids.html#11690" class="Datatype">BT</a>
<a id="11845" href="Monoids.html#11808" class="Function">foldableBT</a> <a id="11856" class="Symbol">⦃</a> <a id="11858" href="Monoids.html#11858" class="Bound">mon</a> <a id="11862" class="Symbol">⦄</a> <a id="11864" href="Monoids.html#11864" class="Bound">f</a> <a id="11866" href="Monoids.html#11721" class="InductiveConstructor">empty</a> <a id="11872" class="Symbol">=</a> <a id="11874" href="Monoids.html#4687" class="Function">ε</a>
  <a id="11878" class="Keyword">where</a> <a id="11884" class="Keyword">open</a> <a id="11889" href="Monoids.html#4627" class="Module">Monoid</a> <a id="11896" href="Monoids.html#11858" class="Bound">mon</a>
<a id="11900" href="Monoids.html#11808" class="Function">foldableBT</a> <a id="11911" class="Symbol">⦃</a> <a id="11913" href="Monoids.html#11913" class="Bound">mon</a> <a id="11917" class="Symbol">⦄</a> <a id="11919" href="Monoids.html#11919" class="Bound">f</a> <a id="11921" class="Symbol">(</a><a id="11922" href="Monoids.html#11736" class="InductiveConstructor">branch</a> <a id="11929" href="Monoids.html#11929" class="Bound">l</a> <a id="11931" href="Monoids.html#11931" class="Bound">x</a> <a id="11933" href="Monoids.html#11933" class="Bound">r</a><a id="11934" class="Symbol">)</a> <a id="11936" class="Symbol">=</a>
  <a id="11940" href="Monoids.html#11808" class="Function">foldableBT</a> <a id="11951" href="Monoids.html#11919" class="Bound">f</a> <a id="11953" href="Monoids.html#11929" class="Bound">l</a> <a id="11955" href="Monoids.html#4697" class="Function Operator">★</a> <a id="11957" href="Monoids.html#11919" class="Bound">f</a> <a id="11959" href="Monoids.html#11931" class="Bound">x</a> <a id="11961" href="Monoids.html#4697" class="Function Operator">★</a> <a id="11963" href="Monoids.html#11808" class="Function">foldableBT</a> <a id="11974" href="Monoids.html#11919" class="Bound">f</a> <a id="11976" href="Monoids.html#11933" class="Bound">r</a>
  <a id="11980" class="Keyword">where</a> <a id="11986" class="Keyword">open</a> <a id="11991" href="Monoids.html#4627" class="Module">Monoid</a> <a id="11998" href="Monoids.html#11913" class="Bound">mon</a>

<a id="tree"></a><a id="12003" href="Monoids.html#12003" class="Function">tree</a> <a id="12008" class="Symbol">:</a> <a id="12010" href="Monoids.html#11690" class="Datatype">BT</a> <a id="12013" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
<a id="12015" href="Monoids.html#12003" class="Function">tree</a> <a id="12020" class="Symbol">=</a> <a id="12022" href="Monoids.html#11736" class="InductiveConstructor">branch</a> <a id="12029" class="Symbol">(</a><a id="12030" href="Monoids.html#11736" class="InductiveConstructor">branch</a> <a id="12037" class="Symbol">(</a><a id="12038" href="Monoids.html#11777" class="InductiveConstructor">leaf</a> <a id="12043" class="Number">20</a><a id="12045" class="Symbol">)</a> <a id="12047" class="Number">30</a> <a id="12050" class="Symbol">(</a><a id="12051" href="Monoids.html#11777" class="InductiveConstructor">leaf</a> <a id="12056" class="Number">40</a><a id="12058" class="Symbol">))</a> <a id="12061" class="Number">10</a> <a id="12064" class="Symbol">(</a><a id="12065" href="Monoids.html#11777" class="InductiveConstructor">leaf</a> <a id="12070" class="Number">50</a><a id="12072" class="Symbol">)</a>

<a id="12075" class="Keyword">module</a> <a id="12082" href="Monoids.html#12082" class="Module">_</a> <a id="12084" class="Keyword">where</a>
  <a id="12092" class="Keyword">instance</a> <a id="12101" href="Monoids.html#12101" class="Function">_</a> <a id="12103" class="Symbol">=</a> <a id="12105" href="Monoids.html#8188" class="Function">+-0</a>

  <a id="12112" href="Monoids.html#12112" class="Function">t-sum</a> <a id="12118" class="Symbol">:</a> <a id="12120" href="Monoids.html#11690" class="Datatype">BT</a> <a id="12123" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="12125" class="Symbol">→</a> <a id="12127" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
  <a id="12131" href="Monoids.html#12112" class="Function">t-sum</a> <a id="12137" class="Symbol">=</a> <a id="12139" href="Monoids.html#11808" class="Function">foldableBT</a> <a id="12150" href="Function.Base.html#704" class="Function">id</a>

  <a id="12156" href="Monoids.html#12156" class="Function">size</a> <a id="12161" class="Symbol">:</a> <a id="12163" href="Monoids.html#11690" class="Datatype">BT</a> <a id="12166" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="12168" class="Symbol">→</a> <a id="12170" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
  <a id="12174" href="Monoids.html#12156" class="Function">size</a> <a id="12179" class="Symbol">=</a> <a id="12181" href="Monoids.html#11808" class="Function">foldableBT</a> <a id="12192" class="Symbol">(</a><a id="12193" href="Function.Base.html#725" class="Function">const</a> <a id="12199" class="Number">1</a><a id="12200" class="Symbol">)</a>

<a id="12203" href="Monoids.html#12203" class="Function">_</a> <a id="12205" class="Symbol">:</a> <a id="12207" href="Monoids.html#12112" class="Function">t-sum</a> <a id="12213" href="Monoids.html#12003" class="Function">tree</a> <a id="12218" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="12220" class="Number">150</a>
<a id="12224" class="Symbol">_</a> <a id="12226" class="Symbol">=</a> <a id="12228" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>

<a id="12234" href="Monoids.html#12234" class="Function">_</a> <a id="12236" class="Symbol">:</a> <a id="12238" href="Monoids.html#12156" class="Function">size</a> <a id="12243" href="Monoids.html#12003" class="Function">tree</a> <a id="12248" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="12250" class="Number">5</a>
<a id="12252" class="Symbol">_</a> <a id="12254" class="Symbol">=</a> <a id="12256" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre>
<p>In fact at this point we have gained enough generality to turn any <code>Foldable</code> to a <code>List</code>!</p>
<pre class="Agda"><a id="toList"></a><a id="12366" href="Monoids.html#12366" class="Function">toList</a> <a id="12373" class="Symbol">:</a> <a id="12375" class="Symbol">∀</a> <a id="12377" class="Symbol">{</a><a id="12378" href="Monoids.html#12378" class="Bound">ℓ</a> <a id="12380" href="Monoids.html#12380" class="Bound">F</a><a id="12381" class="Symbol">}</a> <a id="12383" class="Symbol">→</a> <a id="12385" href="Monoids.html#11064" class="Function">Foldable</a> <a id="12394" href="Monoids.html#12378" class="Bound">ℓ</a> <a id="12396" href="Monoids.html#12380" class="Bound">F</a> <a id="12398" class="Symbol">→</a> <a id="12400" href="Monoids.html#12380" class="Bound">F</a> <a id="12402" href="Monoids.html#2509" class="Generalizable">A</a> <a id="12404" class="Symbol">→</a> <a id="12406" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="12411" href="Monoids.html#2509" class="Generalizable">A</a>
<a id="12413" href="Monoids.html#12366" class="Function">toList</a> <a id="12420" href="Monoids.html#12420" class="Bound">f</a> <a id="12422" class="Symbol">=</a> <a id="12424" href="Monoids.html#12420" class="Bound">f</a> <a id="12426" class="Symbol">⦃</a> <a id="12428" href="Monoids.html#7458" class="Function">[]-monoid</a> <a id="12438" class="Symbol">⦄</a> <a id="12440" class="Symbol">(</a><a id="12441" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">_∷</a> <a id="12444" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a><a id="12446" class="Symbol">)</a>

<a id="12449" href="Monoids.html#12449" class="Function">_</a> <a id="12451" class="Symbol">:</a> <a id="12453" href="Monoids.html#12366" class="Function">toList</a> <a id="12460" href="Monoids.html#11808" class="Function">foldableBT</a> <a id="12471" href="Monoids.html#12003" class="Function">tree</a> <a id="12476" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="12478" class="Number">20</a> <a id="12481" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="12483" class="Number">30</a> <a id="12486" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="12488" class="Number">40</a> <a id="12491" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="12493" class="Number">10</a> <a id="12496" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="12498" class="Number">50</a> <a id="12501" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="12503" class="InductiveConstructor">[]</a>
<a id="12506" class="Symbol">_</a> <a id="12508" class="Symbol">=</a> <a id="12510" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre>
<p>I hope this write up convined you that <code>monoid</code> is a useful part of any programmers
toolkit. There’s so much more to talk about <code>monoids</code>, but I think this is enough for now.</p>
<p>Thanks for reading and see you next time!</p></section>
  </article>
</main>

<hr />
<footer>
  <a href="/">back</a>
  <a href="/atom.xml">atom</a>
  <a href="/rss.xml">rss</a>
</footer>

    <script async src="./js/script.js"></script>
  </body>
</html>
