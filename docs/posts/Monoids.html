<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Monoids as a tool for writing composable and reusable programs</title>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="Verified definition of monoids in agda and exploration of some cool monoids." />
    
    <meta name="author" content="Joona Piirainen" />
     
    <meta name="keywords" content="agda, monoids, algebra, functional-programming, dependent-types" />
    

    <meta property="og:site_name" content="japiirainen" />
    <meta property="og:title" content="Monoids as a tool for writing composable and reusable programs" />
    <meta property="og:url" content="https://japiirainen.xyz/posts/Monoids.html" />
    <meta property="og:description" content="Verified definition of monoids in agda and exploration of some cool monoids." />
     
    <meta property="og:type" content="article" />
    

    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:site" content="japiirainen" />
    <meta property="twitter:title" content="Monoids as a tool for writing composable and reusable programs" />
    <meta property="twitter:description" content="Verified definition of monoids in agda and exploration of some cool monoids." />
     

    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="canonical" href="https://japiirainen.xyz/posts/Monoids.html" />
    <link rel="stylesheet" href="../css/default.css?2023-08-05" />
    <link rel="stylesheet" href="../css/agda.css?2023-08-05" />
    <link rel="stylesheet" href="../css/code.css?2023-08-05" />
    <script
      type="text/javascript"
      src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"
    ></script>
  </head>
  <body>
    <main>
  <article>
    <header>
      <h2>
        <a href="/">&#8592</a>
      </h2>
      <h1>
        <a href="/posts/Monoids.html">Monoids as a tool for writing composable and reusable programs</a>
      </h1>
      <div>
        <small>2023-08-05</small>
        
      </div>
      <div>
        
        <small>agda, monoids, algebra, functional-programming, dependent-types</small>
        
      </div>
    </header>
    <section><p>This time I’ll ramble about <code>monoids</code>! The reason I like <code>monoids</code> is that they are
relatively simple mathemically, but immensly useful in programming. Every programmer has
used a number of <code>monoid</code> structures thruought their careers either knowingly or not. The goal
of this post is to show that using ideas from mathematics can be useful and even <strong><em>practical</em></strong>.</p>
<p>I will use the <code>Agda</code> programming language / proof assistant to keep us honest. Mathematical
structures like <code>monoid</code> usually come equipped with a set of <em>properties</em> or <em>laws</em> that they
should obey, and the proof assistant capabilities of <code>Agda</code> let us precisely encode these <em>properties</em>.</p>
<p>This document is a typechecked literal <code>Agda</code> document. In fact all the definitions used in this module
are hyperlinks to their definitions. You can for example click the sumbol <code>Data.Nat.Properties</code> in the code block below to
see the <em>standard-library</em> module <code>Data.Nat.Properties</code>. It is common for an <code>Agda</code> module to begin with a bunch of module headers and imports,
this one is no exception :-).</p>
<pre class="Agda"><a id="1378" class="Symbol">{-#</a> <a id="1382" class="Keyword">OPTIONS</a> <a id="1390" class="Pragma">--safe</a> <a id="1397" class="Pragma">--guardedness</a> <a id="1411" class="Symbol">#-}</a>
<a id="1415" class="Keyword">module</a> <a id="1422" href="Monoids.html" class="Module">Monoids</a> <a id="1430" class="Keyword">where</a>

<a id="1437" class="Keyword">open</a> <a id="1442" class="Keyword">import</a> <a id="1449" href="Level.html" class="Module">Level</a> <a id="1455" class="Keyword">renaming</a> <a id="1464" class="Symbol">(</a><a id="1465" href="Agda.Primitive.html#774" class="Primitive">suc</a> <a id="1469" class="Symbol">to</a> <a id="1472" class="Primitive">lsuc</a><a id="1476" class="Symbol">)</a>
<a id="1478" class="Keyword">open</a> <a id="1483" class="Keyword">import</a> <a id="1490" href="Function.html" class="Module">Function</a> <a id="1499" class="Keyword">using</a> <a id="1505" class="Symbol">(</a><a id="1506" href="Function.Base.html#1115" class="Function Operator">_∘_</a><a id="1509" class="Symbol">;</a> <a id="1511" href="Function.Base.html#704" class="Function">id</a><a id="1513" class="Symbol">;</a> <a id="1515" href="Function.Base.html#1638" class="Function">flip</a><a id="1519" class="Symbol">;</a> <a id="1521" href="Function.Base.html#725" class="Function">const</a><a id="1526" class="Symbol">)</a>
<a id="1528" class="Keyword">open</a> <a id="1533" class="Keyword">import</a> <a id="1540" href="Data.Nat.html" class="Module">Data.Nat</a> <a id="1549" class="Keyword">using</a> <a id="1555" class="Symbol">(</a><a id="1556" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">_+_</a><a id="1559" class="Symbol">;</a> <a id="1561" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">_*_</a><a id="1564" class="Symbol">;</a> <a id="1566" href="Data.Nat.Base.html#1330" class="Function Operator">_≤ᵇ_</a><a id="1570" class="Symbol">;</a> <a id="1572" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a><a id="1573" class="Symbol">)</a>
<a id="1575" class="Keyword">open</a> <a id="1580" class="Keyword">import</a> <a id="1587" href="Data.Nat.Properties.html" class="Module">Data.Nat.Properties</a> <a id="1607" class="Keyword">using</a> <a id="1613" class="Symbol">(</a><a id="1614" href="Data.Nat.Properties.html#14455" class="Function">+-assoc</a><a id="1621" class="Symbol">;</a> <a id="1623" href="Data.Nat.Properties.html#14556" class="Function">+-identityˡ</a><a id="1634" class="Symbol">;</a> <a id="1636" href="Data.Nat.Properties.html#14611" class="Function">+-identityʳ</a><a id="1647" class="Symbol">;</a> <a id="1649" href="Data.Nat.Properties.html#22029" class="Function">*-assoc</a><a id="1656" class="Symbol">;</a> <a id="1658" href="Data.Nat.Properties.html#20929" class="Function">*-identityˡ</a><a id="1669" class="Symbol">;</a> <a id="1671" href="Data.Nat.Properties.html#20993" class="Function">*-identityʳ</a><a id="1682" class="Symbol">)</a>
<a id="1684" class="Keyword">open</a> <a id="1689" class="Keyword">import</a> <a id="1696" href="Data.Bool.html" class="Module">Data.Bool</a> <a id="1706" class="Keyword">using</a> <a id="1712" class="Symbol">(</a><a id="1713" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a><a id="1717" class="Symbol">;</a> <a id="1719" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a><a id="1723" class="Symbol">;</a> <a id="1725" href="Agda.Builtin.Bool.html#175" class="InductiveConstructor">false</a><a id="1730" class="Symbol">;</a> <a id="1732" href="Data.Bool.Base.html#995" class="Function Operator">_∧_</a><a id="1735" class="Symbol">;</a> <a id="1737" href="Data.Bool.Base.html#1053" class="Function Operator">_∨_</a><a id="1740" class="Symbol">)</a>
<a id="1742" class="Keyword">open</a> <a id="1747" class="Keyword">import</a> <a id="1754" href="Data.Bool.Properties.html" class="Module">Data.Bool.Properties</a> <a id="1775" class="Keyword">using</a> <a id="1781" class="Symbol">(</a><a id="1782" href="Data.Bool.Properties.html#8098" class="Function">∧-assoc</a><a id="1789" class="Symbol">;</a> <a id="1791" href="Data.Bool.Properties.html#5308" class="Function">∨-assoc</a><a id="1798" class="Symbol">;</a> <a id="1800" href="Data.Bool.Properties.html#8305" class="Function">∧-identityˡ</a><a id="1811" class="Symbol">;</a> <a id="1813" href="Data.Bool.Properties.html#8363" class="Function">∧-identityʳ</a><a id="1824" class="Symbol">;</a> <a id="1826" href="Data.Bool.Properties.html#5515" class="Function">∨-identityˡ</a><a id="1837" class="Symbol">;</a> <a id="1839" href="Data.Bool.Properties.html#5574" class="Function">∨-identityʳ</a><a id="1850" class="Symbol">)</a>
<a id="1852" class="Keyword">open</a> <a id="1857" class="Keyword">import</a> <a id="1864" href="Data.List.html" class="Module">Data.List</a> <a id="1874" class="Keyword">using</a> <a id="1880" class="Symbol">(</a><a id="1881" href="Agda.Builtin.List.html#130" class="Datatype">List</a><a id="1885" class="Symbol">;</a> <a id="1887" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">_∷_</a><a id="1890" class="Symbol">;</a> <a id="1892" href="Data.List.Base.html#7375" class="InductiveConstructor">[]</a><a id="1894" class="Symbol">;</a> <a id="1896" href="Data.List.Base.html#1620" class="Function">map</a><a id="1899" class="Symbol">;</a> <a id="1901" href="Data.List.Base.html#4426" class="Function">foldl</a><a id="1906" class="Symbol">;</a> <a id="1908" href="Data.List.Base.html#1943" class="Function Operator">_++_</a><a id="1912" class="Symbol">;</a> <a id="1914" href="Data.List.Base.html#3703" class="Function">zip</a><a id="1917" class="Symbol">)</a>
<a id="1919" class="Keyword">open</a> <a id="1924" class="Keyword">import</a> <a id="1931" href="Data.List.Properties.html" class="Module">Data.List.Properties</a> <a id="1952" class="Keyword">using</a> <a id="1958" class="Symbol">(</a><a id="1959" href="Data.List.Properties.html#5580" class="Function">++-assoc</a><a id="1967" class="Symbol">;</a> <a id="1969" href="Data.List.Properties.html#5704" class="Function">++-identityˡ</a><a id="1981" class="Symbol">;</a> <a id="1983" href="Data.List.Properties.html#5768" class="Function">++-identityʳ</a><a id="1995" class="Symbol">)</a>
<a id="1997" class="Keyword">open</a> <a id="2002" class="Keyword">import</a> <a id="2009" href="Data.Product.html" class="Module">Data.Product</a> <a id="2022" class="Keyword">using</a> <a id="2028" class="Symbol">(</a><a id="2029" href="Agda.Builtin.Sigma.html#148" class="Record">Σ</a><a id="2030" class="Symbol">;</a> <a id="2032" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="2037" class="Symbol">;</a> <a id="2039" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="2044" class="Symbol">;</a> <a id="2046" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">_,_</a><a id="2049" class="Symbol">;</a> <a id="2051" href="Data.Product.Base.html#1618" class="Function Operator">_×_</a><a id="2054" class="Symbol">)</a>
<a id="2056" class="Keyword">open</a> <a id="2061" class="Keyword">import</a> <a id="2068" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="2106" class="Keyword">using</a> <a id="2112" class="Symbol">(</a><a id="2113" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="2117" class="Symbol">;</a> <a id="2119" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">_≡_</a><a id="2122" class="Symbol">;</a> <a id="2124" href="Relation.Binary.PropositionalEquality.Core.html#1712" class="Function">sym</a><a id="2127" class="Symbol">)</a>
</pre>
<p>One neat feature of <code>Agda</code> is it’s <code>variable</code> blocks. They let you generalize over variables in types.
In practice a <code>variable</code> block let’s you omit a bunch of detail from definitions since you can directly
use the variables defined in the <code>variable</code> block. I think this will make since once you see it in action.</p>
<pre class="Agda"><a id="2457" class="Keyword">private</a> <a id="2465" class="Keyword">variable</a>
  <a id="2476" href="Monoids.html#2476" class="Generalizable">ℓ</a> <a id="2478" href="Monoids.html#2478" class="Generalizable">ℓ₂</a> <a id="2481" class="Symbol">:</a> <a id="2483" href="Agda.Primitive.html#591" class="Postulate">Level</a>
  <a id="2491" href="Monoids.html#2491" class="Generalizable">A</a> <a id="2493" class="Symbol">:</a> <a id="2495" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="2499" href="Monoids.html#2476" class="Generalizable">ℓ</a>
  <a id="2503" href="Monoids.html#2503" class="Generalizable">B</a> <a id="2505" class="Symbol">:</a> <a id="2507" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="2511" href="Monoids.html#2478" class="Generalizable">ℓ₂</a>
</pre>
<p>If we look at the definition of a <code>monoid</code>, we will find that a <code>monoid</code> is a
<code>semigroup</code> with an <em>identity element</em>. From this it is reasonable to conclude that
we should first define what is a <code>semigroup</code>. Luckily <code>semigroups</code> are a relatively simple
structure.</p>
<h3 id="semigroup-definition"><a href="#semigroup-definition" class="anchor fas fa-xs fa-link"></a>Semigroup definition</h3>
<p>A semigroup is a <em>set</em> <span class="math inline">\(S\)</span> together with a <em>binary operation</em> <span class="math inline">\(★\)</span> that satisfies the
<em>associative property</em>.</p>
<p><span class="math display">\[
∀ x y z ∈ S. (x ★ y) ★ z = x ★ (y ★ z)
\]</span></p>
<p>To gain some intuition we should try to think of some examples. It can be difficult to gain insight to these often
quite abstract mathematical ideas without concrete examples. That is why I think it’s a great idea to always try to
come up with some examples when you see one of these definitions. Some examples of <code>semigroups</code> from the top of my head
include the natural numbers with the addition (<span class="math inline">\(+\)</span>) operation, or (ℕ,+). Natural numbers with multiplication (<span class="math inline">\(*\)</span>) also
form a <code>semigroup</code>. You can veryfy in you head that the following equations hold.</p>
<p><span class="math display">\[
∀ x y z ∈ ℕ. (x + y) + z = x + (y + z)
\]</span>
<span class="math display">\[
∀ x y z ∈ ℕ. (x * y) * z = x * (y * z)
\]</span></p>
<p>Other examples include (String,++) where <code>++</code> is string concatenation, (List, ++) where <code>++</code> is list concatenation,
(Bool,∨) where <code>∨</code> means <em>or</em> and (Bool,∧) where <code>∧</code> means <em>and</em>.</p>
<p>Lets encode this in <code>agda</code>. The beautiful thing about <code>agda</code> is that the encoding is pretty much <em>1:1</em> to the math above.</p>
<pre class="Agda"><a id="level-of"></a><a id="3925" href="Monoids.html#3925" class="Function">level-of</a> <a id="3934" class="Symbol">:</a> <a id="3936" class="Symbol">{</a><a id="3937" href="Monoids.html#3937" class="Bound">ℓ</a> <a id="3939" class="Symbol">:</a> <a id="3941" href="Agda.Primitive.html#591" class="Postulate">Level</a><a id="3946" class="Symbol">}</a> <a id="3948" class="Symbol">→</a> <a id="3950" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="3954" href="Monoids.html#3937" class="Bound">ℓ</a> <a id="3956" class="Symbol">→</a> <a id="3958" href="Agda.Primitive.html#591" class="Postulate">Level</a>
<a id="3964" href="Monoids.html#3925" class="Function">level-of</a> <a id="3973" class="Symbol">{</a><a id="3974" href="Monoids.html#3974" class="Bound">ℓ</a><a id="3975" class="Symbol">}</a> <a id="3977" class="Symbol">_</a> <a id="3979" class="Symbol">=</a> <a id="3981" href="Monoids.html#3974" class="Bound">ℓ</a>

<a id="3984" class="Keyword">record</a> <a id="is-semigroup"></a><a id="3991" href="Monoids.html#3991" class="Record">is-semigroup</a> <a id="4004" class="Symbol">(</a><a id="4005" href="Monoids.html#4005" class="Bound Operator">_★_</a> <a id="4009" class="Symbol">:</a> <a id="4011" href="Monoids.html#2491" class="Generalizable">A</a> <a id="4013" class="Symbol">→</a> <a id="4015" href="Monoids.html#2491" class="Generalizable">A</a> <a id="4017" class="Symbol">→</a> <a id="4019" href="Monoids.html#2491" class="Generalizable">A</a><a id="4020" class="Symbol">)</a> <a id="4022" class="Symbol">:</a> <a id="4024" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="4028" class="Symbol">(</a><a id="4029" href="Monoids.html#3925" class="Function">level-of</a> <a id="4038" href="Monoids.html#4011" class="Bound">A</a><a id="4039" class="Symbol">)</a> <a id="4041" class="Keyword">where</a>
  <a id="4049" class="Keyword">field</a>
    <a id="is-semigroup.assoc"></a><a id="4059" href="Monoids.html#4059" class="Field">assoc</a> <a id="4065" class="Symbol">:</a> <a id="4067" class="Symbol">∀</a> <a id="4069" href="Monoids.html#4069" class="Bound">x</a> <a id="4071" href="Monoids.html#4071" class="Bound">y</a> <a id="4073" href="Monoids.html#4073" class="Bound">z</a> <a id="4075" class="Symbol">→</a> <a id="4077" class="Symbol">(</a><a id="4078" href="Monoids.html#4069" class="Bound">x</a> <a id="4080" href="Monoids.html#4005" class="Bound Operator">★</a> <a id="4082" href="Monoids.html#4071" class="Bound">y</a><a id="4083" class="Symbol">)</a> <a id="4085" href="Monoids.html#4005" class="Bound Operator">★</a> <a id="4087" href="Monoids.html#4073" class="Bound">z</a> <a id="4089" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="4091" href="Monoids.html#4069" class="Bound">x</a> <a id="4093" href="Monoids.html#4005" class="Bound Operator">★</a> <a id="4095" class="Symbol">(</a><a id="4096" href="Monoids.html#4071" class="Bound">y</a> <a id="4098" href="Monoids.html#4005" class="Bound Operator">★</a> <a id="4100" href="Monoids.html#4073" class="Bound">z</a><a id="4101" class="Symbol">)</a>

<a id="4104" class="Keyword">record</a> <a id="Semigroup"></a><a id="4111" href="Monoids.html#4111" class="Record">Semigroup</a> <a id="4121" class="Symbol">(</a><a id="4122" href="Monoids.html#4122" class="Bound">A</a> <a id="4124" class="Symbol">:</a> <a id="4126" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="4130" href="Monoids.html#2476" class="Generalizable">ℓ</a><a id="4131" class="Symbol">)</a> <a id="4133" class="Symbol">:</a> <a id="4135" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="4139" href="Monoids.html#4130" class="Bound">ℓ</a> <a id="4141" class="Keyword">where</a>
  <a id="4149" class="Keyword">infixl</a> <a id="4156" class="Number">5</a> <a id="4158" href="Monoids.html#4174" class="Field Operator">_★_</a>
  <a id="4164" class="Keyword">field</a>
    <a id="Semigroup._★_"></a><a id="4174" href="Monoids.html#4174" class="Field Operator">_★_</a> <a id="4178" class="Symbol">:</a> <a id="4180" href="Monoids.html#4122" class="Bound">A</a> <a id="4182" class="Symbol">→</a> <a id="4184" href="Monoids.html#4122" class="Bound">A</a> <a id="4186" class="Symbol">→</a> <a id="4188" href="Monoids.html#4122" class="Bound">A</a>
    <a id="Semigroup.has-is-semigroup"></a><a id="4194" href="Monoids.html#4194" class="Field">has-is-semigroup</a> <a id="4211" class="Symbol">:</a> <a id="4213" href="Monoids.html#3991" class="Record">is-semigroup</a> <a id="4226" href="Monoids.html#4174" class="Field Operator">_★_</a>

  <a id="4233" class="Keyword">open</a> <a id="4238" href="Monoids.html#3991" class="Module">is-semigroup</a> <a id="4251" href="Monoids.html#4194" class="Field">has-is-semigroup</a> <a id="4268" class="Keyword">public</a>
</pre>
<p>A couple of familiar <code>semigroups</code> to programmers are the <code>∧</code> and <code>∨</code> operators
from <em>boolean algebra</em>. We can show that they conform to our definition of a <code>semigroup</code></p>
<pre class="Agda"><a id="∧-semigroup"></a><a id="4457" href="Monoids.html#4457" class="Function">∧-semigroup</a> <a id="4469" class="Symbol">:</a> <a id="4471" href="Monoids.html#4111" class="Record">Semigroup</a> <a id="4481" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
<a id="4486" href="Monoids.html#4457" class="Function">∧-semigroup</a> <a id="4498" class="Symbol">=</a> <a id="4500" class="Keyword">record</a> <a id="4507" class="Symbol">{</a> <a id="4509" href="Monoids.html#4174" class="Field Operator">_★_</a> <a id="4513" class="Symbol">=</a> <a id="4515" class="Symbol">λ</a> <a id="4517" href="Monoids.html#4517" class="Bound">x</a> <a id="4519" href="Monoids.html#4519" class="Bound">y</a> <a id="4521" class="Symbol">→</a> <a id="4523" href="Monoids.html#4517" class="Bound">x</a> <a id="4525" href="Data.Bool.Base.html#995" class="Function Operator">∧</a> <a id="4527" href="Monoids.html#4519" class="Bound">y</a> 
                     <a id="4551" class="Symbol">;</a> <a id="4553" href="Monoids.html#4194" class="Field">has-is-semigroup</a> <a id="4570" class="Symbol">=</a> <a id="4572" class="Keyword">record</a> <a id="4579" class="Symbol">{</a> <a id="4581" href="Monoids.html#4059" class="Field">assoc</a> <a id="4587" class="Symbol">=</a> <a id="4589" href="Data.Bool.Properties.html#8098" class="Function">∧-assoc</a> <a id="4597" class="Symbol">}</a> <a id="4599" class="Symbol">}</a>

<a id="∨-semigroup"></a><a id="4602" href="Monoids.html#4602" class="Function">∨-semigroup</a> <a id="4614" class="Symbol">:</a> <a id="4616" href="Monoids.html#4111" class="Record">Semigroup</a> <a id="4626" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
<a id="4631" href="Monoids.html#4602" class="Function">∨-semigroup</a> <a id="4643" class="Symbol">=</a> <a id="4645" class="Keyword">record</a> <a id="4652" class="Symbol">{</a> <a id="4654" href="Monoids.html#4174" class="Field Operator">_★_</a> <a id="4658" class="Symbol">=</a> <a id="4660" class="Symbol">λ</a> <a id="4662" href="Monoids.html#4662" class="Bound">x</a> <a id="4664" href="Monoids.html#4664" class="Bound">y</a> <a id="4666" class="Symbol">→</a> <a id="4668" href="Monoids.html#4662" class="Bound">x</a> <a id="4670" href="Data.Bool.Base.html#1053" class="Function Operator">∨</a> <a id="4672" href="Monoids.html#4664" class="Bound">y</a> 
                     <a id="4696" class="Symbol">;</a> <a id="4698" href="Monoids.html#4194" class="Field">has-is-semigroup</a> <a id="4715" class="Symbol">=</a> <a id="4717" class="Keyword">record</a> <a id="4724" class="Symbol">{</a> <a id="4726" href="Monoids.html#4059" class="Field">assoc</a> <a id="4732" class="Symbol">=</a> <a id="4734" href="Data.Bool.Properties.html#5308" class="Function">∨-assoc</a> <a id="4742" class="Symbol">}</a> <a id="4744" class="Symbol">}</a>
</pre>
<p>Now that we have defined what it means to be a <code>semigroup</code>, we can graduate to
<code>monoids</code>. Lets recall the definition first.</p>
<h3 id="monoid-definition"><a href="#monoid-definition" class="anchor fas fa-xs fa-link"></a>Monoid definition</h3>
<p>A monoid is a <em>set</em> <span class="math inline">\(S\)</span> together with a <em>binary operation</em> <span class="math inline">\(★\)</span> that satisfies the
following properties.</p>
<h4 id="associativity"><a href="#associativity" class="anchor fas fa-xs fa-link"></a>Associativity</h4>
<p><span class="math display">\[
∀ x y z ∈ S. (x ★ y) ★ z = x ★ (y ★ z)
\]</span></p>
<h4 id="identity-element"><a href="#identity-element" class="anchor fas fa-xs fa-link"></a>Identity element</h4>
<p><span class="math display">\[
∃ e ∈ S. ∀ x. e ★ a = a ★ e = a
\]</span></p>
<p>I again encourage you to think of examples, like we did after the <code>semigrou</code> definition.
Do you think the examples I gave of <code>semigroups</code> are also <code>monoids</code>?</p>
<p>Again, it is straight forward to translate this to <code>agda</code>.</p>
<pre class="Agda"><a id="5360" class="Keyword">record</a> <a id="is-monoid"></a><a id="5367" href="Monoids.html#5367" class="Record">is-monoid</a> <a id="5377" class="Symbol">(</a><a id="5378" href="Monoids.html#5378" class="Bound Operator">_★_</a> <a id="5382" class="Symbol">:</a> <a id="5384" href="Monoids.html#2491" class="Generalizable">A</a> <a id="5386" class="Symbol">→</a> <a id="5388" href="Monoids.html#2491" class="Generalizable">A</a> <a id="5390" class="Symbol">→</a> <a id="5392" href="Monoids.html#2491" class="Generalizable">A</a><a id="5393" class="Symbol">)</a> <a id="5395" class="Symbol">(</a><a id="5396" href="Monoids.html#5396" class="Bound">ε</a> <a id="5398" class="Symbol">:</a> <a id="5400" href="Monoids.html#2491" class="Generalizable">A</a><a id="5401" class="Symbol">)</a> <a id="5403" class="Symbol">:</a> <a id="5405" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="5409" class="Symbol">(</a><a id="5410" href="Monoids.html#3925" class="Function">level-of</a> <a id="5419" href="Monoids.html#5384" class="Bound">A</a><a id="5420" class="Symbol">)</a> <a id="5422" class="Keyword">where</a>
  <a id="5430" class="Keyword">field</a>
    <a id="is-monoid.has-is-semigroup"></a><a id="5440" href="Monoids.html#5440" class="Field">has-is-semigroup</a> <a id="5457" class="Symbol">:</a> <a id="5459" href="Monoids.html#3991" class="Record">is-semigroup</a> <a id="5472" href="Monoids.html#5378" class="Bound Operator">_★_</a>

  <a id="5479" class="Keyword">open</a> <a id="5484" href="Monoids.html#3991" class="Module">is-semigroup</a> <a id="5497" href="Monoids.html#5440" class="Field">has-is-semigroup</a> <a id="5514" class="Keyword">public</a>

  <a id="5524" class="Keyword">field</a>
    <a id="is-monoid.identityˡ"></a><a id="5534" href="Monoids.html#5534" class="Field">identityˡ</a> <a id="5544" class="Symbol">:</a> <a id="5546" class="Symbol">∀</a> <a id="5548" href="Monoids.html#5548" class="Bound">x</a> <a id="5550" class="Symbol">→</a> <a id="5552" href="Monoids.html#5396" class="Bound">ε</a> <a id="5554" href="Monoids.html#5378" class="Bound Operator">★</a> <a id="5556" href="Monoids.html#5548" class="Bound">x</a> <a id="5558" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="5560" href="Monoids.html#5548" class="Bound">x</a>
    <a id="is-monoid.identityʳ"></a><a id="5566" href="Monoids.html#5566" class="Field">identityʳ</a> <a id="5576" class="Symbol">:</a> <a id="5578" class="Symbol">∀</a> <a id="5580" href="Monoids.html#5580" class="Bound">x</a> <a id="5582" class="Symbol">→</a> <a id="5584" href="Monoids.html#5580" class="Bound">x</a> <a id="5586" href="Monoids.html#5378" class="Bound Operator">★</a> <a id="5588" href="Monoids.html#5396" class="Bound">ε</a> <a id="5590" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="5592" href="Monoids.html#5580" class="Bound">x</a>

<a id="5595" class="Keyword">record</a> <a id="Monoid"></a><a id="5602" href="Monoids.html#5602" class="Record">Monoid</a> <a id="5609" class="Symbol">(</a><a id="5610" href="Monoids.html#5610" class="Bound">A</a> <a id="5612" class="Symbol">:</a> <a id="5614" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="5618" href="Monoids.html#2476" class="Generalizable">ℓ</a><a id="5619" class="Symbol">)</a> <a id="5621" class="Symbol">:</a> <a id="5623" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="5627" href="Monoids.html#5618" class="Bound">ℓ</a> <a id="5629" class="Keyword">where</a>
  <a id="5637" class="Keyword">infixl</a> <a id="5644" class="Number">5</a> <a id="5646" href="Monoids.html#5672" class="Function Operator">_★_</a>
  <a id="5652" class="Keyword">field</a>
    <a id="Monoid.ε"></a><a id="5662" href="Monoids.html#5662" class="Field">ε</a> <a id="5664" class="Symbol">:</a> <a id="5666" href="Monoids.html#5610" class="Bound">A</a>
    <a id="Monoid._★_"></a><a id="5672" href="Monoids.html#5672" class="Field Operator">_★_</a> <a id="5676" class="Symbol">:</a> <a id="5678" href="Monoids.html#5610" class="Bound">A</a> <a id="5680" class="Symbol">→</a> <a id="5682" href="Monoids.html#5610" class="Bound">A</a> <a id="5684" class="Symbol">→</a> <a id="5686" href="Monoids.html#5610" class="Bound">A</a>
    <a id="Monoid.has-is-monoid"></a><a id="5692" href="Monoids.html#5692" class="Field">has-is-monoid</a> <a id="5706" class="Symbol">:</a> <a id="5708" href="Monoids.html#5367" class="Record">is-monoid</a> <a id="5718" href="Monoids.html#5672" class="Field Operator">_★_</a> <a id="5722" href="Monoids.html#5662" class="Field">ε</a>

  <a id="5727" class="Keyword">open</a> <a id="5732" href="Monoids.html#5367" class="Module">is-monoid</a> <a id="5742" href="Monoids.html#5692" class="Field">has-is-monoid</a> <a id="5756" class="Keyword">public</a>
</pre>
<p>We can show that <code>∧</code> and <code>∨</code> are <code>monoids</code>!</p>
<pre class="Agda"><a id="5821" class="Keyword">module</a> <a id="5828" href="Monoids.html#5828" class="Module">_</a> <a id="5830" class="Keyword">where</a>

  <a id="5839" class="Keyword">open</a> <a id="5844" href="Monoids.html#5367" class="Module">is-monoid</a>
  <a id="5856" class="Keyword">open</a> <a id="5861" href="Monoids.html#4111" class="Module">Semigroup</a>
  <a id="5873" class="Keyword">open</a> <a id="5878" href="Monoids.html#5602" class="Module">Monoid</a>

  <a id="5888" href="Monoids.html#5888" class="Function">∧-monoid</a> <a id="5897" class="Symbol">:</a> <a id="5899" href="Monoids.html#5602" class="Record">Monoid</a> <a id="5906" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
  <a id="5913" href="Monoids.html#5888" class="Function">∧-monoid</a> <a id="5922" class="Symbol">=</a> <a id="5924" class="Keyword">record</a> <a id="5931" class="Symbol">{</a> <a id="5933" href="Monoids.html#5662" class="Field">ε</a> <a id="5935" class="Symbol">=</a> <a id="5937" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a> 
                    <a id="5963" class="Symbol">;</a> <a id="5965" href="Monoids.html#5672" class="Field Operator">_★_</a> <a id="5969" class="Symbol">=</a> <a id="5971" href="Data.Bool.Base.html#995" class="Function Operator">_∧_</a> 
                    <a id="5996" class="Symbol">;</a> <a id="5998" href="Monoids.html#5692" class="Field">has-is-monoid</a> <a id="6012" class="Symbol">=</a> 
                      <a id="6037" class="Keyword">record</a> <a id="6044" class="Symbol">{</a> <a id="6046" href="Monoids.html#5440" class="Field">has-is-semigroup</a> <a id="6063" class="Symbol">=</a> <a id="6065" href="Monoids.html#4194" class="Field">has-is-semigroup</a> <a id="6082" href="Monoids.html#4457" class="Function">∧-semigroup</a>
                             <a id="6123" class="Symbol">;</a> <a id="6125" href="Monoids.html#5534" class="Field">identityˡ</a> <a id="6135" class="Symbol">=</a> <a id="6137" href="Data.Bool.Properties.html#8305" class="Function">∧-identityˡ</a>
                             <a id="6178" class="Symbol">;</a> <a id="6180" href="Monoids.html#5566" class="Field">identityʳ</a> <a id="6190" class="Symbol">=</a> <a id="6192" href="Data.Bool.Properties.html#8363" class="Function">∧-identityʳ</a> <a id="6204" class="Symbol">}</a> <a id="6206" class="Symbol">}</a>

  <a id="6211" href="Monoids.html#6211" class="Function">∨-monoid</a> <a id="6220" class="Symbol">:</a> <a id="6222" href="Monoids.html#5602" class="Record">Monoid</a> <a id="6229" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
  <a id="6236" href="Monoids.html#5662" class="Field">ε</a> <a id="6238" href="Monoids.html#6211" class="Function">∨-monoid</a> <a id="6247" class="Symbol">=</a> <a id="6249" href="Agda.Builtin.Bool.html#175" class="InductiveConstructor">false</a>
  <a id="6257" href="Monoids.html#5672" class="Field Operator">_★_</a> <a id="6261" href="Monoids.html#6211" class="Function">∨-monoid</a> <a id="6270" class="Symbol">=</a> <a id="6272" href="Data.Bool.Base.html#1053" class="Function Operator">_∨_</a>
  <a id="6278" href="Monoids.html#5440" class="Field">has-is-semigroup</a> <a id="6295" class="Symbol">(</a><a id="6296" href="Monoids.html#5692" class="Field">has-is-monoid</a> <a id="6310" href="Monoids.html#6211" class="Function">∨-monoid</a><a id="6318" class="Symbol">)</a> <a id="6320" class="Symbol">=</a> <a id="6322" href="Monoids.html#4194" class="Field">has-is-semigroup</a> <a id="6339" href="Monoids.html#4602" class="Function">∨-semigroup</a>
  <a id="6353" href="Monoids.html#5534" class="Field">identityˡ</a> <a id="6363" class="Symbol">(</a><a id="6364" href="Monoids.html#5692" class="Field">has-is-monoid</a> <a id="6378" href="Monoids.html#6211" class="Function">∨-monoid</a><a id="6386" class="Symbol">)</a> <a id="6388" class="Symbol">=</a> <a id="6390" href="Data.Bool.Properties.html#5515" class="Function">∨-identityˡ</a>
  <a id="6404" href="Monoids.html#5566" class="Field">identityʳ</a> <a id="6414" class="Symbol">(</a><a id="6415" href="Monoids.html#5692" class="Field">has-is-monoid</a> <a id="6429" href="Monoids.html#6211" class="Function">∨-monoid</a><a id="6437" class="Symbol">)</a> <a id="6439" class="Symbol">=</a> <a id="6441" href="Data.Bool.Properties.html#5574" class="Function">∨-identityʳ</a>
</pre>
<p>I’m using proofs such as <code>∨-identityʳ</code> from the <code>standard-library</code> to keep the length of
this post reasonable. Note that you can construct <code>records</code> in agda in two ways, which
are presented above. <code>∧-monoid</code> is defined using the <code>record</code> constructor syntax. <code>∨-monoid</code>
uses something called <code>copatterns</code>, which let’s us define the fields of a record as separate
declarations in a similar way that we would give different cases for a function.</p>
<p>At this point you might not be convinced on the usefulness of all this. Let me try to change
that by showcasing a bunch of commonly used monoids and operations that can be built up from those.</p>
<p>A very common pattern when coding in a functional style is <code>mapping</code> followed by <code>folding</code>.
This pattern is also known as <code>MapReduce</code> in the distributed computing community. Let’s see an example.</p>
<pre class="Agda"><a id="numbers"></a><a id="7297" href="Monoids.html#7297" class="Function">numbers</a> <a id="7305" class="Symbol">:</a> <a id="7307" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="7312" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
<a id="7314" href="Monoids.html#7297" class="Function">numbers</a> <a id="7322" class="Symbol">=</a> <a id="7324" class="Number">1</a> <a id="7326" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7328" class="Number">2</a> <a id="7330" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7332" class="Number">3</a> <a id="7334" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7336" class="Number">4</a> <a id="7338" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7340" class="Number">5</a> <a id="7342" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7344" class="Number">6</a> <a id="7346" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7348" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a>

<a id="all≤5?"></a><a id="7352" href="Monoids.html#7352" class="Function">all≤5?</a> <a id="7359" class="Symbol">:</a> <a id="7361" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="7366" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="7368" class="Symbol">→</a> <a id="7370" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
<a id="7375" href="Monoids.html#7352" class="Function">all≤5?</a> <a id="7382" class="Symbol">=</a> <a id="7384" href="Data.List.Base.html#4426" class="Function">foldl</a> <a id="7390" href="Data.Bool.Base.html#995" class="Function Operator">_∧_</a> <a id="7394" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a> <a id="7399" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="7401" href="Data.List.Base.html#1620" class="Function">map</a> <a id="7405" class="Symbol">(</a><a id="7406" href="Data.Nat.Base.html#1330" class="Function Operator">_≤ᵇ</a> <a id="7410" class="Number">5</a><a id="7411" class="Symbol">)</a>

<a id="any&gt;10?"></a><a id="7414" href="Monoids.html#7414" class="Function">any&gt;10?</a> <a id="7422" class="Symbol">:</a> <a id="7424" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="7429" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="7431" class="Symbol">→</a> <a id="7433" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
<a id="7438" href="Monoids.html#7414" class="Function">any&gt;10?</a> <a id="7446" class="Symbol">=</a> <a id="7448" href="Data.List.Base.html#4426" class="Function">foldl</a> <a id="7454" href="Data.Bool.Base.html#1053" class="Function Operator">_∨_</a> <a id="7458" href="Agda.Builtin.Bool.html#175" class="InductiveConstructor">false</a> <a id="7464" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="7466" href="Data.List.Base.html#1620" class="Function">map</a> <a id="7470" class="Symbol">(</a><a id="7471" class="Number">11</a> <a id="7474" href="Data.Nat.Base.html#1330" class="Function Operator">≤ᵇ_</a><a id="7477" class="Symbol">)</a>

<a id="7480" href="Monoids.html#7480" class="Function">_</a> <a id="7482" class="Symbol">:</a> <a id="7484" href="Monoids.html#7352" class="Function">all≤5?</a> <a id="7491" href="Monoids.html#7297" class="Function">numbers</a> <a id="7499" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="7501" href="Agda.Builtin.Bool.html#175" class="InductiveConstructor">false</a>
<a id="7507" class="Symbol">_</a> <a id="7509" class="Symbol">=</a> <a id="7511" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>

<a id="7517" href="Monoids.html#7517" class="Function">_</a> <a id="7519" class="Symbol">:</a> <a id="7521" href="Monoids.html#7414" class="Function">any&gt;10?</a> <a id="7529" class="Symbol">(</a><a id="7530" class="Number">11</a> <a id="7533" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7535" href="Monoids.html#7297" class="Function">numbers</a><a id="7542" class="Symbol">)</a> <a id="7544" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="7546" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a>
<a id="7551" class="Symbol">_</a> <a id="7553" class="Symbol">=</a> <a id="7555" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre>
<p>We can easily generalize this notion of <code>mapping</code> and then <code>folding</code> by a clever use
of the structure provided by a <code>monoid</code>.</p>
<pre class="Agda"><a id="foldMapList"></a><a id="7700" href="Monoids.html#7700" class="Function">foldMapList</a> <a id="7712" class="Symbol">:</a> <a id="7714" class="Symbol">⦃</a> <a id="7716" href="Monoids.html#5602" class="Record">Monoid</a> <a id="7723" href="Monoids.html#2503" class="Generalizable">B</a> <a id="7725" class="Symbol">⦄</a> <a id="7727" class="Symbol">→</a> <a id="7729" class="Symbol">(</a><a id="7730" href="Monoids.html#2491" class="Generalizable">A</a> <a id="7732" class="Symbol">→</a> <a id="7734" href="Monoids.html#2503" class="Generalizable">B</a><a id="7735" class="Symbol">)</a> <a id="7737" class="Symbol">→</a> <a id="7739" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="7744" href="Monoids.html#2491" class="Generalizable">A</a> <a id="7746" class="Symbol">→</a> <a id="7748" href="Monoids.html#2503" class="Generalizable">B</a>
<a id="7750" href="Monoids.html#7700" class="Function">foldMapList</a> <a id="7762" class="Symbol">⦃</a> <a id="7764" href="Monoids.html#7764" class="Bound">mon</a> <a id="7768" class="Symbol">⦄</a> <a id="7770" href="Monoids.html#7770" class="Bound">f</a> <a id="7772" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="7775" class="Symbol">=</a> <a id="7777" href="Monoids.html#5662" class="Function">ε</a>
  <a id="7781" class="Keyword">where</a> <a id="7787" class="Keyword">open</a> <a id="7792" href="Monoids.html#5602" class="Module">Monoid</a> <a id="7799" href="Monoids.html#7764" class="Bound">mon</a>
<a id="7803" href="Monoids.html#7700" class="Function">foldMapList</a> <a id="7815" class="Symbol">⦃</a> <a id="7817" href="Monoids.html#7817" class="Bound">mon</a> <a id="7821" class="Symbol">⦄</a> <a id="7823" href="Monoids.html#7823" class="Bound">f</a> <a id="7825" class="Symbol">(</a><a id="7826" href="Monoids.html#7826" class="Bound">x</a> <a id="7828" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7830" href="Monoids.html#7830" class="Bound">xs</a><a id="7832" class="Symbol">)</a> <a id="7834" class="Symbol">=</a> <a id="7836" href="Monoids.html#7823" class="Bound">f</a> <a id="7838" href="Monoids.html#7826" class="Bound">x</a> <a id="7840" href="Monoids.html#5672" class="Function Operator">★</a> <a id="7842" href="Monoids.html#7700" class="Function">foldMapList</a> <a id="7854" href="Monoids.html#7823" class="Bound">f</a> <a id="7856" href="Monoids.html#7830" class="Bound">xs</a>
  <a id="7861" class="Keyword">where</a> <a id="7867" class="Keyword">open</a> <a id="7872" href="Monoids.html#5602" class="Module">Monoid</a> <a id="7879" href="Monoids.html#7817" class="Bound">mon</a>

<a id="7884" class="Keyword">module</a> <a id="7891" href="Monoids.html#7891" class="Module">_</a> <a id="7893" class="Keyword">where</a>
  <a id="7901" class="Keyword">instance</a> <a id="7910" href="Monoids.html#7910" class="Function">_</a> <a id="7912" class="Symbol">=</a> <a id="7914" href="Monoids.html#5888" class="Function">∧-monoid</a>

  <a id="7926" href="Monoids.html#7926" class="Function">all?</a> <a id="7931" class="Symbol">:</a> <a id="7933" class="Symbol">(</a><a id="7934" href="Monoids.html#2491" class="Generalizable">A</a> <a id="7936" class="Symbol">→</a> <a id="7938" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a><a id="7942" class="Symbol">)</a> <a id="7944" class="Symbol">→</a> <a id="7946" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="7951" href="Monoids.html#2491" class="Generalizable">A</a> <a id="7953" class="Symbol">→</a> <a id="7955" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
  <a id="7962" href="Monoids.html#7926" class="Function">all?</a> <a id="7967" class="Symbol">=</a> <a id="7969" href="Monoids.html#7700" class="Function">foldMapList</a>

<a id="7982" class="Keyword">module</a> <a id="7989" href="Monoids.html#7989" class="Module">_</a> <a id="7991" class="Keyword">where</a>
  <a id="7999" class="Keyword">instance</a> <a id="8008" href="Monoids.html#8008" class="Function">_</a> <a id="8010" class="Symbol">=</a> <a id="8012" href="Monoids.html#6211" class="Function">∨-monoid</a>

  <a id="8024" href="Monoids.html#8024" class="Function">any?</a> <a id="8029" class="Symbol">:</a> <a id="8031" class="Symbol">(</a><a id="8032" href="Monoids.html#2491" class="Generalizable">A</a> <a id="8034" class="Symbol">→</a> <a id="8036" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a><a id="8040" class="Symbol">)</a> <a id="8042" class="Symbol">→</a> <a id="8044" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="8049" href="Monoids.html#2491" class="Generalizable">A</a> <a id="8051" class="Symbol">→</a> <a id="8053" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
  <a id="8060" href="Monoids.html#8024" class="Function">any?</a> <a id="8065" class="Symbol">=</a> <a id="8067" href="Monoids.html#7700" class="Function">foldMapList</a>

<a id="8080" href="Monoids.html#8080" class="Function">_</a> <a id="8082" class="Symbol">:</a> <a id="8084" href="Monoids.html#7926" class="Function">all?</a> <a id="8089" class="Symbol">(</a><a id="8090" href="Data.Nat.Base.html#1330" class="Function Operator">_≤ᵇ</a> <a id="8094" class="Number">5</a><a id="8095" class="Symbol">)</a> <a id="8097" href="Monoids.html#7297" class="Function">numbers</a> <a id="8105" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="8107" href="Agda.Builtin.Bool.html#175" class="InductiveConstructor">false</a>
<a id="8113" class="Symbol">_</a> <a id="8115" class="Symbol">=</a> <a id="8117" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>

<a id="8123" href="Monoids.html#8123" class="Function">_</a> <a id="8125" class="Symbol">:</a> <a id="8127" href="Monoids.html#8024" class="Function">any?</a> <a id="8132" class="Symbol">(</a><a id="8133" class="Number">11</a> <a id="8136" href="Data.Nat.Base.html#1330" class="Function Operator">≤ᵇ_</a><a id="8139" class="Symbol">)</a> <a id="8141" class="Symbol">(</a><a id="8142" class="Number">11</a> <a id="8145" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="8147" href="Monoids.html#7297" class="Function">numbers</a><a id="8154" class="Symbol">)</a> <a id="8156" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="8158" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a>
<a id="8163" class="Symbol">_</a> <a id="8165" class="Symbol">=</a> <a id="8167" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre>
<p>Pretty neat? I think so! We can do other cool things too, we can for example
flatten nested lists.</p>
<pre class="Agda"><a id="8285" class="Keyword">module</a> <a id="8292" href="Monoids.html#8292" class="Module">_</a> <a id="8294" class="Keyword">where</a>

  <a id="8303" class="Keyword">open</a> <a id="8308" href="Monoids.html#3991" class="Module">is-semigroup</a>
  <a id="8323" class="Keyword">open</a> <a id="8328" href="Monoids.html#5367" class="Module">is-monoid</a>
  <a id="8340" class="Keyword">open</a> <a id="8345" href="Monoids.html#4111" class="Module">Semigroup</a>
  <a id="8357" class="Keyword">open</a> <a id="8362" href="Monoids.html#5602" class="Module">Monoid</a>

  <a id="8372" href="Monoids.html#8372" class="Function">[]-semigroup</a> <a id="8385" class="Symbol">:</a> <a id="8387" href="Monoids.html#4111" class="Record">Semigroup</a> <a id="8397" class="Symbol">(</a><a id="8398" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="8403" href="Monoids.html#2491" class="Generalizable">A</a><a id="8404" class="Symbol">)</a>
  <a id="8408" href="Monoids.html#4174" class="Field Operator">_★_</a> <a id="8412" href="Monoids.html#8372" class="Function">[]-semigroup</a> <a id="8425" class="Symbol">=</a> <a id="8427" href="Data.List.Base.html#1943" class="Function Operator">_++_</a>
  <a id="8434" href="Monoids.html#4059" class="Field">assoc</a> <a id="8440" class="Symbol">(</a><a id="8441" href="Monoids.html#4194" class="Field">has-is-semigroup</a> <a id="8458" href="Monoids.html#8372" class="Function">[]-semigroup</a><a id="8470" class="Symbol">)</a> <a id="8472" class="Symbol">=</a> <a id="8474" href="Data.List.Properties.html#5580" class="Function">++-assoc</a>

  <a id="8486" href="Monoids.html#8486" class="Function">[]-monoid</a> <a id="8496" class="Symbol">:</a> <a id="8498" href="Monoids.html#5602" class="Record">Monoid</a> <a id="8505" class="Symbol">(</a><a id="8506" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="8511" href="Monoids.html#2491" class="Generalizable">A</a><a id="8512" class="Symbol">)</a>
  <a id="8516" href="Monoids.html#5662" class="Field">ε</a> <a id="8518" href="Monoids.html#8486" class="Function">[]-monoid</a> <a id="8528" class="Symbol">=</a> <a id="8530" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a>
  <a id="8535" href="Monoids.html#5672" class="Field Operator">_★_</a> <a id="8539" href="Monoids.html#8486" class="Function">[]-monoid</a> <a id="8549" class="Symbol">=</a> <a id="8551" href="Data.List.Base.html#1943" class="Function Operator">_++_</a>
  <a id="8558" href="Monoids.html#5440" class="Field">has-is-semigroup</a> <a id="8575" class="Symbol">(</a><a id="8576" href="Monoids.html#5692" class="Field">has-is-monoid</a> <a id="8590" href="Monoids.html#8486" class="Function">[]-monoid</a><a id="8599" class="Symbol">)</a> <a id="8601" class="Symbol">=</a> <a id="8603" href="Monoids.html#4194" class="Field">has-is-semigroup</a> <a id="8620" href="Monoids.html#8372" class="Function">[]-semigroup</a>
  <a id="8635" href="Monoids.html#5534" class="Field">identityˡ</a> <a id="8645" class="Symbol">(</a><a id="8646" href="Monoids.html#5692" class="Field">has-is-monoid</a> <a id="8660" href="Monoids.html#8486" class="Function">[]-monoid</a><a id="8669" class="Symbol">)</a> <a id="8671" class="Symbol">=</a> <a id="8673" href="Data.List.Properties.html#5704" class="Function">++-identityˡ</a>
  <a id="8688" href="Monoids.html#5566" class="Field">identityʳ</a> <a id="8698" class="Symbol">(</a><a id="8699" href="Monoids.html#5692" class="Field">has-is-monoid</a> <a id="8713" href="Monoids.html#8486" class="Function">[]-monoid</a><a id="8722" class="Symbol">)</a> <a id="8724" class="Symbol">=</a> <a id="8726" href="Data.List.Properties.html#5768" class="Function">++-identityʳ</a>

<a id="8740" class="Keyword">module</a> <a id="8747" href="Monoids.html#8747" class="Module">_</a> <a id="8749" class="Keyword">where</a>
  <a id="8757" class="Keyword">instance</a> <a id="8766" href="Monoids.html#8766" class="Function">_</a> <a id="8768" class="Symbol">=</a> <a id="8770" href="Monoids.html#8486" class="Function">[]-monoid</a>

  <a id="8783" href="Monoids.html#8783" class="Function">flatten</a> <a id="8791" class="Symbol">:</a> <a id="8793" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="8798" class="Symbol">(</a><a id="8799" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="8804" href="Monoids.html#2491" class="Generalizable">A</a><a id="8805" class="Symbol">)</a> <a id="8807" class="Symbol">→</a> <a id="8809" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="8814" href="Monoids.html#2491" class="Generalizable">A</a>
  <a id="8818" href="Monoids.html#8783" class="Function">flatten</a> <a id="8826" class="Symbol">=</a> <a id="8828" href="Monoids.html#7700" class="Function">foldMapList</a> <a id="8840" href="Function.Base.html#704" class="Function">id</a>

<a id="8844" href="Monoids.html#8844" class="Function">_</a> <a id="8846" class="Symbol">:</a> <a id="8848" href="Monoids.html#8783" class="Function">flatten</a> <a id="8856" class="Symbol">((</a><a id="8858" class="Number">1</a> <a id="8860" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="8862" class="Number">2</a> <a id="8864" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="8866" class="InductiveConstructor">[]</a><a id="8868" class="Symbol">)</a> <a id="8870" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="8872" class="Symbol">(</a><a id="8873" class="Number">3</a> <a id="8875" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="8877" class="Number">4</a> <a id="8879" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="8881" class="InductiveConstructor">[]</a><a id="8883" class="Symbol">)</a> <a id="8885" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="8887" class="InductiveConstructor">[]</a><a id="8889" class="Symbol">)</a> <a id="8891" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="8893" class="Number">1</a> <a id="8895" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="8897" class="Number">2</a> <a id="8899" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="8901" class="Number">3</a> <a id="8903" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="8905" class="Number">4</a> <a id="8907" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="8909" class="InductiveConstructor">[]</a>
<a id="8912" class="Symbol">_</a> <a id="8914" class="Symbol">=</a> <a id="8916" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre>
<p>Or take sums and products. Excuse the mostly boring <code>semigroup</code> and <code>monoid</code> instance declarations.</p>
<pre class="Agda"><a id="9035" class="Keyword">module</a> <a id="9042" href="Monoids.html#9042" class="Module">_</a> <a id="9044" class="Keyword">where</a>

  <a id="9053" class="Keyword">open</a> <a id="9058" href="Monoids.html#3991" class="Module">is-semigroup</a>
  <a id="9073" class="Keyword">open</a> <a id="9078" href="Monoids.html#5367" class="Module">is-monoid</a>
  <a id="9090" class="Keyword">open</a> <a id="9095" href="Monoids.html#4111" class="Module">Semigroup</a>
  <a id="9107" class="Keyword">open</a> <a id="9112" href="Monoids.html#5602" class="Module">Monoid</a>

  <a id="9122" href="Monoids.html#9122" class="Function">+-semi</a> <a id="9129" class="Symbol">:</a> <a id="9131" href="Monoids.html#4111" class="Record">Semigroup</a> <a id="9141" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
  <a id="9145" href="Monoids.html#4174" class="Field Operator">_★_</a> <a id="9149" href="Monoids.html#9122" class="Function">+-semi</a> <a id="9156" class="Symbol">=</a> <a id="9158" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">_+_</a>
  <a id="9164" href="Monoids.html#4059" class="Field">assoc</a> <a id="9170" class="Symbol">(</a><a id="9171" href="Monoids.html#4194" class="Field">has-is-semigroup</a> <a id="9188" href="Monoids.html#9122" class="Function">+-semi</a><a id="9194" class="Symbol">)</a> <a id="9196" class="Symbol">=</a> <a id="9198" href="Data.Nat.Properties.html#14455" class="Function">+-assoc</a>

  <a id="9209" href="Monoids.html#9209" class="Function">+-0</a> <a id="9213" class="Symbol">:</a> <a id="9215" href="Monoids.html#5602" class="Record">Monoid</a> <a id="9222" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
  <a id="9226" href="Monoids.html#5662" class="Field">ε</a> <a id="9228" href="Monoids.html#9209" class="Function">+-0</a> <a id="9232" class="Symbol">=</a> <a id="9234" class="Number">0</a>
  <a id="9238" href="Monoids.html#5672" class="Field Operator">_★_</a> <a id="9242" href="Monoids.html#9209" class="Function">+-0</a> <a id="9246" class="Symbol">=</a> <a id="9248" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">_+_</a>
  <a id="9254" href="Monoids.html#5440" class="Field">has-is-semigroup</a> <a id="9271" class="Symbol">(</a><a id="9272" href="Monoids.html#5692" class="Field">has-is-monoid</a> <a id="9286" href="Monoids.html#9209" class="Function">+-0</a><a id="9289" class="Symbol">)</a> <a id="9291" class="Symbol">=</a> <a id="9293" href="Monoids.html#4194" class="Field">has-is-semigroup</a> <a id="9310" href="Monoids.html#9122" class="Function">+-semi</a>
  <a id="9319" href="Monoids.html#5534" class="Field">identityˡ</a> <a id="9329" class="Symbol">(</a><a id="9330" href="Monoids.html#5692" class="Field">has-is-monoid</a> <a id="9344" href="Monoids.html#9209" class="Function">+-0</a><a id="9347" class="Symbol">)</a> <a id="9349" class="Symbol">=</a> <a id="9351" href="Data.Nat.Properties.html#14556" class="Function">+-identityˡ</a>
  <a id="9365" href="Monoids.html#5566" class="Field">identityʳ</a> <a id="9375" class="Symbol">(</a><a id="9376" href="Monoids.html#5692" class="Field">has-is-monoid</a> <a id="9390" href="Monoids.html#9209" class="Function">+-0</a><a id="9393" class="Symbol">)</a> <a id="9395" class="Symbol">=</a> <a id="9397" href="Data.Nat.Properties.html#14611" class="Function">+-identityʳ</a>

  <a id="9412" href="Monoids.html#9412" class="Function">*-semi</a> <a id="9419" class="Symbol">:</a> <a id="9421" href="Monoids.html#4111" class="Record">Semigroup</a> <a id="9431" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
  <a id="9435" href="Monoids.html#4174" class="Field Operator">_★_</a> <a id="9439" href="Monoids.html#9412" class="Function">*-semi</a> <a id="9446" class="Symbol">=</a> <a id="9448" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">_*_</a>
  <a id="9454" href="Monoids.html#4059" class="Field">assoc</a> <a id="9460" class="Symbol">(</a><a id="9461" href="Monoids.html#4194" class="Field">has-is-semigroup</a> <a id="9478" href="Monoids.html#9412" class="Function">*-semi</a><a id="9484" class="Symbol">)</a> <a id="9486" class="Symbol">=</a> <a id="9488" href="Data.Nat.Properties.html#22029" class="Function">*-assoc</a>

  <a id="9499" href="Monoids.html#9499" class="Function">*-1</a> <a id="9503" class="Symbol">:</a> <a id="9505" href="Monoids.html#5602" class="Record">Monoid</a> <a id="9512" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
  <a id="9516" href="Monoids.html#5662" class="Field">ε</a> <a id="9518" href="Monoids.html#9499" class="Function">*-1</a> <a id="9522" class="Symbol">=</a> <a id="9524" class="Number">1</a>
  <a id="9528" href="Monoids.html#5672" class="Field Operator">_★_</a> <a id="9532" href="Monoids.html#9499" class="Function">*-1</a> <a id="9536" class="Symbol">=</a> <a id="9538" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">_*_</a>
  <a id="9544" href="Monoids.html#5440" class="Field">has-is-semigroup</a> <a id="9561" class="Symbol">(</a><a id="9562" href="Monoids.html#5692" class="Field">has-is-monoid</a> <a id="9576" href="Monoids.html#9499" class="Function">*-1</a><a id="9579" class="Symbol">)</a> <a id="9581" class="Symbol">=</a> <a id="9583" href="Monoids.html#4194" class="Field">has-is-semigroup</a> <a id="9600" href="Monoids.html#9412" class="Function">*-semi</a>
  <a id="9609" href="Monoids.html#5534" class="Field">identityˡ</a> <a id="9619" class="Symbol">(</a><a id="9620" href="Monoids.html#5692" class="Field">has-is-monoid</a> <a id="9634" href="Monoids.html#9499" class="Function">*-1</a><a id="9637" class="Symbol">)</a> <a id="9639" class="Symbol">=</a> <a id="9641" href="Data.Nat.Properties.html#20929" class="Function">*-identityˡ</a>
  <a id="9655" href="Monoids.html#5566" class="Field">identityʳ</a> <a id="9665" class="Symbol">(</a><a id="9666" href="Monoids.html#5692" class="Field">has-is-monoid</a> <a id="9680" href="Monoids.html#9499" class="Function">*-1</a><a id="9683" class="Symbol">)</a> <a id="9685" class="Symbol">=</a> <a id="9687" href="Data.Nat.Properties.html#20993" class="Function">*-identityʳ</a>

<a id="9700" class="Keyword">module</a> <a id="9707" href="Monoids.html#9707" class="Module">_</a> <a id="9709" class="Keyword">where</a>
  <a id="9717" class="Keyword">instance</a> <a id="9726" href="Monoids.html#9726" class="Function">_</a> <a id="9728" class="Symbol">=</a> <a id="9730" href="Monoids.html#9209" class="Function">+-0</a>

  <a id="9737" href="Monoids.html#9737" class="Function">sum</a> <a id="9741" class="Symbol">:</a> <a id="9743" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="9748" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="9750" class="Symbol">→</a> <a id="9752" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
  <a id="9756" href="Monoids.html#9737" class="Function">sum</a> <a id="9760" class="Symbol">=</a> <a id="9762" href="Monoids.html#7700" class="Function">foldMapList</a> <a id="9774" href="Function.Base.html#704" class="Function">id</a>

<a id="9778" href="Monoids.html#9778" class="Function">_</a> <a id="9780" class="Symbol">:</a> <a id="9782" href="Monoids.html#9737" class="Function">sum</a> <a id="9786" href="Monoids.html#7297" class="Function">numbers</a> <a id="9794" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="9796" class="Number">21</a>
<a id="9799" class="Symbol">_</a> <a id="9801" class="Symbol">=</a> <a id="9803" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>

<a id="9809" class="Keyword">module</a> <a id="9816" href="Monoids.html#9816" class="Module">_</a> <a id="9818" class="Keyword">where</a>
  <a id="9826" class="Keyword">instance</a> <a id="9835" href="Monoids.html#9835" class="Function">_</a> <a id="9837" class="Symbol">=</a> <a id="9839" href="Monoids.html#9499" class="Function">*-1</a>

  <a id="9846" href="Monoids.html#9846" class="Function">product</a> <a id="9854" class="Symbol">=</a> <a id="9856" href="Monoids.html#7700" class="Function">foldMapList</a> <a id="9868" href="Function.Base.html#704" class="Function">id</a>

<a id="9872" href="Monoids.html#9872" class="Function">_</a> <a id="9874" class="Symbol">:</a> <a id="9876" href="Monoids.html#9846" class="Function">product</a> <a id="9884" href="Monoids.html#7297" class="Function">numbers</a> <a id="9892" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="9894" class="Number">720</a>
<a id="9898" class="Symbol">_</a> <a id="9900" class="Symbol">=</a> <a id="9902" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre>
<p>An interesting <code>monoid</code> is the <code>dual</code> of some other <code>monoid</code>.</p>
<pre class="Agda"><a id="9983" class="Keyword">module</a> <a id="9990" href="Monoids.html#9990" class="Module">_</a> <a id="9992" class="Symbol">(</a><a id="9993" href="Monoids.html#9993" class="Bound">mon</a> <a id="9997" class="Symbol">:</a> <a id="9999" href="Monoids.html#5602" class="Record">Monoid</a> <a id="10006" href="Monoids.html#2491" class="Generalizable">A</a><a id="10007" class="Symbol">)</a> <a id="10009" class="Keyword">where</a>
  <a id="10017" class="Keyword">open</a> <a id="10022" href="Monoids.html#5602" class="Module">Monoid</a> <a id="10029" href="Monoids.html#9993" class="Bound">mon</a>

  <a id="10036" href="Monoids.html#10036" class="Function">dual</a> <a id="10041" class="Symbol">:</a> <a id="10043" href="Monoids.html#5602" class="Record">Monoid</a> <a id="10050" href="Monoids.html#10006" class="Bound">A</a>
  <a id="10054" href="Monoids.html#5662" class="Field">Monoid.ε</a> <a id="10063" href="Monoids.html#10036" class="Function">dual</a> <a id="10068" class="Symbol">=</a> <a id="10070" href="Monoids.html#5662" class="Field">ε</a>
  <a id="10074" href="Monoids.html#5672" class="Field Operator">Monoid._★_</a> <a id="10085" href="Monoids.html#10036" class="Function">dual</a> <a id="10090" class="Symbol">=</a> <a id="10092" href="Function.Base.html#1638" class="Function">flip</a> <a id="10097" href="Monoids.html#5672" class="Field Operator">_★_</a>
  <a id="10103" href="Monoids.html#4059" class="Field">is-semigroup.assoc</a> <a id="10122" class="Symbol">(</a><a id="10123" href="Monoids.html#5440" class="Field">is-monoid.has-is-semigroup</a> <a id="10150" class="Symbol">(</a><a id="10151" href="Monoids.html#5692" class="Field">has-is-monoid</a> <a id="10165" href="Monoids.html#10036" class="Function">dual</a><a id="10169" class="Symbol">))</a>
    <a id="10176" href="Monoids.html#10176" class="Bound">x</a> <a id="10178" href="Monoids.html#10178" class="Bound">y</a> <a id="10180" href="Monoids.html#10180" class="Bound">z</a> <a id="10182" class="Symbol">=</a> <a id="10184" href="Relation.Binary.PropositionalEquality.Core.html#1712" class="Function">sym</a> <a id="10188" class="Symbol">(</a><a id="10189" href="Monoids.html#4059" class="Function">assoc</a> <a id="10195" href="Monoids.html#10180" class="Bound">z</a> <a id="10197" href="Monoids.html#10178" class="Bound">y</a> <a id="10199" href="Monoids.html#10176" class="Bound">x</a><a id="10200" class="Symbol">)</a>
  <a id="10204" href="Monoids.html#5534" class="Field">is-monoid.identityˡ</a> <a id="10224" class="Symbol">(</a><a id="10225" href="Monoids.html#5692" class="Field">has-is-monoid</a> <a id="10239" href="Monoids.html#10036" class="Function">dual</a><a id="10243" class="Symbol">)</a> <a id="10245" class="Symbol">=</a> <a id="10247" href="Monoids.html#5566" class="Function">identityʳ</a>
  <a id="10259" href="Monoids.html#5566" class="Field">is-monoid.identityʳ</a> <a id="10279" class="Symbol">(</a><a id="10280" href="Monoids.html#5692" class="Field">has-is-monoid</a> <a id="10294" href="Monoids.html#10036" class="Function">dual</a><a id="10298" class="Symbol">)</a> <a id="10300" class="Symbol">=</a> <a id="10302" href="Monoids.html#5534" class="Function">identityˡ</a>

<a id="reverse"></a><a id="10313" href="Monoids.html#10313" class="Function">reverse</a> <a id="10321" class="Symbol">:</a> <a id="10323" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="10328" href="Monoids.html#2491" class="Generalizable">A</a> <a id="10330" class="Symbol">→</a> <a id="10332" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="10337" href="Monoids.html#2491" class="Generalizable">A</a>
<a id="10339" href="Monoids.html#10313" class="Function">reverse</a> <a id="10347" class="Symbol">=</a> <a id="10349" href="Monoids.html#7700" class="Function">foldMapList</a> <a id="10361" class="Symbol">⦃</a> <a id="10363" href="Monoids.html#10036" class="Function">dual</a> <a id="10368" class="Symbol">(</a><a id="10369" href="Monoids.html#8486" class="Function">[]-monoid</a><a id="10378" class="Symbol">)</a> <a id="10380" class="Symbol">⦄</a> <a id="10382" class="Symbol">(</a><a id="10383" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">_∷</a> <a id="10386" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a><a id="10388" class="Symbol">)</a>

<a id="10391" href="Monoids.html#10391" class="Function">_</a> <a id="10393" class="Symbol">:</a> <a id="10395" href="Monoids.html#10313" class="Function">reverse</a> <a id="10403" href="Monoids.html#7297" class="Function">numbers</a> <a id="10411" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="10413" class="Symbol">(</a><a id="10414" class="Number">6</a> <a id="10416" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="10418" class="Number">5</a> <a id="10420" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="10422" class="Number">4</a> <a id="10424" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="10426" class="Number">3</a> <a id="10428" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="10430" class="Number">2</a> <a id="10432" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="10434" class="Number">1</a> <a id="10436" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="10438" class="InductiveConstructor">[]</a><a id="10440" class="Symbol">)</a>
<a id="10442" class="Symbol">_</a> <a id="10444" class="Symbol">=</a> <a id="10446" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre>
<p>Another example of a <code>monoid</code> built of other <code>monoids</code> is the <em>cartetesian product</em> or <code>_×_</code>.</p>
<pre class="Agda"><a id="10559" class="Keyword">module</a> <a id="10566" href="Monoids.html#10566" class="Module">_</a> <a id="10568" class="Symbol">(</a><a id="10569" href="Monoids.html#10569" class="Bound">ma</a> <a id="10572" class="Symbol">:</a> <a id="10574" href="Monoids.html#5602" class="Record">Monoid</a> <a id="10581" href="Monoids.html#2491" class="Generalizable">A</a><a id="10582" class="Symbol">)</a> <a id="10584" class="Symbol">(</a><a id="10585" href="Monoids.html#10585" class="Bound">mb</a> <a id="10588" class="Symbol">:</a> <a id="10590" href="Monoids.html#5602" class="Record">Monoid</a> <a id="10597" href="Monoids.html#2503" class="Generalizable">B</a><a id="10598" class="Symbol">)</a> <a id="10600" class="Keyword">where</a>

  <a id="10609" class="Keyword">open</a> <a id="10614" href="Monoids.html#5602" class="Module">Monoid</a> <a id="10621" class="Symbol">⦃</a> <a id="10623" class="Symbol">...</a> <a id="10627" class="Symbol">⦄</a>

  <a id="10632" class="Keyword">instance</a>
    <a id="10645" href="Monoids.html#10645" class="Function">_</a> <a id="10647" class="Symbol">=</a> <a id="10649" href="Monoids.html#10569" class="Bound">ma</a>
    <a id="10656" href="Monoids.html#10656" class="Function">_</a> <a id="10658" class="Symbol">=</a> <a id="10660" href="Monoids.html#10585" class="Bound">mb</a>

  <a id="10666" href="Monoids.html#10666" class="Function">×-semigroup</a> <a id="10678" class="Symbol">:</a> <a id="10680" href="Monoids.html#4111" class="Record">Semigroup</a> <a id="10690" class="Symbol">(</a><a id="10691" href="Monoids.html#10581" class="Bound">A</a> <a id="10693" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="10695" href="Monoids.html#10597" class="Bound">B</a><a id="10696" class="Symbol">)</a>
  <a id="10700" class="Symbol">(</a><a id="10701" href="Monoids.html#10666" class="Function">×-semigroup</a> <a id="10713" href="Monoids.html#4174" class="Field Operator">Semigroup.★</a> <a id="10725" class="Symbol">(</a><a id="10726" href="Monoids.html#10726" class="Bound">a</a> <a id="10728" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="10730" href="Monoids.html#10730" class="Bound">b</a><a id="10731" class="Symbol">))</a> <a id="10734" class="Symbol">(</a><a id="10735" href="Monoids.html#10735" class="Bound">a₁</a> <a id="10738" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="10740" href="Monoids.html#10740" class="Bound">b₁</a><a id="10742" class="Symbol">)</a> <a id="10744" class="Symbol">=</a> <a id="10746" href="Monoids.html#10726" class="Bound">a</a> <a id="10748" href="Monoids.html#5672" class="Field Operator">★</a> <a id="10750" href="Monoids.html#10735" class="Bound">a₁</a> <a id="10753" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="10755" href="Monoids.html#10730" class="Bound">b</a> <a id="10757" href="Monoids.html#5672" class="Field Operator">★</a> <a id="10759" href="Monoids.html#10740" class="Bound">b₁</a>
  <a id="10764" href="Monoids.html#4059" class="Field">is-semigroup.assoc</a> <a id="10783" class="Symbol">(</a><a id="10784" href="Monoids.html#4194" class="Field">Semigroup.has-is-semigroup</a> <a id="10811" href="Monoids.html#10666" class="Function">×-semigroup</a><a id="10822" class="Symbol">)</a> 
    <a id="10829" class="Symbol">(</a><a id="10830" href="Monoids.html#10830" class="Bound">a₁</a> <a id="10833" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="10835" href="Monoids.html#10835" class="Bound">b₁</a><a id="10837" class="Symbol">)</a> <a id="10839" class="Symbol">(</a><a id="10840" href="Monoids.html#10840" class="Bound">a₂</a> <a id="10843" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="10845" href="Monoids.html#10845" class="Bound">b₂</a><a id="10847" class="Symbol">)</a> <a id="10849" class="Symbol">(</a><a id="10850" href="Monoids.html#10850" class="Bound">a₃</a> <a id="10853" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="10855" href="Monoids.html#10855" class="Bound">b₃</a><a id="10857" class="Symbol">)</a> <a id="10859" class="Keyword">rewrite</a> <a id="10867" href="Monoids.html#4059" class="Function">assoc</a> <a id="10873" href="Monoids.html#10830" class="Bound">a₁</a> <a id="10876" href="Monoids.html#10840" class="Bound">a₂</a> <a id="10879" href="Monoids.html#10850" class="Bound">a₃</a> <a id="10882" class="Keyword">rewrite</a> <a id="10890" href="Monoids.html#4059" class="Function">assoc</a> <a id="10896" href="Monoids.html#10835" class="Bound">b₁</a> <a id="10899" href="Monoids.html#10845" class="Bound">b₂</a> <a id="10902" href="Monoids.html#10855" class="Bound">b₃</a> <a id="10905" class="Symbol">=</a> <a id="10907" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>

  <a id="10915" href="Monoids.html#10915" class="Function">×-monoid</a> <a id="10924" class="Symbol">:</a> <a id="10926" href="Monoids.html#5602" class="Record">Monoid</a> <a id="10933" class="Symbol">(</a><a id="10934" href="Monoids.html#10581" class="Bound">A</a> <a id="10936" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="10938" href="Monoids.html#10597" class="Bound">B</a><a id="10939" class="Symbol">)</a>
  <a id="10943" href="Monoids.html#5662" class="Field">Monoid.ε</a> <a id="10952" href="Monoids.html#10915" class="Function">×-monoid</a> <a id="10961" class="Symbol">=</a> <a id="10963" href="Monoids.html#5662" class="Field">ε</a> <a id="10965" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="10967" href="Monoids.html#5662" class="Field">ε</a>
  <a id="10971" class="Symbol">(</a><a id="10972" href="Monoids.html#10915" class="Function">×-monoid</a> <a id="10981" href="Monoids.html#5672" class="Field Operator">Monoid.★</a> <a id="10990" class="Symbol">(</a><a id="10991" href="Monoids.html#10991" class="Bound">a</a> <a id="10993" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="10995" href="Monoids.html#10995" class="Bound">b</a><a id="10996" class="Symbol">))</a> <a id="10999" class="Symbol">(</a><a id="11000" href="Monoids.html#11000" class="Bound">a₁</a> <a id="11003" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="11005" href="Monoids.html#11005" class="Bound">b₁</a><a id="11007" class="Symbol">)</a> <a id="11009" class="Symbol">=</a> <a id="11011" href="Monoids.html#10991" class="Bound">a</a> <a id="11013" href="Monoids.html#5672" class="Field Operator">★</a> <a id="11015" href="Monoids.html#11000" class="Bound">a₁</a> <a id="11018" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="11020" href="Monoids.html#10995" class="Bound">b</a> <a id="11022" href="Monoids.html#5672" class="Field Operator">★</a> <a id="11024" href="Monoids.html#11005" class="Bound">b₁</a>
  <a id="11029" href="Monoids.html#5440" class="Field">is-monoid.has-is-semigroup</a> <a id="11056" class="Symbol">(</a><a id="11057" href="Monoids.html#5692" class="Field">Monoid.has-is-monoid</a> <a id="11078" href="Monoids.html#10915" class="Function">×-monoid</a><a id="11086" class="Symbol">)</a> <a id="11088" class="Symbol">=</a>
    <a id="11094" href="Monoids.html#4194" class="Field">Semigroup.has-is-semigroup</a> <a id="11121" href="Monoids.html#10666" class="Function">×-semigroup</a>
  <a id="11135" href="Monoids.html#5534" class="Field">is-monoid.identityˡ</a> <a id="11155" class="Symbol">(</a><a id="11156" href="Monoids.html#5692" class="Field">Monoid.has-is-monoid</a> <a id="11177" href="Monoids.html#10915" class="Function">×-monoid</a><a id="11185" class="Symbol">)</a> <a id="11187" class="Symbol">(</a><a id="11188" href="Monoids.html#11188" class="Bound">a</a> <a id="11190" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="11192" href="Monoids.html#11192" class="Bound">b</a><a id="11193" class="Symbol">)</a> 
    <a id="11200" class="Keyword">rewrite</a> <a id="11208" href="Monoids.html#5534" class="Function">identityˡ</a> <a id="11218" href="Monoids.html#11188" class="Bound">a</a> <a id="11220" class="Keyword">rewrite</a> <a id="11228" href="Monoids.html#5534" class="Function">identityˡ</a> <a id="11238" href="Monoids.html#11192" class="Bound">b</a> <a id="11240" class="Symbol">=</a> <a id="11242" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
  <a id="11249" href="Monoids.html#5566" class="Field">is-monoid.identityʳ</a> <a id="11269" class="Symbol">(</a><a id="11270" href="Monoids.html#5692" class="Field">Monoid.has-is-monoid</a> <a id="11291" href="Monoids.html#10915" class="Function">×-monoid</a><a id="11299" class="Symbol">)</a> <a id="11301" class="Symbol">(</a><a id="11302" href="Monoids.html#11302" class="Bound">a</a> <a id="11304" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="11306" href="Monoids.html#11306" class="Bound">b</a><a id="11307" class="Symbol">)</a>
    <a id="11313" class="Keyword">rewrite</a> <a id="11321" href="Monoids.html#5566" class="Function">identityʳ</a> <a id="11331" href="Monoids.html#11302" class="Bound">a</a> <a id="11333" class="Keyword">rewrite</a> <a id="11341" href="Monoids.html#5566" class="Function">identityʳ</a> <a id="11351" href="Monoids.html#11306" class="Bound">b</a> <a id="11353" class="Symbol">=</a> <a id="11355" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>

<a id="11361" class="Keyword">module</a> <a id="11368" href="Monoids.html#11368" class="Module">_</a> <a id="11370" class="Keyword">where</a>
  <a id="11378" class="Keyword">instance</a> <a id="11387" href="Monoids.html#11387" class="Function">_</a> <a id="11389" class="Symbol">=</a> <a id="11391" href="Monoids.html#10915" class="Function">×-monoid</a> <a id="11400" href="Monoids.html#9209" class="Function">+-0</a> <a id="11404" href="Monoids.html#9499" class="Function">*-1</a>

  <a id="11411" href="Monoids.html#11411" class="Function">sum×prod</a> <a id="11420" class="Symbol">:</a> <a id="11422" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="11427" class="Symbol">(</a><a id="11428" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="11430" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="11432" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a><a id="11433" class="Symbol">)</a> <a id="11435" class="Symbol">→</a> <a id="11437" class="Symbol">(</a><a id="11438" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="11440" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="11442" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a><a id="11443" class="Symbol">)</a>
  <a id="11447" href="Monoids.html#11411" class="Function">sum×prod</a> <a id="11456" class="Symbol">=</a> <a id="11458" href="Monoids.html#7700" class="Function">foldMapList</a> <a id="11470" href="Function.Base.html#704" class="Function">id</a>

<a id="11474" href="Monoids.html#11474" class="Function">_</a> <a id="11476" class="Symbol">:</a> <a id="11478" href="Monoids.html#11411" class="Function">sum×prod</a> <a id="11487" class="Symbol">(</a><a id="11488" href="Data.List.Base.html#3703" class="Function">zip</a> <a id="11492" href="Monoids.html#7297" class="Function">numbers</a> <a id="11500" href="Monoids.html#7297" class="Function">numbers</a><a id="11507" class="Symbol">)</a> <a id="11509" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="11511" class="Symbol">(</a><a id="11512" class="Number">21</a> <a id="11515" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="11517" class="Number">720</a><a id="11520" class="Symbol">)</a>
<a id="11522" class="Symbol">_</a> <a id="11524" class="Symbol">=</a> <a id="11526" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre>
<p>Up until now we have only worked on the <code>List</code> type. This is getting a bit boring and
redundant… On top of it being boring it might make you second guess the generality of
this approach. Can we only work on lists? As you might guess this is not the case!
We can define a more general structure <code>Foldable</code> and generalize this notion to arbitrary
data structures.</p>
<pre class="Agda"><a id="Foldable"></a><a id="11909" href="Monoids.html#11909" class="Function">Foldable</a> <a id="11918" class="Symbol">:</a> <a id="11920" class="Symbol">{</a><a id="11921" href="Monoids.html#11921" class="Bound">ℓ₁</a> <a id="11924" href="Monoids.html#11924" class="Bound">ℓ₂</a> <a id="11927" class="Symbol">:</a> <a id="11929" href="Agda.Primitive.html#591" class="Postulate">Level</a><a id="11934" class="Symbol">}</a> <a id="11936" class="Symbol">→</a> <a id="11938" class="Symbol">(</a><a id="11939" href="Monoids.html#11939" class="Bound">ℓᶠ</a> <a id="11942" class="Symbol">:</a> <a id="11944" href="Agda.Primitive.html#591" class="Postulate">Level</a><a id="11949" class="Symbol">)</a> <a id="11951" class="Symbol">→</a> <a id="11953" class="Symbol">(</a><a id="11954" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="11958" href="Monoids.html#11921" class="Bound">ℓ₁</a> <a id="11961" class="Symbol">→</a> <a id="11963" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="11967" href="Monoids.html#11939" class="Bound">ℓᶠ</a><a id="11969" class="Symbol">)</a> <a id="11971" class="Symbol">→</a> <a id="11973" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="11977" class="Symbol">(</a><a id="11978" href="Monoids.html#1472" class="Primitive">lsuc</a> <a id="11983" href="Monoids.html#11921" class="Bound">ℓ₁</a> <a id="11986" href="Agda.Primitive.html#804" class="Primitive Operator">⊔</a> <a id="11988" href="Monoids.html#1472" class="Primitive">lsuc</a> <a id="11993" href="Monoids.html#11924" class="Bound">ℓ₂</a> <a id="11996" href="Agda.Primitive.html#804" class="Primitive Operator">⊔</a> <a id="11998" href="Monoids.html#11939" class="Bound">ℓᶠ</a><a id="12000" class="Symbol">)</a>
<a id="12002" href="Monoids.html#11909" class="Function">Foldable</a> <a id="12011" class="Symbol">{</a><a id="12012" class="Argument">ℓ₂</a> <a id="12015" class="Symbol">=</a> <a id="12017" href="Monoids.html#12017" class="Bound">ℓ₂</a><a id="12019" class="Symbol">}</a> <a id="12021" class="Symbol">_</a> <a id="12023" href="Monoids.html#12023" class="Bound">F</a> <a id="12025" class="Symbol">=</a> <a id="12027" class="Symbol">∀</a> <a id="12029" class="Symbol">{</a><a id="12030" href="Monoids.html#12030" class="Bound">A</a><a id="12031" class="Symbol">}</a> <a id="12033" class="Symbol">{</a><a id="12034" href="Monoids.html#12034" class="Bound">B</a> <a id="12036" class="Symbol">:</a> <a id="12038" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="12042" href="Monoids.html#12017" class="Bound">ℓ₂</a><a id="12044" class="Symbol">}</a> <a id="12046" class="Symbol">→</a> <a id="12048" class="Symbol">⦃</a> <a id="12050" href="Monoids.html#5602" class="Record">Monoid</a> <a id="12057" href="Monoids.html#12034" class="Bound">B</a> <a id="12059" class="Symbol">⦄</a> <a id="12061" class="Symbol">→</a> <a id="12063" class="Symbol">(</a><a id="12064" href="Monoids.html#12030" class="Bound">A</a> <a id="12066" class="Symbol">→</a> <a id="12068" href="Monoids.html#12034" class="Bound">B</a><a id="12069" class="Symbol">)</a> <a id="12071" class="Symbol">→</a> <a id="12073" href="Monoids.html#12023" class="Bound">F</a> <a id="12075" href="Monoids.html#12030" class="Bound">A</a> <a id="12077" class="Symbol">→</a> <a id="12079" href="Monoids.html#12034" class="Bound">B</a>


<a id="foldableList"></a><a id="12083" href="Monoids.html#12083" class="Function">foldableList</a> <a id="12096" class="Symbol">:</a> <a id="12098" href="Monoids.html#11909" class="Function">Foldable</a> <a id="12107" class="Symbol">{</a><a id="12108" href="Monoids.html#2476" class="Generalizable">ℓ</a><a id="12109" class="Symbol">}</a> <a id="12111" class="Symbol">{</a><a id="12112" href="Monoids.html#2478" class="Generalizable">ℓ₂</a><a id="12114" class="Symbol">}</a> <a id="12116" class="Symbol">_</a> <a id="12118" href="Agda.Builtin.List.html#130" class="Datatype">List</a>
<a id="12123" href="Monoids.html#12083" class="Function">foldableList</a> <a id="12136" class="Symbol">=</a> <a id="12138" href="Monoids.html#7700" class="Function">foldMapList</a>

<a id="12151" class="Keyword">module</a> <a id="12158" href="Monoids.html#12158" class="Module">_</a> <a id="12160" class="Keyword">where</a>
  <a id="12168" class="Keyword">instance</a> <a id="12177" href="Monoids.html#12177" class="Function">_</a> <a id="12179" class="Symbol">=</a> <a id="12181" href="Monoids.html#9209" class="Function">+-0</a>

  <a id="12188" href="Monoids.html#12188" class="Function">length</a> <a id="12195" class="Symbol">:</a> <a id="12197" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="12202" href="Monoids.html#2491" class="Generalizable">A</a> <a id="12204" class="Symbol">→</a> <a id="12206" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
  <a id="12210" href="Monoids.html#12188" class="Function">length</a> <a id="12217" class="Symbol">=</a> <a id="12219" href="Monoids.html#12083" class="Function">foldableList</a> <a id="12232" class="Symbol">(</a><a id="12233" href="Function.Base.html#725" class="Function">const</a> <a id="12239" class="Number">1</a><a id="12240" class="Symbol">)</a>

<a id="12243" href="Monoids.html#12243" class="Function">_</a> <a id="12245" class="Symbol">:</a> <a id="12247" href="Monoids.html#12188" class="Function">length</a> <a id="12254" href="Monoids.html#7297" class="Function">numbers</a> <a id="12262" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="12264" class="Number">6</a>
<a id="12266" class="Symbol">_</a> <a id="12268" class="Symbol">=</a> <a id="12270" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre>
<h3 id="foldable-binary-trees"><a href="#foldable-binary-trees" class="anchor fas fa-xs fa-link"></a>Foldable binary trees</h3>
<p>I claimed that we can <code>foldMap</code> over other structures than <code>List</code>. Let’s define
a simple <em>binary tree</em> data structure and show that we can use the same machinery
on <em>binary trees</em> as we have been using on <em>lists</em>.</p>
<pre class="Agda"><a id="12530" class="Keyword">data</a> <a id="BT"></a><a id="12535" href="Monoids.html#12535" class="Datatype">BT</a> <a id="12538" class="Symbol">(</a><a id="12539" href="Monoids.html#12539" class="Bound">A</a> <a id="12541" class="Symbol">:</a> <a id="12543" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="12547" href="Monoids.html#2476" class="Generalizable">ℓ</a><a id="12548" class="Symbol">)</a> <a id="12550" class="Symbol">:</a> <a id="12552" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="12556" href="Monoids.html#12547" class="Bound">ℓ</a> <a id="12558" class="Keyword">where</a>
  <a id="BT.empty"></a><a id="12566" href="Monoids.html#12566" class="InductiveConstructor">empty</a> <a id="12572" class="Symbol">:</a> <a id="12574" href="Monoids.html#12535" class="Datatype">BT</a> <a id="12577" href="Monoids.html#12539" class="Bound">A</a>
  <a id="BT.branch"></a><a id="12581" href="Monoids.html#12581" class="InductiveConstructor">branch</a> <a id="12588" class="Symbol">:</a> <a id="12590" href="Monoids.html#12535" class="Datatype">BT</a> <a id="12593" href="Monoids.html#12539" class="Bound">A</a> <a id="12595" class="Symbol">→</a> <a id="12597" href="Monoids.html#12539" class="Bound">A</a> <a id="12599" class="Symbol">→</a> <a id="12601" href="Monoids.html#12535" class="Datatype">BT</a> <a id="12604" href="Monoids.html#12539" class="Bound">A</a> <a id="12606" class="Symbol">→</a> <a id="12608" href="Monoids.html#12535" class="Datatype">BT</a> <a id="12611" href="Monoids.html#12539" class="Bound">A</a>

<a id="12614" class="Keyword">pattern</a> <a id="leaf"></a><a id="12622" href="Monoids.html#12622" class="InductiveConstructor">leaf</a> <a id="12627" href="Monoids.html#12644" class="Bound">a</a> <a id="12629" class="Symbol">=</a> <a id="12631" href="Monoids.html#12581" class="InductiveConstructor">branch</a> <a id="12638" href="Monoids.html#12566" class="InductiveConstructor">empty</a> <a id="12644" href="Monoids.html#12644" class="Bound">a</a> <a id="12646" href="Monoids.html#12566" class="InductiveConstructor">empty</a>

<a id="foldableBT"></a><a id="12653" href="Monoids.html#12653" class="Function">foldableBT</a> <a id="12664" class="Symbol">:</a> <a id="12666" href="Monoids.html#11909" class="Function">Foldable</a> <a id="12675" class="Symbol">{</a><a id="12676" href="Level.html#521" class="Function">0ℓ</a><a id="12678" class="Symbol">}</a> <a id="12680" class="Symbol">{</a><a id="12681" href="Monoids.html#2476" class="Generalizable">ℓ</a><a id="12682" class="Symbol">}</a> <a id="12684" href="Level.html#521" class="Function">0ℓ</a> <a id="12687" href="Monoids.html#12535" class="Datatype">BT</a>
<a id="12690" href="Monoids.html#12653" class="Function">foldableBT</a> <a id="12701" class="Symbol">⦃</a> <a id="12703" href="Monoids.html#12703" class="Bound">mon</a> <a id="12707" class="Symbol">⦄</a> <a id="12709" href="Monoids.html#12709" class="Bound">f</a> <a id="12711" href="Monoids.html#12566" class="InductiveConstructor">empty</a> <a id="12717" class="Symbol">=</a> <a id="12719" href="Monoids.html#5662" class="Function">ε</a>
  <a id="12723" class="Keyword">where</a> <a id="12729" class="Keyword">open</a> <a id="12734" href="Monoids.html#5602" class="Module">Monoid</a> <a id="12741" href="Monoids.html#12703" class="Bound">mon</a>
<a id="12745" href="Monoids.html#12653" class="Function">foldableBT</a> <a id="12756" class="Symbol">⦃</a> <a id="12758" href="Monoids.html#12758" class="Bound">mon</a> <a id="12762" class="Symbol">⦄</a> <a id="12764" href="Monoids.html#12764" class="Bound">f</a> <a id="12766" class="Symbol">(</a><a id="12767" href="Monoids.html#12581" class="InductiveConstructor">branch</a> <a id="12774" href="Monoids.html#12774" class="Bound">l</a> <a id="12776" href="Monoids.html#12776" class="Bound">x</a> <a id="12778" href="Monoids.html#12778" class="Bound">r</a><a id="12779" class="Symbol">)</a> <a id="12781" class="Symbol">=</a>
  <a id="12785" href="Monoids.html#12653" class="Function">foldableBT</a> <a id="12796" href="Monoids.html#12764" class="Bound">f</a> <a id="12798" href="Monoids.html#12774" class="Bound">l</a> <a id="12800" href="Monoids.html#5672" class="Function Operator">★</a> <a id="12802" href="Monoids.html#12764" class="Bound">f</a> <a id="12804" href="Monoids.html#12776" class="Bound">x</a> <a id="12806" href="Monoids.html#5672" class="Function Operator">★</a> <a id="12808" href="Monoids.html#12653" class="Function">foldableBT</a> <a id="12819" href="Monoids.html#12764" class="Bound">f</a> <a id="12821" href="Monoids.html#12778" class="Bound">r</a>
  <a id="12825" class="Keyword">where</a> <a id="12831" class="Keyword">open</a> <a id="12836" href="Monoids.html#5602" class="Module">Monoid</a> <a id="12843" href="Monoids.html#12758" class="Bound">mon</a>

<a id="tree"></a><a id="12848" href="Monoids.html#12848" class="Function">tree</a> <a id="12853" class="Symbol">:</a> <a id="12855" href="Monoids.html#12535" class="Datatype">BT</a> <a id="12858" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
<a id="12860" href="Monoids.html#12848" class="Function">tree</a> <a id="12865" class="Symbol">=</a> <a id="12867" href="Monoids.html#12581" class="InductiveConstructor">branch</a> <a id="12874" class="Symbol">(</a><a id="12875" href="Monoids.html#12581" class="InductiveConstructor">branch</a> <a id="12882" class="Symbol">(</a><a id="12883" href="Monoids.html#12622" class="InductiveConstructor">leaf</a> <a id="12888" class="Number">20</a><a id="12890" class="Symbol">)</a> <a id="12892" class="Number">30</a> <a id="12895" class="Symbol">(</a><a id="12896" href="Monoids.html#12622" class="InductiveConstructor">leaf</a> <a id="12901" class="Number">40</a><a id="12903" class="Symbol">))</a> <a id="12906" class="Number">10</a> <a id="12909" class="Symbol">(</a><a id="12910" href="Monoids.html#12622" class="InductiveConstructor">leaf</a> <a id="12915" class="Number">50</a><a id="12917" class="Symbol">)</a>

<a id="12920" class="Keyword">module</a> <a id="12927" href="Monoids.html#12927" class="Module">_</a> <a id="12929" class="Keyword">where</a>
  <a id="12937" class="Keyword">instance</a> <a id="12946" href="Monoids.html#12946" class="Function">_</a> <a id="12948" class="Symbol">=</a> <a id="12950" href="Monoids.html#9209" class="Function">+-0</a>

  <a id="12957" href="Monoids.html#12957" class="Function">t-sum</a> <a id="12963" class="Symbol">:</a> <a id="12965" href="Monoids.html#12535" class="Datatype">BT</a> <a id="12968" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="12970" class="Symbol">→</a> <a id="12972" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
  <a id="12976" href="Monoids.html#12957" class="Function">t-sum</a> <a id="12982" class="Symbol">=</a> <a id="12984" href="Monoids.html#12653" class="Function">foldableBT</a> <a id="12995" href="Function.Base.html#704" class="Function">id</a>

  <a id="13001" href="Monoids.html#13001" class="Function">size</a> <a id="13006" class="Symbol">:</a> <a id="13008" href="Monoids.html#12535" class="Datatype">BT</a> <a id="13011" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="13013" class="Symbol">→</a> <a id="13015" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
  <a id="13019" href="Monoids.html#13001" class="Function">size</a> <a id="13024" class="Symbol">=</a> <a id="13026" href="Monoids.html#12653" class="Function">foldableBT</a> <a id="13037" class="Symbol">(</a><a id="13038" href="Function.Base.html#725" class="Function">const</a> <a id="13044" class="Number">1</a><a id="13045" class="Symbol">)</a>

<a id="13048" href="Monoids.html#13048" class="Function">_</a> <a id="13050" class="Symbol">:</a> <a id="13052" href="Monoids.html#12957" class="Function">t-sum</a> <a id="13058" href="Monoids.html#12848" class="Function">tree</a> <a id="13063" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="13065" class="Number">150</a>
<a id="13069" class="Symbol">_</a> <a id="13071" class="Symbol">=</a> <a id="13073" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>

<a id="13079" href="Monoids.html#13079" class="Function">_</a> <a id="13081" class="Symbol">:</a> <a id="13083" href="Monoids.html#13001" class="Function">size</a> <a id="13088" href="Monoids.html#12848" class="Function">tree</a> <a id="13093" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="13095" class="Number">5</a>
<a id="13097" class="Symbol">_</a> <a id="13099" class="Symbol">=</a> <a id="13101" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre>
<p>In fact at this point we have gained enough generality to turn any <code>Foldable</code> to a <code>List</code>!</p>
<pre class="Agda"><a id="toList"></a><a id="13211" href="Monoids.html#13211" class="Function">toList</a> <a id="13218" class="Symbol">:</a> <a id="13220" class="Symbol">∀</a> <a id="13222" class="Symbol">{</a><a id="13223" href="Monoids.html#13223" class="Bound">ℓ</a> <a id="13225" href="Monoids.html#13225" class="Bound">F</a><a id="13226" class="Symbol">}</a> <a id="13228" class="Symbol">→</a> <a id="13230" href="Monoids.html#11909" class="Function">Foldable</a> <a id="13239" href="Monoids.html#13223" class="Bound">ℓ</a> <a id="13241" href="Monoids.html#13225" class="Bound">F</a> <a id="13243" class="Symbol">→</a> <a id="13245" href="Monoids.html#13225" class="Bound">F</a> <a id="13247" href="Monoids.html#2491" class="Generalizable">A</a> <a id="13249" class="Symbol">→</a> <a id="13251" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="13256" href="Monoids.html#2491" class="Generalizable">A</a>
<a id="13258" href="Monoids.html#13211" class="Function">toList</a> <a id="13265" href="Monoids.html#13265" class="Bound">f</a> <a id="13267" class="Symbol">=</a> <a id="13269" href="Monoids.html#13265" class="Bound">f</a> <a id="13271" class="Symbol">⦃</a> <a id="13273" href="Monoids.html#8486" class="Function">[]-monoid</a> <a id="13283" class="Symbol">⦄</a> <a id="13285" class="Symbol">(</a><a id="13286" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">_∷</a> <a id="13289" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a><a id="13291" class="Symbol">)</a>

<a id="13294" href="Monoids.html#13294" class="Function">_</a> <a id="13296" class="Symbol">:</a> <a id="13298" href="Monoids.html#13211" class="Function">toList</a> <a id="13305" href="Monoids.html#12653" class="Function">foldableBT</a> <a id="13316" href="Monoids.html#12848" class="Function">tree</a> <a id="13321" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="13323" class="Number">20</a> <a id="13326" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="13328" class="Number">30</a> <a id="13331" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="13333" class="Number">40</a> <a id="13336" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="13338" class="Number">10</a> <a id="13341" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="13343" class="Number">50</a> <a id="13346" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="13348" class="InductiveConstructor">[]</a>
<a id="13351" class="Symbol">_</a> <a id="13353" class="Symbol">=</a> <a id="13355" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre>
<p>I hope this write up convined you that <code>monoid</code> is a useful part of any programmers
toolkit. There’s so much more to talk about <code>monoids</code>, but I think this is enough for now.</p>
<p>Thanks for reading and see you next time!</p></section>
  </article>
</main>

<hr />
<br />
<footer>
  <a href="/">back</a>
  <a href="/atom.xml">atom</a>
  <a href="/rss.xml">rss</a>
</footer>
<br />

    <script async src="./js/script.js"></script>
  </body>
</html>
