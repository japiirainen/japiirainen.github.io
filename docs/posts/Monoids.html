<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Monoids as a tool for writing composable and reusable programs</title>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="Verified definition of monoids in agda and exploration of some cool monoids." />
    
    <meta name="author" content="Joona Piirainen" />
     
    <meta name="keywords" content="agda, monoids, algebra, functional-programming, dependent-types" />
    

    <meta property="og:site_name" content="japiirainen" />
    <meta property="og:title" content="Monoids as a tool for writing composable and reusable programs" />
    <meta property="og:url" content="https://japiirainen.xyz/posts/Monoids.html" />
    <meta property="og:description" content="Verified definition of monoids in agda and exploration of some cool monoids." />
     
    <meta property="og:type" content="article" />
    

    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:site" content="japiirainen" />
    <meta property="twitter:title" content="Monoids as a tool for writing composable and reusable programs" />
    <meta property="twitter:description" content="Verified definition of monoids in agda and exploration of some cool monoids." />
     

    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="canonical" href="https://japiirainen.xyz/posts/Monoids.html" />
    <link rel="stylesheet" href="../css/default.css?2023-08-05" />
    <link rel="stylesheet" href="../css/agda.css?2023-08-05" />
    <link rel="stylesheet" href="../css/code.css?2023-08-05" />
    <script
      type="text/javascript"
      src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"
    ></script>
  </head>
  <body>
    <main>
  <article>
    <header>
      <h2>
        <a href="/">&#8592</a>
      </h2>
      <h1>
        <a href="/posts/Monoids.html">Monoids as a tool for writing composable and reusable programs</a>
      </h1>
      <div>
        <small>2023-08-05</small>
        
      </div>
    </header>
    <section><p>This time I’ll ramble about <code>monoids</code>! The reason I like <code>monoids</code> is that they are
relatively simple mathemically, but immensly useful in programming. Every programmer has
used a number of <code>monoid</code> structures thruought their careers either knowingly or not. The goal
of this post is to show that using ideas from mathematics can be useful and even <strong><em>practical</em></strong>.</p>
<p>I will use the <code>Agda</code> programming language / proof assistant to keep us honest. Mathematical
structures like <code>monoid</code> usually come equipped with a set of <em>properties</em> or <em>laws</em> that they
should obey, and the proof assistant capabilities of <code>Agda</code> let us precisely encode these <em>properties</em>.</p>
<p>This document is a typechecked literal <code>Agda</code> document. In fact all the definitions used in this module
are hyperlinks to their definitions. You can for example click the sumbol <code>Data.Nat.Properties</code> in the code block below to
see the <em>standard-library</em> module <code>Data.Nat.Properties</code>. It is common for an <code>Agda</code> module to begin with a bunch of module headers and imports,
this one is no exception :-).</p>
<pre class="Agda"><a id="1378" class="Symbol">{-#</a> <a id="1382" class="Keyword">OPTIONS</a> <a id="1390" class="Pragma">--safe</a> <a id="1397" class="Pragma">--guardedness</a> <a id="1411" class="Pragma">--cubical-compatible</a> <a id="1432" class="Symbol">#-}</a>
<a id="1436" class="Keyword">module</a> <a id="1443" href="Monoids.html" class="Module">Monoids</a> <a id="1451" class="Keyword">where</a>

<a id="1458" class="Keyword">open</a> <a id="1463" class="Keyword">import</a> <a id="1470" href="Level.html" class="Module">Level</a> <a id="1476" class="Keyword">renaming</a> <a id="1485" class="Symbol">(</a><a id="1486" href="Agda.Primitive.html#774" class="Primitive">suc</a> <a id="1490" class="Symbol">to</a> <a id="1493" class="Primitive">lsuc</a><a id="1497" class="Symbol">)</a>
<a id="1499" class="Keyword">open</a> <a id="1504" class="Keyword">import</a> <a id="1511" href="Function.html" class="Module">Function</a> <a id="1520" class="Keyword">using</a> <a id="1526" class="Symbol">(</a><a id="1527" href="Function.Base.html#1115" class="Function Operator">_∘_</a><a id="1530" class="Symbol">;</a> <a id="1532" href="Function.Base.html#704" class="Function">id</a><a id="1534" class="Symbol">;</a> <a id="1536" href="Function.Base.html#1638" class="Function">flip</a><a id="1540" class="Symbol">;</a> <a id="1542" href="Function.Base.html#725" class="Function">const</a><a id="1547" class="Symbol">)</a>
<a id="1549" class="Keyword">open</a> <a id="1554" class="Keyword">import</a> <a id="1561" href="Data.Nat.html" class="Module">Data.Nat</a> <a id="1570" class="Keyword">using</a> <a id="1576" class="Symbol">(</a><a id="1577" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">_+_</a><a id="1580" class="Symbol">;</a> <a id="1582" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">_*_</a><a id="1585" class="Symbol">;</a> <a id="1587" href="Data.Nat.Base.html#1330" class="Function Operator">_≤ᵇ_</a><a id="1591" class="Symbol">;</a> <a id="1593" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a><a id="1594" class="Symbol">)</a>
<a id="1596" class="Keyword">open</a> <a id="1601" class="Keyword">import</a> <a id="1608" href="Data.Nat.Properties.html" class="Module">Data.Nat.Properties</a> <a id="1628" class="Keyword">using</a> <a id="1634" class="Symbol">(</a><a id="1635" href="Data.Nat.Properties.html#14455" class="Function">+-assoc</a><a id="1642" class="Symbol">;</a> <a id="1644" href="Data.Nat.Properties.html#14556" class="Function">+-identityˡ</a><a id="1655" class="Symbol">;</a> <a id="1657" href="Data.Nat.Properties.html#14611" class="Function">+-identityʳ</a><a id="1668" class="Symbol">;</a> <a id="1670" href="Data.Nat.Properties.html#22029" class="Function">*-assoc</a><a id="1677" class="Symbol">;</a> <a id="1679" href="Data.Nat.Properties.html#20929" class="Function">*-identityˡ</a><a id="1690" class="Symbol">;</a> <a id="1692" href="Data.Nat.Properties.html#20993" class="Function">*-identityʳ</a><a id="1703" class="Symbol">)</a>
<a id="1705" class="Keyword">open</a> <a id="1710" class="Keyword">import</a> <a id="1717" href="Data.Bool.html" class="Module">Data.Bool</a> <a id="1727" class="Keyword">using</a> <a id="1733" class="Symbol">(</a><a id="1734" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a><a id="1738" class="Symbol">;</a> <a id="1740" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a><a id="1744" class="Symbol">;</a> <a id="1746" href="Agda.Builtin.Bool.html#175" class="InductiveConstructor">false</a><a id="1751" class="Symbol">;</a> <a id="1753" href="Data.Bool.Base.html#995" class="Function Operator">_∧_</a><a id="1756" class="Symbol">;</a> <a id="1758" href="Data.Bool.Base.html#1053" class="Function Operator">_∨_</a><a id="1761" class="Symbol">)</a>
<a id="1763" class="Keyword">open</a> <a id="1768" class="Keyword">import</a> <a id="1775" href="Data.Bool.Properties.html" class="Module">Data.Bool.Properties</a> <a id="1796" class="Keyword">using</a> <a id="1802" class="Symbol">(</a><a id="1803" href="Data.Bool.Properties.html#8098" class="Function">∧-assoc</a><a id="1810" class="Symbol">;</a> <a id="1812" href="Data.Bool.Properties.html#5308" class="Function">∨-assoc</a><a id="1819" class="Symbol">;</a> <a id="1821" href="Data.Bool.Properties.html#8305" class="Function">∧-identityˡ</a><a id="1832" class="Symbol">;</a> <a id="1834" href="Data.Bool.Properties.html#8363" class="Function">∧-identityʳ</a><a id="1845" class="Symbol">;</a> <a id="1847" href="Data.Bool.Properties.html#5515" class="Function">∨-identityˡ</a><a id="1858" class="Symbol">;</a> <a id="1860" href="Data.Bool.Properties.html#5574" class="Function">∨-identityʳ</a><a id="1871" class="Symbol">)</a>
<a id="1873" class="Keyword">open</a> <a id="1878" class="Keyword">import</a> <a id="1885" href="Data.List.html" class="Module">Data.List</a> <a id="1895" class="Keyword">using</a> <a id="1901" class="Symbol">(</a><a id="1902" href="Agda.Builtin.List.html#130" class="Datatype">List</a><a id="1906" class="Symbol">;</a> <a id="1908" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">_∷_</a><a id="1911" class="Symbol">;</a> <a id="1913" href="Data.List.Base.html#7375" class="InductiveConstructor">[]</a><a id="1915" class="Symbol">;</a> <a id="1917" href="Data.List.Base.html#1620" class="Function">map</a><a id="1920" class="Symbol">;</a> <a id="1922" href="Data.List.Base.html#4426" class="Function">foldl</a><a id="1927" class="Symbol">;</a> <a id="1929" href="Data.List.Base.html#1943" class="Function Operator">_++_</a><a id="1933" class="Symbol">;</a> <a id="1935" href="Data.List.Base.html#3703" class="Function">zip</a><a id="1938" class="Symbol">)</a>
<a id="1940" class="Keyword">open</a> <a id="1945" class="Keyword">import</a> <a id="1952" href="Data.List.Properties.html" class="Module">Data.List.Properties</a> <a id="1973" class="Keyword">using</a> <a id="1979" class="Symbol">(</a><a id="1980" href="Data.List.Properties.html#5580" class="Function">++-assoc</a><a id="1988" class="Symbol">;</a> <a id="1990" href="Data.List.Properties.html#5704" class="Function">++-identityˡ</a><a id="2002" class="Symbol">;</a> <a id="2004" href="Data.List.Properties.html#5768" class="Function">++-identityʳ</a><a id="2016" class="Symbol">)</a>
<a id="2018" class="Keyword">open</a> <a id="2023" class="Keyword">import</a> <a id="2030" href="Data.Product.html" class="Module">Data.Product</a> <a id="2043" class="Keyword">using</a> <a id="2049" class="Symbol">(</a><a id="2050" href="Agda.Builtin.Sigma.html#148" class="Record">Σ</a><a id="2051" class="Symbol">;</a> <a id="2053" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="2058" class="Symbol">;</a> <a id="2060" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="2065" class="Symbol">;</a> <a id="2067" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">_,_</a><a id="2070" class="Symbol">;</a> <a id="2072" href="Data.Product.Base.html#1618" class="Function Operator">_×_</a><a id="2075" class="Symbol">)</a>
<a id="2077" class="Keyword">open</a> <a id="2082" class="Keyword">import</a> <a id="2089" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="2127" class="Keyword">using</a> <a id="2133" class="Symbol">(</a><a id="2134" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="2138" class="Symbol">;</a> <a id="2140" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">_≡_</a><a id="2143" class="Symbol">;</a> <a id="2145" href="Relation.Binary.PropositionalEquality.Core.html#1712" class="Function">sym</a><a id="2148" class="Symbol">)</a>
</pre>
<p>One neat feature of <code>Agda</code> is it’s <code>variable</code> blocks. They let you generalize over variables in types.
In practice a <code>variable</code> block let’s you omit a bunch of detail from definitions since you can directly
use the variables defined in the <code>variable</code> block. I think this will make since once you see it in action.</p>
<pre class="Agda"><a id="2478" class="Keyword">variable</a>
  <a id="2489" href="Monoids.html#2489" class="Generalizable">ℓ</a> <a id="2491" href="Monoids.html#2491" class="Generalizable">ℓ₂</a> <a id="2494" class="Symbol">:</a> <a id="2496" href="Agda.Primitive.html#591" class="Postulate">Level</a>
  <a id="2504" href="Monoids.html#2504" class="Generalizable">A</a> <a id="2506" class="Symbol">:</a> <a id="2508" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="2512" href="Monoids.html#2489" class="Generalizable">ℓ</a>
  <a id="2516" href="Monoids.html#2516" class="Generalizable">B</a> <a id="2518" class="Symbol">:</a> <a id="2520" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="2524" href="Monoids.html#2491" class="Generalizable">ℓ₂</a>
</pre>
<p>If we look at the definition of a <code>monoid</code>, we will find that a <code>monoid</code> is a
<code>semigroup</code> with an <em>identity element</em>. From this it is reasonable to conclude that
we should first define what is a <code>semigroup</code>. Luckily <code>semigroups</code> are a relatively simple
structure.</p>
<h3 id="semigroup-definition"><a href="#semigroup-definition" class="anchor fas fa-xs fa-link"></a>Semigroup definition</h3>
<p>A semigroup is a <em>set</em> <span class="math inline">\(S\)</span> together with a <em>binary operation</em> <span class="math inline">\(★\)</span> that satisfies the
<em>associative property</em>.</p>
<p><span class="math display">\[
∀ x y z ∈ S. (x ★ y) ★ z = x ★ (y ★ z)
\]</span></p>
<p>To gain some intuition we should try to think of some examples. It can be difficult to gain insight to these often
quite abstract mathematical ideas without concrete examples. That is why I think it’s a great idea to always try to
come up with some examples when you see one of these definitions. Some examples of <code>semigroups</code> from the top of my head
include the natural numbers with the addition (<span class="math inline">\(+\)</span>) operation, or (ℕ,+). Natural numbers with multiplication (<span class="math inline">\(*\)</span>) also
form a <code>semigroup</code>. You can veryfy in you head that the following equations hold.</p>
<p><span class="math display">\[
∀ x y z ∈ ℕ. (x + y) + z = x + (y + z)
\]</span>
<span class="math display">\[
∀ x y z ∈ ℕ. (x * y) * z = x * (y * z)
\]</span></p>
<p>Other examples include (String,++) where <code>++</code> is string concatenation, (List, ++) where <code>++</code> is list concatenation,
(Bool,∨) where <code>∨</code> means <em>or</em> and (Bool,∧) where <code>∧</code> means <em>and</em>.</p>
<p>Lets encode this in <code>agda</code>. The beautiful thing about <code>agda</code> is that the encoding is pretty much <em>1:1</em> to the math above.</p>
<pre class="Agda"><a id="level-of"></a><a id="3938" href="Monoids.html#3938" class="Function">level-of</a> <a id="3947" class="Symbol">:</a> <a id="3949" class="Symbol">{</a><a id="3950" href="Monoids.html#3950" class="Bound">ℓ</a> <a id="3952" class="Symbol">:</a> <a id="3954" href="Agda.Primitive.html#591" class="Postulate">Level</a><a id="3959" class="Symbol">}</a> <a id="3961" class="Symbol">→</a> <a id="3963" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="3967" href="Monoids.html#3950" class="Bound">ℓ</a> <a id="3969" class="Symbol">→</a> <a id="3971" href="Agda.Primitive.html#591" class="Postulate">Level</a>
<a id="3977" href="Monoids.html#3938" class="Function">level-of</a> <a id="3986" class="Symbol">{</a><a id="3987" href="Monoids.html#3987" class="Bound">ℓ</a><a id="3988" class="Symbol">}</a> <a id="3990" class="Symbol">_</a> <a id="3992" class="Symbol">=</a> <a id="3994" href="Monoids.html#3987" class="Bound">ℓ</a>

<a id="3997" class="Keyword">record</a> <a id="is-semigroup"></a><a id="4004" href="Monoids.html#4004" class="Record">is-semigroup</a> <a id="4017" class="Symbol">(</a><a id="4018" href="Monoids.html#4018" class="Bound Operator">_★_</a> <a id="4022" class="Symbol">:</a> <a id="4024" href="Monoids.html#2504" class="Generalizable">A</a> <a id="4026" class="Symbol">→</a> <a id="4028" href="Monoids.html#2504" class="Generalizable">A</a> <a id="4030" class="Symbol">→</a> <a id="4032" href="Monoids.html#2504" class="Generalizable">A</a><a id="4033" class="Symbol">)</a> <a id="4035" class="Symbol">:</a> <a id="4037" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="4041" class="Symbol">(</a><a id="4042" href="Monoids.html#3938" class="Function">level-of</a> <a id="4051" href="Monoids.html#4024" class="Bound">A</a><a id="4052" class="Symbol">)</a> <a id="4054" class="Keyword">where</a>
  <a id="4062" class="Keyword">field</a>
    <a id="is-semigroup.assoc"></a><a id="4072" href="Monoids.html#4072" class="Field">assoc</a> <a id="4078" class="Symbol">:</a> <a id="4080" class="Symbol">∀</a> <a id="4082" href="Monoids.html#4082" class="Bound">x</a> <a id="4084" href="Monoids.html#4084" class="Bound">y</a> <a id="4086" href="Monoids.html#4086" class="Bound">z</a> <a id="4088" class="Symbol">→</a> <a id="4090" class="Symbol">(</a><a id="4091" href="Monoids.html#4082" class="Bound">x</a> <a id="4093" href="Monoids.html#4018" class="Bound Operator">★</a> <a id="4095" href="Monoids.html#4084" class="Bound">y</a><a id="4096" class="Symbol">)</a> <a id="4098" href="Monoids.html#4018" class="Bound Operator">★</a> <a id="4100" href="Monoids.html#4086" class="Bound">z</a> <a id="4102" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="4104" href="Monoids.html#4082" class="Bound">x</a> <a id="4106" href="Monoids.html#4018" class="Bound Operator">★</a> <a id="4108" class="Symbol">(</a><a id="4109" href="Monoids.html#4084" class="Bound">y</a> <a id="4111" href="Monoids.html#4018" class="Bound Operator">★</a> <a id="4113" href="Monoids.html#4086" class="Bound">z</a><a id="4114" class="Symbol">)</a>

<a id="4117" class="Keyword">record</a> <a id="Semigroup"></a><a id="4124" href="Monoids.html#4124" class="Record">Semigroup</a> <a id="4134" class="Symbol">(</a><a id="4135" href="Monoids.html#4135" class="Bound">A</a> <a id="4137" class="Symbol">:</a> <a id="4139" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="4143" href="Monoids.html#2489" class="Generalizable">ℓ</a><a id="4144" class="Symbol">)</a> <a id="4146" class="Symbol">:</a> <a id="4148" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="4152" href="Monoids.html#4143" class="Bound">ℓ</a> <a id="4154" class="Keyword">where</a>
  <a id="4162" class="Keyword">infixl</a> <a id="4169" class="Number">5</a> <a id="4171" href="Monoids.html#4187" class="Field Operator">_★_</a>
  <a id="4177" class="Keyword">field</a>
    <a id="Semigroup._★_"></a><a id="4187" href="Monoids.html#4187" class="Field Operator">_★_</a> <a id="4191" class="Symbol">:</a> <a id="4193" href="Monoids.html#4135" class="Bound">A</a> <a id="4195" class="Symbol">→</a> <a id="4197" href="Monoids.html#4135" class="Bound">A</a> <a id="4199" class="Symbol">→</a> <a id="4201" href="Monoids.html#4135" class="Bound">A</a>
    <a id="Semigroup.has-is-semigroup"></a><a id="4207" href="Monoids.html#4207" class="Field">has-is-semigroup</a> <a id="4224" class="Symbol">:</a> <a id="4226" href="Monoids.html#4004" class="Record">is-semigroup</a> <a id="4239" href="Monoids.html#4187" class="Field Operator">_★_</a>

  <a id="4246" class="Keyword">open</a> <a id="4251" href="Monoids.html#4004" class="Module">is-semigroup</a> <a id="4264" href="Monoids.html#4207" class="Field">has-is-semigroup</a> <a id="4281" class="Keyword">public</a>
</pre>
<p>A couple of familiar <code>semigroups</code> to programmers are the <code>∧</code> and <code>∨</code> operators
from <em>boolean algebra</em>. We can show that they conform to our definition of a <code>semigroup</code></p>
<pre class="Agda"><a id="∧-semigroup"></a><a id="4470" href="Monoids.html#4470" class="Function">∧-semigroup</a> <a id="4482" class="Symbol">:</a> <a id="4484" href="Monoids.html#4124" class="Record">Semigroup</a> <a id="4494" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
<a id="4499" href="Monoids.html#4470" class="Function">∧-semigroup</a> <a id="4511" class="Symbol">=</a> <a id="4513" class="Keyword">record</a> <a id="4520" class="Symbol">{</a> <a id="4522" href="Monoids.html#4187" class="Field Operator">_★_</a> <a id="4526" class="Symbol">=</a> <a id="4528" class="Symbol">λ</a> <a id="4530" href="Monoids.html#4530" class="Bound">x</a> <a id="4532" href="Monoids.html#4532" class="Bound">y</a> <a id="4534" class="Symbol">→</a> <a id="4536" href="Monoids.html#4530" class="Bound">x</a> <a id="4538" href="Data.Bool.Base.html#995" class="Function Operator">∧</a> <a id="4540" href="Monoids.html#4532" class="Bound">y</a> 
                     <a id="4564" class="Symbol">;</a> <a id="4566" href="Monoids.html#4207" class="Field">has-is-semigroup</a> <a id="4583" class="Symbol">=</a> <a id="4585" class="Keyword">record</a> <a id="4592" class="Symbol">{</a> <a id="4594" href="Monoids.html#4072" class="Field">assoc</a> <a id="4600" class="Symbol">=</a> <a id="4602" href="Data.Bool.Properties.html#8098" class="Function">∧-assoc</a> <a id="4610" class="Symbol">}</a> <a id="4612" class="Symbol">}</a>

<a id="∨-semigroup"></a><a id="4615" href="Monoids.html#4615" class="Function">∨-semigroup</a> <a id="4627" class="Symbol">:</a> <a id="4629" href="Monoids.html#4124" class="Record">Semigroup</a> <a id="4639" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
<a id="4644" href="Monoids.html#4615" class="Function">∨-semigroup</a> <a id="4656" class="Symbol">=</a> <a id="4658" class="Keyword">record</a> <a id="4665" class="Symbol">{</a> <a id="4667" href="Monoids.html#4187" class="Field Operator">_★_</a> <a id="4671" class="Symbol">=</a> <a id="4673" class="Symbol">λ</a> <a id="4675" href="Monoids.html#4675" class="Bound">x</a> <a id="4677" href="Monoids.html#4677" class="Bound">y</a> <a id="4679" class="Symbol">→</a> <a id="4681" href="Monoids.html#4675" class="Bound">x</a> <a id="4683" href="Data.Bool.Base.html#1053" class="Function Operator">∨</a> <a id="4685" href="Monoids.html#4677" class="Bound">y</a> 
                     <a id="4709" class="Symbol">;</a> <a id="4711" href="Monoids.html#4207" class="Field">has-is-semigroup</a> <a id="4728" class="Symbol">=</a> <a id="4730" class="Keyword">record</a> <a id="4737" class="Symbol">{</a> <a id="4739" href="Monoids.html#4072" class="Field">assoc</a> <a id="4745" class="Symbol">=</a> <a id="4747" href="Data.Bool.Properties.html#5308" class="Function">∨-assoc</a> <a id="4755" class="Symbol">}</a> <a id="4757" class="Symbol">}</a>
</pre>
<p>Now that we have defined what it means to be a <code>semigroup</code>, we can graduate to
<code>monoids</code>. Lets recall the definition first.</p>
<h3 id="monoid-definition"><a href="#monoid-definition" class="anchor fas fa-xs fa-link"></a>Monoid definition</h3>
<p>A monoid is a <em>set</em> <span class="math inline">\(S\)</span> together with a <em>binary operation</em> <span class="math inline">\(★\)</span> that satisfies the
following properties.</p>
<h4 id="associativity"><a href="#associativity" class="anchor fas fa-xs fa-link"></a>Associativity</h4>
<p><span class="math display">\[
∀ x y z ∈ S. (x ★ y) ★ z = x ★ (y ★ z)
\]</span></p>
<h4 id="identity-element"><a href="#identity-element" class="anchor fas fa-xs fa-link"></a>Identity element</h4>
<p><span class="math display">\[
∃ e ∈ S. ∀ x. e ★ a = a ★ e = a
\]</span></p>
<p>I again encourage you to think of examples, like we did after the <code>semigrou</code> definition.
Do you think the examples I gave of <code>semigroups</code> are also <code>monoids</code>?</p>
<p>Again, it is straight forward to translate this to <code>agda</code>.</p>
<pre class="Agda"><a id="5373" class="Keyword">record</a> <a id="is-monoid"></a><a id="5380" href="Monoids.html#5380" class="Record">is-monoid</a> <a id="5390" class="Symbol">(</a><a id="5391" href="Monoids.html#5391" class="Bound Operator">_★_</a> <a id="5395" class="Symbol">:</a> <a id="5397" href="Monoids.html#2504" class="Generalizable">A</a> <a id="5399" class="Symbol">→</a> <a id="5401" href="Monoids.html#2504" class="Generalizable">A</a> <a id="5403" class="Symbol">→</a> <a id="5405" href="Monoids.html#2504" class="Generalizable">A</a><a id="5406" class="Symbol">)</a> <a id="5408" class="Symbol">(</a><a id="5409" href="Monoids.html#5409" class="Bound">ε</a> <a id="5411" class="Symbol">:</a> <a id="5413" href="Monoids.html#2504" class="Generalizable">A</a><a id="5414" class="Symbol">)</a> <a id="5416" class="Symbol">:</a> <a id="5418" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="5422" class="Symbol">(</a><a id="5423" href="Monoids.html#3938" class="Function">level-of</a> <a id="5432" href="Monoids.html#5397" class="Bound">A</a><a id="5433" class="Symbol">)</a> <a id="5435" class="Keyword">where</a>
  <a id="5443" class="Keyword">field</a>
    <a id="is-monoid.has-is-semigroup"></a><a id="5453" href="Monoids.html#5453" class="Field">has-is-semigroup</a> <a id="5470" class="Symbol">:</a> <a id="5472" href="Monoids.html#4004" class="Record">is-semigroup</a> <a id="5485" href="Monoids.html#5391" class="Bound Operator">_★_</a>

  <a id="5492" class="Keyword">open</a> <a id="5497" href="Monoids.html#4004" class="Module">is-semigroup</a> <a id="5510" href="Monoids.html#5453" class="Field">has-is-semigroup</a> <a id="5527" class="Keyword">public</a>

  <a id="5537" class="Keyword">field</a>
    <a id="is-monoid.identityˡ"></a><a id="5547" href="Monoids.html#5547" class="Field">identityˡ</a> <a id="5557" class="Symbol">:</a> <a id="5559" class="Symbol">∀</a> <a id="5561" href="Monoids.html#5561" class="Bound">x</a> <a id="5563" class="Symbol">→</a> <a id="5565" href="Monoids.html#5409" class="Bound">ε</a> <a id="5567" href="Monoids.html#5391" class="Bound Operator">★</a> <a id="5569" href="Monoids.html#5561" class="Bound">x</a> <a id="5571" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="5573" href="Monoids.html#5561" class="Bound">x</a>
    <a id="is-monoid.identityʳ"></a><a id="5579" href="Monoids.html#5579" class="Field">identityʳ</a> <a id="5589" class="Symbol">:</a> <a id="5591" class="Symbol">∀</a> <a id="5593" href="Monoids.html#5593" class="Bound">x</a> <a id="5595" class="Symbol">→</a> <a id="5597" href="Monoids.html#5593" class="Bound">x</a> <a id="5599" href="Monoids.html#5391" class="Bound Operator">★</a> <a id="5601" href="Monoids.html#5409" class="Bound">ε</a> <a id="5603" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="5605" href="Monoids.html#5593" class="Bound">x</a>

<a id="5608" class="Keyword">record</a> <a id="Monoid"></a><a id="5615" href="Monoids.html#5615" class="Record">Monoid</a> <a id="5622" class="Symbol">(</a><a id="5623" href="Monoids.html#5623" class="Bound">A</a> <a id="5625" class="Symbol">:</a> <a id="5627" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="5631" href="Monoids.html#2489" class="Generalizable">ℓ</a><a id="5632" class="Symbol">)</a> <a id="5634" class="Symbol">:</a> <a id="5636" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="5640" href="Monoids.html#5631" class="Bound">ℓ</a> <a id="5642" class="Keyword">where</a>
  <a id="5650" class="Keyword">infixl</a> <a id="5657" class="Number">5</a> <a id="5659" href="Monoids.html#5685" class="Function Operator">_★_</a>
  <a id="5665" class="Keyword">field</a>
    <a id="Monoid.ε"></a><a id="5675" href="Monoids.html#5675" class="Field">ε</a> <a id="5677" class="Symbol">:</a> <a id="5679" href="Monoids.html#5623" class="Bound">A</a>
    <a id="Monoid._★_"></a><a id="5685" href="Monoids.html#5685" class="Field Operator">_★_</a> <a id="5689" class="Symbol">:</a> <a id="5691" href="Monoids.html#5623" class="Bound">A</a> <a id="5693" class="Symbol">→</a> <a id="5695" href="Monoids.html#5623" class="Bound">A</a> <a id="5697" class="Symbol">→</a> <a id="5699" href="Monoids.html#5623" class="Bound">A</a>
    <a id="Monoid.has-is-monoid"></a><a id="5705" href="Monoids.html#5705" class="Field">has-is-monoid</a> <a id="5719" class="Symbol">:</a> <a id="5721" href="Monoids.html#5380" class="Record">is-monoid</a> <a id="5731" href="Monoids.html#5685" class="Field Operator">_★_</a> <a id="5735" href="Monoids.html#5675" class="Field">ε</a>

  <a id="5740" class="Keyword">open</a> <a id="5745" href="Monoids.html#5380" class="Module">is-monoid</a> <a id="5755" href="Monoids.html#5705" class="Field">has-is-monoid</a> <a id="5769" class="Keyword">public</a>
</pre>
<p>We can show that <code>∧</code> and <code>∨</code> are <code>monoids</code>!</p>
<pre class="Agda"><a id="∧-monoid"></a><a id="5834" href="Monoids.html#5834" class="Function">∧-monoid</a> <a id="5843" class="Symbol">:</a> <a id="5845" href="Monoids.html#5615" class="Record">Monoid</a> <a id="5852" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
<a id="5857" href="Monoids.html#5834" class="Function">∧-monoid</a> <a id="5866" class="Symbol">=</a> <a id="5868" class="Keyword">record</a> <a id="5875" class="Symbol">{</a> <a id="5877" href="Monoids.html#5675" class="Field">ε</a> <a id="5879" class="Symbol">=</a> <a id="5881" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a> 
                  <a id="5905" class="Symbol">;</a> <a id="5907" href="Monoids.html#5685" class="Field Operator">_★_</a> <a id="5911" class="Symbol">=</a> <a id="5913" href="Data.Bool.Base.html#995" class="Function Operator">_∧_</a> 
                  <a id="5936" class="Symbol">;</a> <a id="5938" href="Monoids.html#5705" class="Field">has-is-monoid</a> <a id="5952" class="Symbol">=</a> 
                    <a id="5975" class="Keyword">record</a> <a id="5982" class="Symbol">{</a> <a id="5984" href="Monoids.html#5453" class="Field">has-is-semigroup</a> <a id="6001" class="Symbol">=</a> <a id="6003" href="Monoids.html#4207" class="Field">Semigroup.has-is-semigroup</a> <a id="6030" href="Monoids.html#4470" class="Function">∧-semigroup</a>
                           <a id="6069" class="Symbol">;</a> <a id="6071" href="Monoids.html#5547" class="Field">identityˡ</a> <a id="6081" class="Symbol">=</a> <a id="6083" href="Data.Bool.Properties.html#8305" class="Function">∧-identityˡ</a>
                           <a id="6122" class="Symbol">;</a> <a id="6124" href="Monoids.html#5579" class="Field">identityʳ</a> <a id="6134" class="Symbol">=</a> <a id="6136" href="Data.Bool.Properties.html#8363" class="Function">∧-identityʳ</a> <a id="6148" class="Symbol">}</a> <a id="6150" class="Symbol">}</a>

<a id="∨-monoid"></a><a id="6153" href="Monoids.html#6153" class="Function">∨-monoid</a> <a id="6162" class="Symbol">:</a> <a id="6164" href="Monoids.html#5615" class="Record">Monoid</a> <a id="6171" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
<a id="6176" href="Monoids.html#5675" class="Field">Monoid.ε</a> <a id="6185" href="Monoids.html#6153" class="Function">∨-monoid</a> <a id="6194" class="Symbol">=</a> <a id="6196" href="Agda.Builtin.Bool.html#175" class="InductiveConstructor">false</a>
<a id="6202" href="Monoids.html#5685" class="Field Operator">Monoid._★_</a> <a id="6213" href="Monoids.html#6153" class="Function">∨-monoid</a> <a id="6222" class="Symbol">=</a> <a id="6224" href="Data.Bool.Base.html#1053" class="Function Operator">_∨_</a>
<a id="6228" href="Monoids.html#5453" class="Field">is-monoid.has-is-semigroup</a> <a id="6255" class="Symbol">(</a><a id="6256" href="Monoids.html#5705" class="Field">Monoid.has-is-monoid</a> <a id="6277" href="Monoids.html#6153" class="Function">∨-monoid</a><a id="6285" class="Symbol">)</a> <a id="6287" class="Symbol">=</a>
  <a id="6291" href="Monoids.html#4207" class="Field">Semigroup.has-is-semigroup</a> <a id="6318" href="Monoids.html#4615" class="Function">∨-semigroup</a>
<a id="6330" href="Monoids.html#5547" class="Field">is-monoid.identityˡ</a> <a id="6350" class="Symbol">(</a><a id="6351" href="Monoids.html#5705" class="Field">Monoid.has-is-monoid</a> <a id="6372" href="Monoids.html#6153" class="Function">∨-monoid</a><a id="6380" class="Symbol">)</a> <a id="6382" class="Symbol">=</a> <a id="6384" href="Data.Bool.Properties.html#5515" class="Function">∨-identityˡ</a>
<a id="6396" href="Monoids.html#5579" class="Field">is-monoid.identityʳ</a> <a id="6416" class="Symbol">(</a><a id="6417" href="Monoids.html#5705" class="Field">Monoid.has-is-monoid</a> <a id="6438" href="Monoids.html#6153" class="Function">∨-monoid</a><a id="6446" class="Symbol">)</a> <a id="6448" class="Symbol">=</a> <a id="6450" href="Data.Bool.Properties.html#5574" class="Function">∨-identityʳ</a>
</pre>
<p>I’m using proofs such as <code>∨-identityʳ</code> from the <code>standard-library</code> to keep the length of
this post reasonable. Note that you can construct <code>records</code> in agda in two ways, which
are presented above. <code>∧-monoid</code> is defined using the <code>record</code> constructor syntax. <code>∨-monoid</code>
uses something called <code>copatterns</code>, which let’s us define the fields of a record as separate
declarations in a similar way that we would give different cases for a function.</p>
<p>At this point you might not be convinced on the usefulness of all this. Let me try to change
that by showcasing a bunch of commonly used monoids and operations that can be built up from those.</p>
<p>A very common pattern when coding in a functional style is <code>mapping</code> followed by <code>folding</code>.
This pattern is also known as <code>MapReduce</code> in the distributed computing community. Let’s see an example.</p>
<pre class="Agda"><a id="numbers"></a><a id="7306" href="Monoids.html#7306" class="Function">numbers</a> <a id="7314" class="Symbol">:</a> <a id="7316" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="7321" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
<a id="7323" href="Monoids.html#7306" class="Function">numbers</a> <a id="7331" class="Symbol">=</a> <a id="7333" class="Number">1</a> <a id="7335" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7337" class="Number">2</a> <a id="7339" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7341" class="Number">3</a> <a id="7343" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7345" class="Number">4</a> <a id="7347" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7349" class="Number">5</a> <a id="7351" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7353" class="Number">6</a> <a id="7355" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7357" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a>

<a id="all≤5?"></a><a id="7361" href="Monoids.html#7361" class="Function">all≤5?</a> <a id="7368" class="Symbol">:</a> <a id="7370" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="7375" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="7377" class="Symbol">→</a> <a id="7379" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
<a id="7384" href="Monoids.html#7361" class="Function">all≤5?</a> <a id="7391" class="Symbol">=</a> <a id="7393" href="Data.List.Base.html#4426" class="Function">foldl</a> <a id="7399" href="Data.Bool.Base.html#995" class="Function Operator">_∧_</a> <a id="7403" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a> <a id="7408" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="7410" href="Data.List.Base.html#1620" class="Function">map</a> <a id="7414" class="Symbol">(</a><a id="7415" href="Data.Nat.Base.html#1330" class="Function Operator">_≤ᵇ</a> <a id="7419" class="Number">5</a><a id="7420" class="Symbol">)</a>

<a id="any&gt;10?"></a><a id="7423" href="Monoids.html#7423" class="Function">any&gt;10?</a> <a id="7431" class="Symbol">:</a> <a id="7433" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="7438" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="7440" class="Symbol">→</a> <a id="7442" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
<a id="7447" href="Monoids.html#7423" class="Function">any&gt;10?</a> <a id="7455" class="Symbol">=</a> <a id="7457" href="Data.List.Base.html#4426" class="Function">foldl</a> <a id="7463" href="Data.Bool.Base.html#1053" class="Function Operator">_∨_</a> <a id="7467" href="Agda.Builtin.Bool.html#175" class="InductiveConstructor">false</a> <a id="7473" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="7475" href="Data.List.Base.html#1620" class="Function">map</a> <a id="7479" class="Symbol">(</a><a id="7480" class="Number">11</a> <a id="7483" href="Data.Nat.Base.html#1330" class="Function Operator">≤ᵇ_</a><a id="7486" class="Symbol">)</a>

<a id="7489" href="Monoids.html#7489" class="Function">_</a> <a id="7491" class="Symbol">:</a> <a id="7493" href="Monoids.html#7361" class="Function">all≤5?</a> <a id="7500" href="Monoids.html#7306" class="Function">numbers</a> <a id="7508" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="7510" href="Agda.Builtin.Bool.html#175" class="InductiveConstructor">false</a>
<a id="7516" class="Symbol">_</a> <a id="7518" class="Symbol">=</a> <a id="7520" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>

<a id="7526" href="Monoids.html#7526" class="Function">_</a> <a id="7528" class="Symbol">:</a> <a id="7530" href="Monoids.html#7423" class="Function">any&gt;10?</a> <a id="7538" class="Symbol">(</a><a id="7539" class="Number">11</a> <a id="7542" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7544" href="Monoids.html#7306" class="Function">numbers</a><a id="7551" class="Symbol">)</a> <a id="7553" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="7555" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a>
<a id="7560" class="Symbol">_</a> <a id="7562" class="Symbol">=</a> <a id="7564" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre>
<p>We can easily generalize this notion of <code>mapping</code> and then <code>folding</code> by a clever use
of the structure provided by a <code>monoid</code>.</p>
<pre class="Agda"><a id="foldMapList"></a><a id="7709" href="Monoids.html#7709" class="Function">foldMapList</a> <a id="7721" class="Symbol">:</a> <a id="7723" class="Symbol">⦃</a> <a id="7725" href="Monoids.html#5615" class="Record">Monoid</a> <a id="7732" href="Monoids.html#2516" class="Generalizable">B</a> <a id="7734" class="Symbol">⦄</a> <a id="7736" class="Symbol">→</a> <a id="7738" class="Symbol">(</a><a id="7739" href="Monoids.html#2504" class="Generalizable">A</a> <a id="7741" class="Symbol">→</a> <a id="7743" href="Monoids.html#2516" class="Generalizable">B</a><a id="7744" class="Symbol">)</a> <a id="7746" class="Symbol">→</a> <a id="7748" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="7753" href="Monoids.html#2504" class="Generalizable">A</a> <a id="7755" class="Symbol">→</a> <a id="7757" href="Monoids.html#2516" class="Generalizable">B</a>
<a id="7759" href="Monoids.html#7709" class="Function">foldMapList</a> <a id="7771" class="Symbol">⦃</a> <a id="7773" href="Monoids.html#7773" class="Bound">mon</a> <a id="7777" class="Symbol">⦄</a> <a id="7779" href="Monoids.html#7779" class="Bound">f</a> <a id="7781" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="7784" class="Symbol">=</a> <a id="7786" href="Monoids.html#5675" class="Function">ε</a>
  <a id="7790" class="Keyword">where</a> <a id="7796" class="Keyword">open</a> <a id="7801" href="Monoids.html#5615" class="Module">Monoid</a> <a id="7808" href="Monoids.html#7773" class="Bound">mon</a>
<a id="7812" href="Monoids.html#7709" class="Function">foldMapList</a> <a id="7824" class="Symbol">⦃</a> <a id="7826" href="Monoids.html#7826" class="Bound">mon</a> <a id="7830" class="Symbol">⦄</a> <a id="7832" href="Monoids.html#7832" class="Bound">f</a> <a id="7834" class="Symbol">(</a><a id="7835" href="Monoids.html#7835" class="Bound">x</a> <a id="7837" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="7839" href="Monoids.html#7839" class="Bound">xs</a><a id="7841" class="Symbol">)</a> <a id="7843" class="Symbol">=</a> <a id="7845" href="Monoids.html#7832" class="Bound">f</a> <a id="7847" href="Monoids.html#7835" class="Bound">x</a> <a id="7849" href="Monoids.html#5685" class="Function Operator">★</a> <a id="7851" href="Monoids.html#7709" class="Function">foldMapList</a> <a id="7863" href="Monoids.html#7832" class="Bound">f</a> <a id="7865" href="Monoids.html#7839" class="Bound">xs</a>
  <a id="7870" class="Keyword">where</a> <a id="7876" class="Keyword">open</a> <a id="7881" href="Monoids.html#5615" class="Module">Monoid</a> <a id="7888" href="Monoids.html#7826" class="Bound">mon</a>

<a id="7893" class="Keyword">module</a> <a id="7900" href="Monoids.html#7900" class="Module">_</a> <a id="7902" class="Keyword">where</a>
  <a id="7910" class="Keyword">instance</a> <a id="7919" href="Monoids.html#7919" class="Function">_</a> <a id="7921" class="Symbol">=</a> <a id="7923" href="Monoids.html#5834" class="Function">∧-monoid</a>

  <a id="7935" href="Monoids.html#7935" class="Function">all?</a> <a id="7940" class="Symbol">:</a> <a id="7942" class="Symbol">(</a><a id="7943" href="Monoids.html#2504" class="Generalizable">A</a> <a id="7945" class="Symbol">→</a> <a id="7947" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a><a id="7951" class="Symbol">)</a> <a id="7953" class="Symbol">→</a> <a id="7955" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="7960" href="Monoids.html#2504" class="Generalizable">A</a> <a id="7962" class="Symbol">→</a> <a id="7964" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
  <a id="7971" href="Monoids.html#7935" class="Function">all?</a> <a id="7976" class="Symbol">=</a> <a id="7978" href="Monoids.html#7709" class="Function">foldMapList</a>

<a id="7991" class="Keyword">module</a> <a id="7998" href="Monoids.html#7998" class="Module">_</a> <a id="8000" class="Keyword">where</a>
  <a id="8008" class="Keyword">instance</a> <a id="8017" href="Monoids.html#8017" class="Function">_</a> <a id="8019" class="Symbol">=</a> <a id="8021" href="Monoids.html#6153" class="Function">∨-monoid</a>

  <a id="8033" href="Monoids.html#8033" class="Function">any?</a> <a id="8038" class="Symbol">:</a> <a id="8040" class="Symbol">(</a><a id="8041" href="Monoids.html#2504" class="Generalizable">A</a> <a id="8043" class="Symbol">→</a> <a id="8045" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a><a id="8049" class="Symbol">)</a> <a id="8051" class="Symbol">→</a> <a id="8053" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="8058" href="Monoids.html#2504" class="Generalizable">A</a> <a id="8060" class="Symbol">→</a> <a id="8062" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
  <a id="8069" href="Monoids.html#8033" class="Function">any?</a> <a id="8074" class="Symbol">=</a> <a id="8076" href="Monoids.html#7709" class="Function">foldMapList</a>

<a id="8089" href="Monoids.html#8089" class="Function">_</a> <a id="8091" class="Symbol">:</a> <a id="8093" href="Monoids.html#7935" class="Function">all?</a> <a id="8098" class="Symbol">(</a><a id="8099" href="Data.Nat.Base.html#1330" class="Function Operator">_≤ᵇ</a> <a id="8103" class="Number">5</a><a id="8104" class="Symbol">)</a> <a id="8106" href="Monoids.html#7306" class="Function">numbers</a> <a id="8114" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="8116" href="Agda.Builtin.Bool.html#175" class="InductiveConstructor">false</a>
<a id="8122" class="Symbol">_</a> <a id="8124" class="Symbol">=</a> <a id="8126" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>

<a id="8132" href="Monoids.html#8132" class="Function">_</a> <a id="8134" class="Symbol">:</a> <a id="8136" href="Monoids.html#8033" class="Function">any?</a> <a id="8141" class="Symbol">(</a><a id="8142" class="Number">11</a> <a id="8145" href="Data.Nat.Base.html#1330" class="Function Operator">≤ᵇ_</a><a id="8148" class="Symbol">)</a> <a id="8150" class="Symbol">(</a><a id="8151" class="Number">11</a> <a id="8154" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="8156" href="Monoids.html#7306" class="Function">numbers</a><a id="8163" class="Symbol">)</a> <a id="8165" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="8167" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a>
<a id="8172" class="Symbol">_</a> <a id="8174" class="Symbol">=</a> <a id="8176" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre>
<p>Pretty neat? I think so! We can do other cool things too, we can for example
flatten nested lists.</p>
<pre class="Agda"><a id="[]-semigroup"></a><a id="8294" href="Monoids.html#8294" class="Function">[]-semigroup</a> <a id="8307" class="Symbol">:</a> <a id="8309" href="Monoids.html#4124" class="Record">Semigroup</a> <a id="8319" class="Symbol">(</a><a id="8320" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="8325" href="Monoids.html#2504" class="Generalizable">A</a><a id="8326" class="Symbol">)</a>
<a id="8328" href="Monoids.html#4187" class="Field Operator">Semigroup._★_</a> <a id="8342" href="Monoids.html#8294" class="Function">[]-semigroup</a> <a id="8355" class="Symbol">=</a> <a id="8357" href="Data.List.Base.html#1943" class="Function Operator">_++_</a>
<a id="8362" href="Monoids.html#4072" class="Field">is-semigroup.assoc</a> <a id="8381" class="Symbol">(</a><a id="8382" href="Monoids.html#4207" class="Field">Semigroup.has-is-semigroup</a> <a id="8409" href="Monoids.html#8294" class="Function">[]-semigroup</a><a id="8421" class="Symbol">)</a> <a id="8423" class="Symbol">=</a> <a id="8425" href="Data.List.Properties.html#5580" class="Function">++-assoc</a>

<a id="[]-monoid"></a><a id="8435" href="Monoids.html#8435" class="Function">[]-monoid</a> <a id="8445" class="Symbol">:</a> <a id="8447" href="Monoids.html#5615" class="Record">Monoid</a> <a id="8454" class="Symbol">(</a><a id="8455" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="8460" href="Monoids.html#2504" class="Generalizable">A</a><a id="8461" class="Symbol">)</a>
<a id="8463" href="Monoids.html#5675" class="Field">Monoid.ε</a> <a id="8472" href="Monoids.html#8435" class="Function">[]-monoid</a> <a id="8482" class="Symbol">=</a> <a id="8484" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a>
<a id="8487" href="Monoids.html#5685" class="Field Operator">Monoid._★_</a> <a id="8498" href="Monoids.html#8435" class="Function">[]-monoid</a> <a id="8508" class="Symbol">=</a> <a id="8510" href="Data.List.Base.html#1943" class="Function Operator">_++_</a>
<a id="8515" href="Monoids.html#5453" class="Field">is-monoid.has-is-semigroup</a> <a id="8542" class="Symbol">(</a><a id="8543" href="Monoids.html#5705" class="Field">Monoid.has-is-monoid</a> <a id="8564" href="Monoids.html#8435" class="Function">[]-monoid</a><a id="8573" class="Symbol">)</a> <a id="8575" class="Symbol">=</a>
  <a id="8579" href="Monoids.html#4207" class="Field">Semigroup.has-is-semigroup</a> <a id="8606" href="Monoids.html#8294" class="Function">[]-semigroup</a>
<a id="8619" href="Monoids.html#5547" class="Field">is-monoid.identityˡ</a> <a id="8639" class="Symbol">(</a><a id="8640" href="Monoids.html#5705" class="Field">Monoid.has-is-monoid</a> <a id="8661" href="Monoids.html#8435" class="Function">[]-monoid</a><a id="8670" class="Symbol">)</a> <a id="8672" class="Symbol">=</a> <a id="8674" href="Data.List.Properties.html#5704" class="Function">++-identityˡ</a>
<a id="8687" href="Monoids.html#5579" class="Field">is-monoid.identityʳ</a> <a id="8707" class="Symbol">(</a><a id="8708" href="Monoids.html#5705" class="Field">Monoid.has-is-monoid</a> <a id="8729" href="Monoids.html#8435" class="Function">[]-monoid</a><a id="8738" class="Symbol">)</a> <a id="8740" class="Symbol">=</a> <a id="8742" href="Data.List.Properties.html#5768" class="Function">++-identityʳ</a>

<a id="8756" class="Keyword">module</a> <a id="8763" href="Monoids.html#8763" class="Module">_</a> <a id="8765" class="Keyword">where</a>
  <a id="8773" class="Keyword">instance</a> <a id="8782" href="Monoids.html#8782" class="Function">_</a> <a id="8784" class="Symbol">=</a> <a id="8786" href="Monoids.html#8435" class="Function">[]-monoid</a>

  <a id="8799" href="Monoids.html#8799" class="Function">flatten</a> <a id="8807" class="Symbol">:</a> <a id="8809" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="8814" class="Symbol">(</a><a id="8815" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="8820" href="Monoids.html#2504" class="Generalizable">A</a><a id="8821" class="Symbol">)</a> <a id="8823" class="Symbol">→</a> <a id="8825" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="8830" href="Monoids.html#2504" class="Generalizable">A</a>
  <a id="8834" href="Monoids.html#8799" class="Function">flatten</a> <a id="8842" class="Symbol">=</a> <a id="8844" href="Monoids.html#7709" class="Function">foldMapList</a> <a id="8856" href="Function.Base.html#704" class="Function">id</a>

<a id="8860" href="Monoids.html#8860" class="Function">_</a> <a id="8862" class="Symbol">:</a> <a id="8864" href="Monoids.html#8799" class="Function">flatten</a> <a id="8872" class="Symbol">((</a><a id="8874" class="Number">1</a> <a id="8876" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="8878" class="Number">2</a> <a id="8880" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="8882" class="InductiveConstructor">[]</a><a id="8884" class="Symbol">)</a> <a id="8886" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="8888" class="Symbol">(</a><a id="8889" class="Number">3</a> <a id="8891" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="8893" class="Number">4</a> <a id="8895" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="8897" class="InductiveConstructor">[]</a><a id="8899" class="Symbol">)</a> <a id="8901" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="8903" class="InductiveConstructor">[]</a><a id="8905" class="Symbol">)</a> <a id="8907" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="8909" class="Number">1</a> <a id="8911" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="8913" class="Number">2</a> <a id="8915" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="8917" class="Number">3</a> <a id="8919" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="8921" class="Number">4</a> <a id="8923" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="8925" class="InductiveConstructor">[]</a>
<a id="8928" class="Symbol">_</a> <a id="8930" class="Symbol">=</a> <a id="8932" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre>
<p>Or take sums and products. Excuse the mostly boring <code>semigroup</code> and <code>monoid</code> instance declarations.</p>
<pre class="Agda"><a id="+-semi"></a><a id="9051" href="Monoids.html#9051" class="Function">+-semi</a> <a id="9058" class="Symbol">:</a> <a id="9060" href="Monoids.html#4124" class="Record">Semigroup</a> <a id="9070" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
<a id="9072" href="Monoids.html#4187" class="Field Operator">Semigroup._★_</a> <a id="9086" href="Monoids.html#9051" class="Function">+-semi</a> <a id="9093" class="Symbol">=</a> <a id="9095" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">_+_</a>
<a id="9099" href="Monoids.html#4072" class="Field">is-semigroup.assoc</a> <a id="9118" class="Symbol">(</a><a id="9119" href="Monoids.html#4207" class="Field">Semigroup.has-is-semigroup</a> <a id="9146" href="Monoids.html#9051" class="Function">+-semi</a><a id="9152" class="Symbol">)</a> <a id="9154" class="Symbol">=</a> <a id="9156" href="Data.Nat.Properties.html#14455" class="Function">+-assoc</a>

<a id="+-0"></a><a id="9165" href="Monoids.html#9165" class="Function">+-0</a> <a id="9169" class="Symbol">:</a> <a id="9171" href="Monoids.html#5615" class="Record">Monoid</a> <a id="9178" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
<a id="9180" href="Monoids.html#5675" class="Field">Monoid.ε</a> <a id="9189" href="Monoids.html#9165" class="Function">+-0</a> <a id="9193" class="Symbol">=</a> <a id="9195" class="Number">0</a>
<a id="9197" href="Monoids.html#5685" class="Field Operator">Monoid._★_</a> <a id="9208" href="Monoids.html#9165" class="Function">+-0</a> <a id="9212" class="Symbol">=</a> <a id="9214" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">_+_</a>
<a id="9218" href="Monoids.html#5453" class="Field">is-monoid.has-is-semigroup</a> <a id="9245" class="Symbol">(</a><a id="9246" href="Monoids.html#5705" class="Field">Monoid.has-is-monoid</a> <a id="9267" href="Monoids.html#9165" class="Function">+-0</a><a id="9270" class="Symbol">)</a> <a id="9272" class="Symbol">=</a> <a id="9274" href="Monoids.html#4207" class="Field">Semigroup.has-is-semigroup</a> <a id="9301" href="Monoids.html#9051" class="Function">+-semi</a>
<a id="9308" href="Monoids.html#5547" class="Field">is-monoid.identityˡ</a> <a id="9328" class="Symbol">(</a><a id="9329" href="Monoids.html#5705" class="Field">Monoid.has-is-monoid</a> <a id="9350" href="Monoids.html#9165" class="Function">+-0</a><a id="9353" class="Symbol">)</a> <a id="9355" class="Symbol">=</a> <a id="9357" href="Data.Nat.Properties.html#14556" class="Function">+-identityˡ</a>
<a id="9369" href="Monoids.html#5579" class="Field">is-monoid.identityʳ</a> <a id="9389" class="Symbol">(</a><a id="9390" href="Monoids.html#5705" class="Field">Monoid.has-is-monoid</a> <a id="9411" href="Monoids.html#9165" class="Function">+-0</a><a id="9414" class="Symbol">)</a> <a id="9416" class="Symbol">=</a> <a id="9418" href="Data.Nat.Properties.html#14611" class="Function">+-identityʳ</a>

<a id="*-semi"></a><a id="9431" href="Monoids.html#9431" class="Function">*-semi</a> <a id="9438" class="Symbol">:</a> <a id="9440" href="Monoids.html#4124" class="Record">Semigroup</a> <a id="9450" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
<a id="9452" href="Monoids.html#4187" class="Field Operator">Semigroup._★_</a> <a id="9466" href="Monoids.html#9431" class="Function">*-semi</a> <a id="9473" class="Symbol">=</a> <a id="9475" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">_*_</a>
<a id="9479" href="Monoids.html#4072" class="Field">is-semigroup.assoc</a> <a id="9498" class="Symbol">(</a><a id="9499" href="Monoids.html#4207" class="Field">Semigroup.has-is-semigroup</a> <a id="9526" href="Monoids.html#9431" class="Function">*-semi</a><a id="9532" class="Symbol">)</a> <a id="9534" class="Symbol">=</a> <a id="9536" href="Data.Nat.Properties.html#22029" class="Function">*-assoc</a>

<a id="*-1"></a><a id="9545" href="Monoids.html#9545" class="Function">*-1</a> <a id="9549" class="Symbol">:</a> <a id="9551" href="Monoids.html#5615" class="Record">Monoid</a> <a id="9558" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
<a id="9560" href="Monoids.html#5675" class="Field">Monoid.ε</a> <a id="9569" href="Monoids.html#9545" class="Function">*-1</a> <a id="9573" class="Symbol">=</a> <a id="9575" class="Number">1</a>
<a id="9577" href="Monoids.html#5685" class="Field Operator">Monoid._★_</a> <a id="9588" href="Monoids.html#9545" class="Function">*-1</a> <a id="9592" class="Symbol">=</a> <a id="9594" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">_*_</a>
<a id="9598" href="Monoids.html#5453" class="Field">is-monoid.has-is-semigroup</a> <a id="9625" class="Symbol">(</a><a id="9626" href="Monoids.html#5705" class="Field">Monoid.has-is-monoid</a> <a id="9647" href="Monoids.html#9545" class="Function">*-1</a><a id="9650" class="Symbol">)</a> <a id="9652" class="Symbol">=</a> <a id="9654" href="Monoids.html#4207" class="Field">Semigroup.has-is-semigroup</a> <a id="9681" href="Monoids.html#9431" class="Function">*-semi</a>
<a id="9688" href="Monoids.html#5547" class="Field">is-monoid.identityˡ</a> <a id="9708" class="Symbol">(</a><a id="9709" href="Monoids.html#5705" class="Field">Monoid.has-is-monoid</a> <a id="9730" href="Monoids.html#9545" class="Function">*-1</a><a id="9733" class="Symbol">)</a> <a id="9735" class="Symbol">=</a> <a id="9737" href="Data.Nat.Properties.html#20929" class="Function">*-identityˡ</a>
<a id="9749" href="Monoids.html#5579" class="Field">is-monoid.identityʳ</a> <a id="9769" class="Symbol">(</a><a id="9770" href="Monoids.html#5705" class="Field">Monoid.has-is-monoid</a> <a id="9791" href="Monoids.html#9545" class="Function">*-1</a><a id="9794" class="Symbol">)</a> <a id="9796" class="Symbol">=</a> <a id="9798" href="Data.Nat.Properties.html#20993" class="Function">*-identityʳ</a>

<a id="9811" class="Keyword">module</a> <a id="9818" href="Monoids.html#9818" class="Module">_</a> <a id="9820" class="Keyword">where</a>
  <a id="9828" class="Keyword">instance</a> <a id="9837" href="Monoids.html#9837" class="Function">_</a> <a id="9839" class="Symbol">=</a> <a id="9841" href="Monoids.html#9165" class="Function">+-0</a>

  <a id="9848" href="Monoids.html#9848" class="Function">sum</a> <a id="9852" class="Symbol">:</a> <a id="9854" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="9859" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="9861" class="Symbol">→</a> <a id="9863" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
  <a id="9867" href="Monoids.html#9848" class="Function">sum</a> <a id="9871" class="Symbol">=</a> <a id="9873" href="Monoids.html#7709" class="Function">foldMapList</a> <a id="9885" href="Function.Base.html#704" class="Function">id</a>

<a id="9889" href="Monoids.html#9889" class="Function">_</a> <a id="9891" class="Symbol">:</a> <a id="9893" href="Monoids.html#9848" class="Function">sum</a> <a id="9897" href="Monoids.html#7306" class="Function">numbers</a> <a id="9905" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="9907" class="Number">21</a>
<a id="9910" class="Symbol">_</a> <a id="9912" class="Symbol">=</a> <a id="9914" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>

<a id="9920" class="Keyword">module</a> <a id="9927" href="Monoids.html#9927" class="Module">_</a> <a id="9929" class="Keyword">where</a>
  <a id="9937" class="Keyword">instance</a> <a id="9946" href="Monoids.html#9946" class="Function">_</a> <a id="9948" class="Symbol">=</a> <a id="9950" href="Monoids.html#9545" class="Function">*-1</a>

  <a id="9957" href="Monoids.html#9957" class="Function">product</a> <a id="9965" class="Symbol">=</a> <a id="9967" href="Monoids.html#7709" class="Function">foldMapList</a> <a id="9979" href="Function.Base.html#704" class="Function">id</a>

<a id="9983" href="Monoids.html#9983" class="Function">_</a> <a id="9985" class="Symbol">:</a> <a id="9987" href="Monoids.html#9957" class="Function">product</a> <a id="9995" href="Monoids.html#7306" class="Function">numbers</a> <a id="10003" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="10005" class="Number">720</a>
<a id="10009" class="Symbol">_</a> <a id="10011" class="Symbol">=</a> <a id="10013" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre>
<p>An interesting <code>monoid</code> is the <code>dual</code> of some other <code>monoid</code>.</p>
<pre class="Agda"><a id="10094" class="Keyword">module</a> <a id="10101" href="Monoids.html#10101" class="Module">_</a> <a id="10103" class="Symbol">(</a><a id="10104" href="Monoids.html#10104" class="Bound">mon</a> <a id="10108" class="Symbol">:</a> <a id="10110" href="Monoids.html#5615" class="Record">Monoid</a> <a id="10117" href="Monoids.html#2504" class="Generalizable">A</a><a id="10118" class="Symbol">)</a> <a id="10120" class="Keyword">where</a>
  <a id="10128" class="Keyword">open</a> <a id="10133" href="Monoids.html#5615" class="Module">Monoid</a> <a id="10140" href="Monoids.html#10104" class="Bound">mon</a>

  <a id="10147" href="Monoids.html#10147" class="Function">dual</a> <a id="10152" class="Symbol">:</a> <a id="10154" href="Monoids.html#5615" class="Record">Monoid</a> <a id="10161" href="Monoids.html#10117" class="Bound">A</a>
  <a id="10165" href="Monoids.html#5675" class="Field">Monoid.ε</a> <a id="10174" href="Monoids.html#10147" class="Function">dual</a> <a id="10179" class="Symbol">=</a> <a id="10181" href="Monoids.html#5675" class="Field">ε</a>
  <a id="10185" href="Monoids.html#5685" class="Field Operator">Monoid._★_</a> <a id="10196" href="Monoids.html#10147" class="Function">dual</a> <a id="10201" class="Symbol">=</a> <a id="10203" href="Function.Base.html#1638" class="Function">flip</a> <a id="10208" href="Monoids.html#5685" class="Field Operator">_★_</a>
  <a id="10214" href="Monoids.html#4072" class="Field">is-semigroup.assoc</a> <a id="10233" class="Symbol">(</a><a id="10234" href="Monoids.html#5453" class="Field">is-monoid.has-is-semigroup</a> <a id="10261" class="Symbol">(</a><a id="10262" href="Monoids.html#5705" class="Field">Monoid.has-is-monoid</a> <a id="10283" href="Monoids.html#10147" class="Function">dual</a><a id="10287" class="Symbol">))</a>
    <a id="10294" href="Monoids.html#10294" class="Bound">x</a> <a id="10296" href="Monoids.html#10296" class="Bound">y</a> <a id="10298" href="Monoids.html#10298" class="Bound">z</a> <a id="10300" class="Symbol">=</a> <a id="10302" href="Relation.Binary.PropositionalEquality.Core.html#1712" class="Function">sym</a> <a id="10306" class="Symbol">(</a><a id="10307" href="Monoids.html#4072" class="Function">assoc</a> <a id="10313" href="Monoids.html#10298" class="Bound">z</a> <a id="10315" href="Monoids.html#10296" class="Bound">y</a> <a id="10317" href="Monoids.html#10294" class="Bound">x</a><a id="10318" class="Symbol">)</a>
  <a id="10322" href="Monoids.html#5547" class="Field">is-monoid.identityˡ</a> <a id="10342" class="Symbol">(</a><a id="10343" href="Monoids.html#5705" class="Field">Monoid.has-is-monoid</a> <a id="10364" href="Monoids.html#10147" class="Function">dual</a><a id="10368" class="Symbol">)</a> <a id="10370" class="Symbol">=</a> <a id="10372" href="Monoids.html#5579" class="Function">identityʳ</a>
  <a id="10384" href="Monoids.html#5579" class="Field">is-monoid.identityʳ</a> <a id="10404" class="Symbol">(</a><a id="10405" href="Monoids.html#5705" class="Field">Monoid.has-is-monoid</a> <a id="10426" href="Monoids.html#10147" class="Function">dual</a><a id="10430" class="Symbol">)</a> <a id="10432" class="Symbol">=</a> <a id="10434" href="Monoids.html#5547" class="Function">identityˡ</a>

<a id="reverse"></a><a id="10445" href="Monoids.html#10445" class="Function">reverse</a> <a id="10453" class="Symbol">:</a> <a id="10455" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="10460" href="Monoids.html#2504" class="Generalizable">A</a> <a id="10462" class="Symbol">→</a> <a id="10464" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="10469" href="Monoids.html#2504" class="Generalizable">A</a>
<a id="10471" href="Monoids.html#10445" class="Function">reverse</a> <a id="10479" class="Symbol">=</a> <a id="10481" href="Monoids.html#7709" class="Function">foldMapList</a> <a id="10493" class="Symbol">⦃</a> <a id="10495" href="Monoids.html#10147" class="Function">dual</a> <a id="10500" class="Symbol">(</a><a id="10501" href="Monoids.html#8435" class="Function">[]-monoid</a><a id="10510" class="Symbol">)</a> <a id="10512" class="Symbol">⦄</a> <a id="10514" class="Symbol">(</a><a id="10515" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">_∷</a> <a id="10518" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a><a id="10520" class="Symbol">)</a>

<a id="10523" href="Monoids.html#10523" class="Function">_</a> <a id="10525" class="Symbol">:</a> <a id="10527" href="Monoids.html#10445" class="Function">reverse</a> <a id="10535" href="Monoids.html#7306" class="Function">numbers</a> <a id="10543" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="10545" class="Symbol">(</a><a id="10546" class="Number">6</a> <a id="10548" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="10550" class="Number">5</a> <a id="10552" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="10554" class="Number">4</a> <a id="10556" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="10558" class="Number">3</a> <a id="10560" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="10562" class="Number">2</a> <a id="10564" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="10566" class="Number">1</a> <a id="10568" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="10570" class="InductiveConstructor">[]</a><a id="10572" class="Symbol">)</a>
<a id="10574" class="Symbol">_</a> <a id="10576" class="Symbol">=</a> <a id="10578" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre>
<p>Another example of a <code>monoid</code> built of other <code>monoids</code> is the <em>cartetesian product</em> or <code>_×_</code>.</p>
<pre class="Agda"><a id="10691" class="Keyword">module</a> <a id="10698" href="Monoids.html#10698" class="Module">_</a> <a id="10700" class="Symbol">(</a><a id="10701" href="Monoids.html#10701" class="Bound">ma</a> <a id="10704" class="Symbol">:</a> <a id="10706" href="Monoids.html#5615" class="Record">Monoid</a> <a id="10713" href="Monoids.html#2504" class="Generalizable">A</a><a id="10714" class="Symbol">)</a> <a id="10716" class="Symbol">(</a><a id="10717" href="Monoids.html#10717" class="Bound">mb</a> <a id="10720" class="Symbol">:</a> <a id="10722" href="Monoids.html#5615" class="Record">Monoid</a> <a id="10729" href="Monoids.html#2516" class="Generalizable">B</a><a id="10730" class="Symbol">)</a> <a id="10732" class="Keyword">where</a>

  <a id="10741" class="Keyword">open</a> <a id="10746" href="Monoids.html#5615" class="Module">Monoid</a> <a id="10753" class="Symbol">⦃</a> <a id="10755" class="Symbol">...</a> <a id="10759" class="Symbol">⦄</a>

  <a id="10764" class="Keyword">instance</a>
    <a id="10777" href="Monoids.html#10777" class="Function">_</a> <a id="10779" class="Symbol">=</a> <a id="10781" href="Monoids.html#10701" class="Bound">ma</a>
    <a id="10788" href="Monoids.html#10788" class="Function">_</a> <a id="10790" class="Symbol">=</a> <a id="10792" href="Monoids.html#10717" class="Bound">mb</a>

  <a id="10798" href="Monoids.html#10798" class="Function">×-semigroup</a> <a id="10810" class="Symbol">:</a> <a id="10812" href="Monoids.html#4124" class="Record">Semigroup</a> <a id="10822" class="Symbol">(</a><a id="10823" href="Monoids.html#10713" class="Bound">A</a> <a id="10825" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="10827" href="Monoids.html#10729" class="Bound">B</a><a id="10828" class="Symbol">)</a>
  <a id="10832" class="Symbol">(</a><a id="10833" href="Monoids.html#10798" class="Function">×-semigroup</a> <a id="10845" href="Monoids.html#4187" class="Field Operator">Semigroup.★</a> <a id="10857" class="Symbol">(</a><a id="10858" href="Monoids.html#10858" class="Bound">a</a> <a id="10860" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="10862" href="Monoids.html#10862" class="Bound">b</a><a id="10863" class="Symbol">))</a> <a id="10866" class="Symbol">(</a><a id="10867" href="Monoids.html#10867" class="Bound">a₁</a> <a id="10870" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="10872" href="Monoids.html#10872" class="Bound">b₁</a><a id="10874" class="Symbol">)</a> <a id="10876" class="Symbol">=</a> <a id="10878" href="Monoids.html#10858" class="Bound">a</a> <a id="10880" href="Monoids.html#5685" class="Field Operator">★</a> <a id="10882" href="Monoids.html#10867" class="Bound">a₁</a> <a id="10885" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="10887" href="Monoids.html#10862" class="Bound">b</a> <a id="10889" href="Monoids.html#5685" class="Field Operator">★</a> <a id="10891" href="Monoids.html#10872" class="Bound">b₁</a>
  <a id="10896" href="Monoids.html#4072" class="Field">is-semigroup.assoc</a> <a id="10915" class="Symbol">(</a><a id="10916" href="Monoids.html#4207" class="Field">Semigroup.has-is-semigroup</a> <a id="10943" href="Monoids.html#10798" class="Function">×-semigroup</a><a id="10954" class="Symbol">)</a> 
    <a id="10961" class="Symbol">(</a><a id="10962" href="Monoids.html#10962" class="Bound">a₁</a> <a id="10965" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="10967" href="Monoids.html#10967" class="Bound">b₁</a><a id="10969" class="Symbol">)</a> <a id="10971" class="Symbol">(</a><a id="10972" href="Monoids.html#10972" class="Bound">a₂</a> <a id="10975" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="10977" href="Monoids.html#10977" class="Bound">b₂</a><a id="10979" class="Symbol">)</a> <a id="10981" class="Symbol">(</a><a id="10982" href="Monoids.html#10982" class="Bound">a₃</a> <a id="10985" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="10987" href="Monoids.html#10987" class="Bound">b₃</a><a id="10989" class="Symbol">)</a> <a id="10991" class="Keyword">rewrite</a> <a id="10999" href="Monoids.html#4072" class="Function">assoc</a> <a id="11005" href="Monoids.html#10962" class="Bound">a₁</a> <a id="11008" href="Monoids.html#10972" class="Bound">a₂</a> <a id="11011" href="Monoids.html#10982" class="Bound">a₃</a> <a id="11014" class="Keyword">rewrite</a> <a id="11022" href="Monoids.html#4072" class="Function">assoc</a> <a id="11028" href="Monoids.html#10967" class="Bound">b₁</a> <a id="11031" href="Monoids.html#10977" class="Bound">b₂</a> <a id="11034" href="Monoids.html#10987" class="Bound">b₃</a> <a id="11037" class="Symbol">=</a> <a id="11039" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>

  <a id="11047" href="Monoids.html#11047" class="Function">×-monoid</a> <a id="11056" class="Symbol">:</a> <a id="11058" href="Monoids.html#5615" class="Record">Monoid</a> <a id="11065" class="Symbol">(</a><a id="11066" href="Monoids.html#10713" class="Bound">A</a> <a id="11068" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="11070" href="Monoids.html#10729" class="Bound">B</a><a id="11071" class="Symbol">)</a>
  <a id="11075" href="Monoids.html#5675" class="Field">Monoid.ε</a> <a id="11084" href="Monoids.html#11047" class="Function">×-monoid</a> <a id="11093" class="Symbol">=</a> <a id="11095" href="Monoids.html#5675" class="Field">ε</a> <a id="11097" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="11099" href="Monoids.html#5675" class="Field">ε</a>
  <a id="11103" class="Symbol">(</a><a id="11104" href="Monoids.html#11047" class="Function">×-monoid</a> <a id="11113" href="Monoids.html#5685" class="Field Operator">Monoid.★</a> <a id="11122" class="Symbol">(</a><a id="11123" href="Monoids.html#11123" class="Bound">a</a> <a id="11125" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="11127" href="Monoids.html#11127" class="Bound">b</a><a id="11128" class="Symbol">))</a> <a id="11131" class="Symbol">(</a><a id="11132" href="Monoids.html#11132" class="Bound">a₁</a> <a id="11135" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="11137" href="Monoids.html#11137" class="Bound">b₁</a><a id="11139" class="Symbol">)</a> <a id="11141" class="Symbol">=</a> <a id="11143" href="Monoids.html#11123" class="Bound">a</a> <a id="11145" href="Monoids.html#5685" class="Field Operator">★</a> <a id="11147" href="Monoids.html#11132" class="Bound">a₁</a> <a id="11150" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="11152" href="Monoids.html#11127" class="Bound">b</a> <a id="11154" href="Monoids.html#5685" class="Field Operator">★</a> <a id="11156" href="Monoids.html#11137" class="Bound">b₁</a>
  <a id="11161" href="Monoids.html#5453" class="Field">is-monoid.has-is-semigroup</a> <a id="11188" class="Symbol">(</a><a id="11189" href="Monoids.html#5705" class="Field">Monoid.has-is-monoid</a> <a id="11210" href="Monoids.html#11047" class="Function">×-monoid</a><a id="11218" class="Symbol">)</a> <a id="11220" class="Symbol">=</a>
    <a id="11226" href="Monoids.html#4207" class="Field">Semigroup.has-is-semigroup</a> <a id="11253" href="Monoids.html#10798" class="Function">×-semigroup</a>
  <a id="11267" href="Monoids.html#5547" class="Field">is-monoid.identityˡ</a> <a id="11287" class="Symbol">(</a><a id="11288" href="Monoids.html#5705" class="Field">Monoid.has-is-monoid</a> <a id="11309" href="Monoids.html#11047" class="Function">×-monoid</a><a id="11317" class="Symbol">)</a> <a id="11319" class="Symbol">(</a><a id="11320" href="Monoids.html#11320" class="Bound">a</a> <a id="11322" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="11324" href="Monoids.html#11324" class="Bound">b</a><a id="11325" class="Symbol">)</a> 
    <a id="11332" class="Keyword">rewrite</a> <a id="11340" href="Monoids.html#5547" class="Function">identityˡ</a> <a id="11350" href="Monoids.html#11320" class="Bound">a</a> <a id="11352" class="Keyword">rewrite</a> <a id="11360" href="Monoids.html#5547" class="Function">identityˡ</a> <a id="11370" href="Monoids.html#11324" class="Bound">b</a> <a id="11372" class="Symbol">=</a> <a id="11374" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
  <a id="11381" href="Monoids.html#5579" class="Field">is-monoid.identityʳ</a> <a id="11401" class="Symbol">(</a><a id="11402" href="Monoids.html#5705" class="Field">Monoid.has-is-monoid</a> <a id="11423" href="Monoids.html#11047" class="Function">×-monoid</a><a id="11431" class="Symbol">)</a> <a id="11433" class="Symbol">(</a><a id="11434" href="Monoids.html#11434" class="Bound">a</a> <a id="11436" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="11438" href="Monoids.html#11438" class="Bound">b</a><a id="11439" class="Symbol">)</a>
    <a id="11445" class="Keyword">rewrite</a> <a id="11453" href="Monoids.html#5579" class="Function">identityʳ</a> <a id="11463" href="Monoids.html#11434" class="Bound">a</a> <a id="11465" class="Keyword">rewrite</a> <a id="11473" href="Monoids.html#5579" class="Function">identityʳ</a> <a id="11483" href="Monoids.html#11438" class="Bound">b</a> <a id="11485" class="Symbol">=</a> <a id="11487" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>

<a id="11493" class="Keyword">module</a> <a id="11500" href="Monoids.html#11500" class="Module">_</a> <a id="11502" class="Keyword">where</a>
  <a id="11510" class="Keyword">instance</a> <a id="11519" href="Monoids.html#11519" class="Function">_</a> <a id="11521" class="Symbol">=</a> <a id="11523" href="Monoids.html#11047" class="Function">×-monoid</a> <a id="11532" href="Monoids.html#9165" class="Function">+-0</a> <a id="11536" href="Monoids.html#9545" class="Function">*-1</a>

  <a id="11543" href="Monoids.html#11543" class="Function">sum×prod</a> <a id="11552" class="Symbol">:</a> <a id="11554" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="11559" class="Symbol">(</a><a id="11560" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="11562" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="11564" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a><a id="11565" class="Symbol">)</a> <a id="11567" class="Symbol">→</a> <a id="11569" class="Symbol">(</a><a id="11570" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="11572" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="11574" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a><a id="11575" class="Symbol">)</a>
  <a id="11579" href="Monoids.html#11543" class="Function">sum×prod</a> <a id="11588" class="Symbol">=</a> <a id="11590" href="Monoids.html#7709" class="Function">foldMapList</a> <a id="11602" href="Function.Base.html#704" class="Function">id</a>

<a id="11606" href="Monoids.html#11606" class="Function">_</a> <a id="11608" class="Symbol">:</a> <a id="11610" href="Monoids.html#11543" class="Function">sum×prod</a> <a id="11619" class="Symbol">(</a><a id="11620" href="Data.List.Base.html#3703" class="Function">zip</a> <a id="11624" href="Monoids.html#7306" class="Function">numbers</a> <a id="11632" href="Monoids.html#7306" class="Function">numbers</a><a id="11639" class="Symbol">)</a> <a id="11641" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="11643" class="Symbol">(</a><a id="11644" class="Number">21</a> <a id="11647" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="11649" class="Number">720</a><a id="11652" class="Symbol">)</a>
<a id="11654" class="Symbol">_</a> <a id="11656" class="Symbol">=</a> <a id="11658" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre>
<p>Up until now we have only worked on the <code>List</code> type. This is getting a bit boring and
redundant… On top of it being boring it might make you second guess the generality of
this approach. Can we only work on lists? As you might guess this is not the case!
We can define a more general structure <code>Foldable</code> and generalize this notion to arbitrary
data structures.</p>
<pre class="Agda"><a id="Foldable"></a><a id="12041" href="Monoids.html#12041" class="Function">Foldable</a> <a id="12050" class="Symbol">:</a> <a id="12052" class="Symbol">{</a><a id="12053" href="Monoids.html#12053" class="Bound">ℓ₁</a> <a id="12056" href="Monoids.html#12056" class="Bound">ℓ₂</a> <a id="12059" class="Symbol">:</a> <a id="12061" href="Agda.Primitive.html#591" class="Postulate">Level</a><a id="12066" class="Symbol">}</a> <a id="12068" class="Symbol">→</a> <a id="12070" class="Symbol">(</a><a id="12071" href="Monoids.html#12071" class="Bound">ℓᶠ</a> <a id="12074" class="Symbol">:</a> <a id="12076" href="Agda.Primitive.html#591" class="Postulate">Level</a><a id="12081" class="Symbol">)</a> <a id="12083" class="Symbol">→</a> <a id="12085" class="Symbol">(</a><a id="12086" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="12090" href="Monoids.html#12053" class="Bound">ℓ₁</a> <a id="12093" class="Symbol">→</a> <a id="12095" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="12099" href="Monoids.html#12071" class="Bound">ℓᶠ</a><a id="12101" class="Symbol">)</a> <a id="12103" class="Symbol">→</a> <a id="12105" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="12109" class="Symbol">(</a><a id="12110" href="Monoids.html#1493" class="Primitive">lsuc</a> <a id="12115" href="Monoids.html#12053" class="Bound">ℓ₁</a> <a id="12118" href="Agda.Primitive.html#804" class="Primitive Operator">⊔</a> <a id="12120" href="Monoids.html#1493" class="Primitive">lsuc</a> <a id="12125" href="Monoids.html#12056" class="Bound">ℓ₂</a> <a id="12128" href="Agda.Primitive.html#804" class="Primitive Operator">⊔</a> <a id="12130" href="Monoids.html#12071" class="Bound">ℓᶠ</a><a id="12132" class="Symbol">)</a>
<a id="12134" href="Monoids.html#12041" class="Function">Foldable</a> <a id="12143" class="Symbol">{</a><a id="12144" class="Argument">ℓ₂</a> <a id="12147" class="Symbol">=</a> <a id="12149" href="Monoids.html#12149" class="Bound">ℓ₂</a><a id="12151" class="Symbol">}</a> <a id="12153" class="Symbol">_</a> <a id="12155" href="Monoids.html#12155" class="Bound">F</a> <a id="12157" class="Symbol">=</a> <a id="12159" class="Symbol">∀</a> <a id="12161" class="Symbol">{</a><a id="12162" href="Monoids.html#12162" class="Bound">A</a><a id="12163" class="Symbol">}</a> <a id="12165" class="Symbol">{</a><a id="12166" href="Monoids.html#12166" class="Bound">B</a> <a id="12168" class="Symbol">:</a> <a id="12170" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="12174" href="Monoids.html#12149" class="Bound">ℓ₂</a><a id="12176" class="Symbol">}</a> <a id="12178" class="Symbol">→</a> <a id="12180" class="Symbol">⦃</a> <a id="12182" href="Monoids.html#5615" class="Record">Monoid</a> <a id="12189" href="Monoids.html#12166" class="Bound">B</a> <a id="12191" class="Symbol">⦄</a> <a id="12193" class="Symbol">→</a> <a id="12195" class="Symbol">(</a><a id="12196" href="Monoids.html#12162" class="Bound">A</a> <a id="12198" class="Symbol">→</a> <a id="12200" href="Monoids.html#12166" class="Bound">B</a><a id="12201" class="Symbol">)</a> <a id="12203" class="Symbol">→</a> <a id="12205" href="Monoids.html#12155" class="Bound">F</a> <a id="12207" href="Monoids.html#12162" class="Bound">A</a> <a id="12209" class="Symbol">→</a> <a id="12211" href="Monoids.html#12166" class="Bound">B</a>


<a id="foldableList"></a><a id="12215" href="Monoids.html#12215" class="Function">foldableList</a> <a id="12228" class="Symbol">:</a> <a id="12230" href="Monoids.html#12041" class="Function">Foldable</a> <a id="12239" class="Symbol">{</a><a id="12240" href="Monoids.html#2489" class="Generalizable">ℓ</a><a id="12241" class="Symbol">}</a> <a id="12243" class="Symbol">{</a><a id="12244" href="Monoids.html#2491" class="Generalizable">ℓ₂</a><a id="12246" class="Symbol">}</a> <a id="12248" class="Symbol">_</a> <a id="12250" href="Agda.Builtin.List.html#130" class="Datatype">List</a>
<a id="12255" href="Monoids.html#12215" class="Function">foldableList</a> <a id="12268" class="Symbol">=</a> <a id="12270" href="Monoids.html#7709" class="Function">foldMapList</a>

<a id="12283" class="Keyword">module</a> <a id="12290" href="Monoids.html#12290" class="Module">_</a> <a id="12292" class="Keyword">where</a>
  <a id="12300" class="Keyword">instance</a> <a id="12309" href="Monoids.html#12309" class="Function">_</a> <a id="12311" class="Symbol">=</a> <a id="12313" href="Monoids.html#9165" class="Function">+-0</a>

  <a id="12320" href="Monoids.html#12320" class="Function">length</a> <a id="12327" class="Symbol">:</a> <a id="12329" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="12334" href="Monoids.html#2504" class="Generalizable">A</a> <a id="12336" class="Symbol">→</a> <a id="12338" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
  <a id="12342" href="Monoids.html#12320" class="Function">length</a> <a id="12349" class="Symbol">=</a> <a id="12351" href="Monoids.html#12215" class="Function">foldableList</a> <a id="12364" class="Symbol">(</a><a id="12365" href="Function.Base.html#725" class="Function">const</a> <a id="12371" class="Number">1</a><a id="12372" class="Symbol">)</a>

<a id="12375" href="Monoids.html#12375" class="Function">_</a> <a id="12377" class="Symbol">:</a> <a id="12379" href="Monoids.html#12320" class="Function">length</a> <a id="12386" href="Monoids.html#7306" class="Function">numbers</a> <a id="12394" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="12396" class="Number">6</a>
<a id="12398" class="Symbol">_</a> <a id="12400" class="Symbol">=</a> <a id="12402" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre>
<h3 id="foldable-binary-trees"><a href="#foldable-binary-trees" class="anchor fas fa-xs fa-link"></a>Foldable binary trees</h3>
<p>I claimed that we can <code>foldMap</code> over other structures than <code>List</code>. Let’s define
a simple <em>binary tree</em> data structure and show that we can use the same machinery
on <em>binary trees</em> as we have been using on <em>lists</em>.</p>
<pre class="Agda"><a id="12662" class="Keyword">data</a> <a id="BT"></a><a id="12667" href="Monoids.html#12667" class="Datatype">BT</a> <a id="12670" class="Symbol">(</a><a id="12671" href="Monoids.html#12671" class="Bound">A</a> <a id="12673" class="Symbol">:</a> <a id="12675" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="12679" href="Monoids.html#2489" class="Generalizable">ℓ</a><a id="12680" class="Symbol">)</a> <a id="12682" class="Symbol">:</a> <a id="12684" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="12688" href="Monoids.html#12679" class="Bound">ℓ</a> <a id="12690" class="Keyword">where</a>
  <a id="BT.empty"></a><a id="12698" href="Monoids.html#12698" class="InductiveConstructor">empty</a> <a id="12704" class="Symbol">:</a> <a id="12706" href="Monoids.html#12667" class="Datatype">BT</a> <a id="12709" href="Monoids.html#12671" class="Bound">A</a>
  <a id="BT.branch"></a><a id="12713" href="Monoids.html#12713" class="InductiveConstructor">branch</a> <a id="12720" class="Symbol">:</a> <a id="12722" href="Monoids.html#12667" class="Datatype">BT</a> <a id="12725" href="Monoids.html#12671" class="Bound">A</a> <a id="12727" class="Symbol">→</a> <a id="12729" href="Monoids.html#12671" class="Bound">A</a> <a id="12731" class="Symbol">→</a> <a id="12733" href="Monoids.html#12667" class="Datatype">BT</a> <a id="12736" href="Monoids.html#12671" class="Bound">A</a> <a id="12738" class="Symbol">→</a> <a id="12740" href="Monoids.html#12667" class="Datatype">BT</a> <a id="12743" href="Monoids.html#12671" class="Bound">A</a>

<a id="12746" class="Keyword">pattern</a> <a id="leaf"></a><a id="12754" href="Monoids.html#12754" class="InductiveConstructor">leaf</a> <a id="12759" href="Monoids.html#12776" class="Bound">a</a> <a id="12761" class="Symbol">=</a> <a id="12763" href="Monoids.html#12713" class="InductiveConstructor">branch</a> <a id="12770" href="Monoids.html#12698" class="InductiveConstructor">empty</a> <a id="12776" href="Monoids.html#12776" class="Bound">a</a> <a id="12778" href="Monoids.html#12698" class="InductiveConstructor">empty</a>

<a id="foldableBT"></a><a id="12785" href="Monoids.html#12785" class="Function">foldableBT</a> <a id="12796" class="Symbol">:</a> <a id="12798" href="Monoids.html#12041" class="Function">Foldable</a> <a id="12807" class="Symbol">{</a><a id="12808" href="Level.html#521" class="Function">0ℓ</a><a id="12810" class="Symbol">}</a> <a id="12812" class="Symbol">{</a><a id="12813" href="Monoids.html#2489" class="Generalizable">ℓ</a><a id="12814" class="Symbol">}</a> <a id="12816" href="Level.html#521" class="Function">0ℓ</a> <a id="12819" href="Monoids.html#12667" class="Datatype">BT</a>
<a id="12822" href="Monoids.html#12785" class="Function">foldableBT</a> <a id="12833" class="Symbol">⦃</a> <a id="12835" href="Monoids.html#12835" class="Bound">mon</a> <a id="12839" class="Symbol">⦄</a> <a id="12841" href="Monoids.html#12841" class="Bound">f</a> <a id="12843" href="Monoids.html#12698" class="InductiveConstructor">empty</a> <a id="12849" class="Symbol">=</a> <a id="12851" href="Monoids.html#5675" class="Function">ε</a>
  <a id="12855" class="Keyword">where</a> <a id="12861" class="Keyword">open</a> <a id="12866" href="Monoids.html#5615" class="Module">Monoid</a> <a id="12873" href="Monoids.html#12835" class="Bound">mon</a>
<a id="12877" href="Monoids.html#12785" class="Function">foldableBT</a> <a id="12888" class="Symbol">⦃</a> <a id="12890" href="Monoids.html#12890" class="Bound">mon</a> <a id="12894" class="Symbol">⦄</a> <a id="12896" href="Monoids.html#12896" class="Bound">f</a> <a id="12898" class="Symbol">(</a><a id="12899" href="Monoids.html#12713" class="InductiveConstructor">branch</a> <a id="12906" href="Monoids.html#12906" class="Bound">l</a> <a id="12908" href="Monoids.html#12908" class="Bound">x</a> <a id="12910" href="Monoids.html#12910" class="Bound">r</a><a id="12911" class="Symbol">)</a> <a id="12913" class="Symbol">=</a>
  <a id="12917" href="Monoids.html#12785" class="Function">foldableBT</a> <a id="12928" href="Monoids.html#12896" class="Bound">f</a> <a id="12930" href="Monoids.html#12906" class="Bound">l</a> <a id="12932" href="Monoids.html#5685" class="Function Operator">★</a> <a id="12934" href="Monoids.html#12896" class="Bound">f</a> <a id="12936" href="Monoids.html#12908" class="Bound">x</a> <a id="12938" href="Monoids.html#5685" class="Function Operator">★</a> <a id="12940" href="Monoids.html#12785" class="Function">foldableBT</a> <a id="12951" href="Monoids.html#12896" class="Bound">f</a> <a id="12953" href="Monoids.html#12910" class="Bound">r</a>
  <a id="12957" class="Keyword">where</a> <a id="12963" class="Keyword">open</a> <a id="12968" href="Monoids.html#5615" class="Module">Monoid</a> <a id="12975" href="Monoids.html#12890" class="Bound">mon</a>

<a id="tree"></a><a id="12980" href="Monoids.html#12980" class="Function">tree</a> <a id="12985" class="Symbol">:</a> <a id="12987" href="Monoids.html#12667" class="Datatype">BT</a> <a id="12990" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
<a id="12992" href="Monoids.html#12980" class="Function">tree</a> <a id="12997" class="Symbol">=</a> <a id="12999" href="Monoids.html#12713" class="InductiveConstructor">branch</a> <a id="13006" class="Symbol">(</a><a id="13007" href="Monoids.html#12713" class="InductiveConstructor">branch</a> <a id="13014" class="Symbol">(</a><a id="13015" href="Monoids.html#12754" class="InductiveConstructor">leaf</a> <a id="13020" class="Number">20</a><a id="13022" class="Symbol">)</a> <a id="13024" class="Number">30</a> <a id="13027" class="Symbol">(</a><a id="13028" href="Monoids.html#12754" class="InductiveConstructor">leaf</a> <a id="13033" class="Number">40</a><a id="13035" class="Symbol">))</a> <a id="13038" class="Number">10</a> <a id="13041" class="Symbol">(</a><a id="13042" href="Monoids.html#12754" class="InductiveConstructor">leaf</a> <a id="13047" class="Number">50</a><a id="13049" class="Symbol">)</a>

<a id="13052" class="Keyword">module</a> <a id="13059" href="Monoids.html#13059" class="Module">_</a> <a id="13061" class="Keyword">where</a>
  <a id="13069" class="Keyword">instance</a> <a id="13078" href="Monoids.html#13078" class="Function">_</a> <a id="13080" class="Symbol">=</a> <a id="13082" href="Monoids.html#9165" class="Function">+-0</a>

  <a id="13089" href="Monoids.html#13089" class="Function">t-sum</a> <a id="13095" class="Symbol">:</a> <a id="13097" href="Monoids.html#12667" class="Datatype">BT</a> <a id="13100" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="13102" class="Symbol">→</a> <a id="13104" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
  <a id="13108" href="Monoids.html#13089" class="Function">t-sum</a> <a id="13114" class="Symbol">=</a> <a id="13116" href="Monoids.html#12785" class="Function">foldableBT</a> <a id="13127" href="Function.Base.html#704" class="Function">id</a>

  <a id="13133" href="Monoids.html#13133" class="Function">size</a> <a id="13138" class="Symbol">:</a> <a id="13140" href="Monoids.html#12667" class="Datatype">BT</a> <a id="13143" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="13145" class="Symbol">→</a> <a id="13147" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
  <a id="13151" href="Monoids.html#13133" class="Function">size</a> <a id="13156" class="Symbol">=</a> <a id="13158" href="Monoids.html#12785" class="Function">foldableBT</a> <a id="13169" class="Symbol">(</a><a id="13170" href="Function.Base.html#725" class="Function">const</a> <a id="13176" class="Number">1</a><a id="13177" class="Symbol">)</a>

<a id="13180" href="Monoids.html#13180" class="Function">_</a> <a id="13182" class="Symbol">:</a> <a id="13184" href="Monoids.html#13089" class="Function">t-sum</a> <a id="13190" href="Monoids.html#12980" class="Function">tree</a> <a id="13195" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="13197" class="Number">150</a>
<a id="13201" class="Symbol">_</a> <a id="13203" class="Symbol">=</a> <a id="13205" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>

<a id="13211" href="Monoids.html#13211" class="Function">_</a> <a id="13213" class="Symbol">:</a> <a id="13215" href="Monoids.html#13133" class="Function">size</a> <a id="13220" href="Monoids.html#12980" class="Function">tree</a> <a id="13225" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="13227" class="Number">5</a>
<a id="13229" class="Symbol">_</a> <a id="13231" class="Symbol">=</a> <a id="13233" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre>
<p>In fact at this point we have gained enough generality to turn any <code>Foldable</code> to a <code>List</code>!</p>
<pre class="Agda"><a id="toList"></a><a id="13343" href="Monoids.html#13343" class="Function">toList</a> <a id="13350" class="Symbol">:</a> <a id="13352" class="Symbol">∀</a> <a id="13354" class="Symbol">{</a><a id="13355" href="Monoids.html#13355" class="Bound">ℓ</a> <a id="13357" href="Monoids.html#13357" class="Bound">F</a><a id="13358" class="Symbol">}</a> <a id="13360" class="Symbol">→</a> <a id="13362" href="Monoids.html#12041" class="Function">Foldable</a> <a id="13371" href="Monoids.html#13355" class="Bound">ℓ</a> <a id="13373" href="Monoids.html#13357" class="Bound">F</a> <a id="13375" class="Symbol">→</a> <a id="13377" href="Monoids.html#13357" class="Bound">F</a> <a id="13379" href="Monoids.html#2504" class="Generalizable">A</a> <a id="13381" class="Symbol">→</a> <a id="13383" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="13388" href="Monoids.html#2504" class="Generalizable">A</a>
<a id="13390" href="Monoids.html#13343" class="Function">toList</a> <a id="13397" href="Monoids.html#13397" class="Bound">f</a> <a id="13399" class="Symbol">=</a> <a id="13401" href="Monoids.html#13397" class="Bound">f</a> <a id="13403" class="Symbol">⦃</a> <a id="13405" href="Monoids.html#8435" class="Function">[]-monoid</a> <a id="13415" class="Symbol">⦄</a> <a id="13417" class="Symbol">(</a><a id="13418" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">_∷</a> <a id="13421" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a><a id="13423" class="Symbol">)</a>

<a id="13426" href="Monoids.html#13426" class="Function">_</a> <a id="13428" class="Symbol">:</a> <a id="13430" href="Monoids.html#13343" class="Function">toList</a> <a id="13437" href="Monoids.html#12785" class="Function">foldableBT</a> <a id="13448" href="Monoids.html#12980" class="Function">tree</a> <a id="13453" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="13455" class="Number">20</a> <a id="13458" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="13460" class="Number">30</a> <a id="13463" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="13465" class="Number">40</a> <a id="13468" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="13470" class="Number">10</a> <a id="13473" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="13475" class="Number">50</a> <a id="13478" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="13480" class="InductiveConstructor">[]</a>
<a id="13483" class="Symbol">_</a> <a id="13485" class="Symbol">=</a> <a id="13487" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre>
<p>I hope this write up convined you that <code>monoid</code> is a useful part of any programmers
toolkit. There’s so much more to talk about <code>monoids</code>, but I think this is enough for now.</p>
<p>Thanks for reading and see you next time!</p></section>
  </article>
</main>

<hr />
<br />
<footer>
  <a href="/">back</a>
  <a href="/atom.xml">atom</a>
  <a href="/rss.xml">rss</a>
</footer>
<br />

    <script async src="./js/script.js"></script>
  </body>
</html>
